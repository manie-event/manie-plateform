import{s as Bt,x as D,ax as Y,ay as Et,d as it,l as V,r,c as p,o as m,F as O,b as o,a as P,w as n,e as l,t as b,f as S,m as M,g as U,_ as Gt,az as wt,aq as Ft,aA as It,aB as Dt,h as j,u as Tt,au as Yt,j as Wt,k as Ht}from"./aI3ctD-H.js";const lt=Bt({id:"post",state:()=>({posts:[]}),getters:{},actions:{async fetchPosts(){try{const t=await D.get("/api/posts/list");this.posts=t.data}catch(t){alert(t),console.log(t)}},async likePost(t){try{const e=await D.post("/api/posts/list/like",{postId:t});this.posts=e.data.posts}catch(e){alert(e),console.log(e)}},async addComment(t,e){try{const a=await D.post("/api/comments/add",{postId:t,comment:e});this.posts=a.data.posts}catch(a){alert(a),console.log(a)}},async addReply(t,e,a){try{const s=await D.post("/api/replies/add",{postId:t,commentId:e,reply:a});this.posts=s.data.posts}catch(s){alert(s),console.log(s)}}}});var H,qt;function Jt(){if(qt)return H;qt=1;var t=typeof Y=="object"&&Y&&Y.Object===Object&&Y;return H=t,H}var J,jt;function Kt(){if(jt)return J;jt=1;var t=Jt(),e=typeof self=="object"&&self&&self.Object===Object&&self,a=t||e||Function("return this")();return J=a,J}var K,Ct;function ct(){if(Ct)return K;Ct=1;var t=Kt(),e=t.Symbol;return K=e,K}var Q,Rt;function Qt(){if(Rt)return Q;Rt=1;function t(e,a){for(var s=-1,i=e==null?0:e.length,d=Array(i);++s<i;)d[s]=a(e[s],s,e);return d}return Q=t,Q}var X,zt;function Xt(){if(zt)return X;zt=1;var t=Array.isArray;return X=t,X}var Z,$t;function Zt(){if($t)return Z;$t=1;var t=ct(),e=Object.prototype,a=e.hasOwnProperty,s=e.toString,i=t?t.toStringTag:void 0;function d(u){var c=a.call(u,i),v=u[i];try{u[i]=void 0;var x=!0}catch{}var w=s.call(u);return x&&(c?u[i]=v:delete u[i]),w}return Z=d,Z}var tt,Pt;function te(){if(Pt)return tt;Pt=1;var t=Object.prototype,e=t.toString;function a(s){return e.call(s)}return tt=a,tt}var et,Ot;function ee(){if(Ot)return et;Ot=1;var t=ct(),e=Zt(),a=te(),s="[object Null]",i="[object Undefined]",d=t?t.toStringTag:void 0;function u(c){return c==null?c===void 0?i:s:d&&d in Object(c)?e(c):a(c)}return et=u,et}var ot,At;function oe(){if(At)return ot;At=1;function t(e){return e!=null&&typeof e=="object"}return ot=t,ot}var at,Lt;function ae(){if(Lt)return at;Lt=1;var t=ee(),e=oe(),a="[object Symbol]";function s(i){return typeof i=="symbol"||e(i)&&t(i)==a}return at=s,at}var nt,Vt;function ne(){if(Vt)return nt;Vt=1;var t=ct(),e=Qt(),a=Xt(),s=ae(),i=t?t.prototype:void 0,d=i?i.toString:void 0;function u(c){if(typeof c=="string")return c;if(a(c))return e(c,u)+"";if(s(c))return d?d.call(c):"";var v=c+"";return v=="0"&&1/c==-1/0?"-0":v}return nt=u,nt}var st,Mt;function se(){if(Mt)return st;Mt=1;var t=ne();function e(a){return a==null?"":t(a)}return st=e,st}var rt,Ut;function re(){if(Ut)return rt;Ut=1;var t=se(),e=0;function a(s){var i=++e;return t(s)+i}return rt=a,rt}var ie=re();const W=Et(ie),le={class:"d-flex gap-3 align-center"},ce=["src"],de={class:"d-block d-sm-flex align-center gap-3"},me={class:"text-h6"},ue={class:"text-subtitle-2 opacity-50"},ve={class:"py-3 text-body-1"},_e={class:"my-1 d-flex align-center gap-3"},fe={class:"text-subtitle-1 font-weight-semibold"},pe={key:0,class:"ml-10"},be={class:"d-flex gap-3 align-center"},ge=["src"],ye={class:"d-block d-sm-flex align-center gap-3"},he={class:"text-h6"},xe={class:"text-subtitle-2 opacity-50"},ke={class:"py-3 text-body-1"},Se={key:1,class:"d-block d-sm-flex gap-3 align-center mb-5 ml-10"},we=["src"],Ie=it({__name:"Comments",props:{comments:Object||Array,postId:String},setup(t){const e=lt(),a=t,s=V(""),i=async(c,v,x)=>{var _,y;const k={id:W("#REPLY_"),profile:{id:W("#REPLY_"),avatar:(_=a.comments)==null?void 0:_.profile.avatar,name:(y=a.comments)==null?void 0:y.profile.name,time:"now"},data:{comment:x,likes:{like:!1,value:0},replies:[]}};e.addReply(c,v,k),s.value=""},d=V(!1),u=()=>d.value=!d.value;return(c,v)=>{var G,R,L;const x=r("v-avatar"),w=r("CircleIcon"),k=r("ThumbUpIcon"),_=r("v-btn"),y=r("v-tooltip"),A=r("ArrowBackUpIcon"),C=r("v-card"),$=r("v-text-field");return m(),p(O,null,[o(C,{variant:"flat",class:"mb-3 pa-5 border bg-surface"},{default:n(()=>{var g,z,N,B,E,F;return[l("div",le,[o(x,{size:"30"},{default:n(()=>{var I;return[l("img",{src:(I=t.comments)==null?void 0:I.profile.avatar,width:"30",alt:"avatar"},null,8,ce)]}),_:1}),l("div",de,[l("h6",me,b((g=t.comments)==null?void 0:g.profile.name),1),l("span",ue,[o(w,{size:"8",fill:"inherit",class:"opacity-50 mr-1"}),S(" "+b((z=t.comments)==null?void 0:z.profile.time),1)])])]),l("div",ve,b((N=t.comments)==null?void 0:N.data.comment),1),l("div",_e,[o(y,{text:"Like"},{activator:n(({props:I})=>[o(_,M({icon:"",color:"primary",variant:"flat",size:"x-small"},I),{default:n(()=>[o(k,{size:"16"})]),_:2},1040)]),_:1}),l("span",fe,b(((B=t.comments)==null?void 0:B.data)&&((E=t.comments)==null?void 0:E.data.likes)&&((F=t.comments)==null?void 0:F.data.likes.value)),1),o(y,{text:"Reply"},{activator:n(({props:I})=>[o(_,M({icon:"",color:"secondary",variant:"flat"},I,{size:"x-small",onClick:u}),{default:n(()=>[o(A,{size:"16"})]),_:2},1040)]),_:1})])]}),_:1}),(G=t.comments)!=null&&G.data.replies?(m(),p("div",pe,[(m(!0),p(O,null,U((R=t.comments)==null?void 0:R.data.replies,g=>(m(),p("div",null,[o(C,{variant:"flat",class:"mb-3 pa-5 border"},{default:n(()=>[l("div",be,[o(x,{size:"30"},{default:n(()=>[l("img",{src:g.profile.avatar,width:"30",alt:"avatar"},null,8,ge)]),_:2},1024),l("div",ye,[l("h6",he,b(g.profile.name),1),l("span",xe,[o(w,{size:"8",fill:"inherit",class:"opacity-50 mr-1"}),S(" "+b(g.profile.time),1)])])]),l("div",ke,b(g.data.comment),1)]),_:2},1024)]))),256))])):P("",!0),d.value?(m(),p("div",Se,[l("img",{src:(L=t.comments)==null?void 0:L.profile.avatar,width:"40",class:"flex-shrink-0 d-none d-sm-block",alt:"avatar"},null,8,we),o($,{variant:"outlined",color:"primary",modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=g=>s.value=g),label:"Write Reply","hide-details":""},null,8,["modelValue"]),o(_,{color:"secondary",class:"mt-3 mt-sm-0",variant:"flat",size:"large",onClick:v[1]||(v[1]=g=>{var z;return i(t.postId,(z=t.comments)==null?void 0:z.id,s.value)})},{default:n(()=>v[2]||(v[2]=[S(" Reply ")])),_:1})])):P("",!0)],64)}}}),Te=Gt(Ie,[["__scopeId","data-v-908799dc"]]),qe={class:"d-flex gap-3 align-center"},je=["src"],Ce={class:"d-block d-sm-flex align-center gap-3"},Re={class:"text-h6"},ze={class:"text-subtitle-2 opacity-50"},$e={class:"py-4 text-body-1"},Pe=["src"],Oe={key:1,class:"rounded-md overflow-hidden my-5"},Ae=["src"],Le={class:"my-4 mt-5 d-flex align-center gap-3"},Ve={class:"text-subtitle-1 font-weight-semibold"},Me={class:"text-subtitle-1 font-weight-semibold"},Ue={key:0,class:"pa-5 pt-0"},Ge={key:1},Ne={class:"d-block d-sm-flex gap-3 align-center mb-4 px-4 pt-4"},Be=["src"],Ee=it({__name:"PostItem",props:{post:Object||Array},setup(t){var x,w;const e=lt(),a=t,s=V(!((x=a.post)!=null&&x.comments&&((w=a.post)==null?void 0:w.comments.length)>0)),i=V(""),d=V([{title:"Share Now",icon:wt},{title:"Share to Friends",icon:Ft},{title:"Send in Messanger",icon:It},{title:"Copy Link",icon:Dt}]),u=()=>s.value=!s.value,c=async k=>{await e.likePost(k)},v=async(k,_)=>{var C,$;const A={id:W("#COMMENT_"),profile:{id:W("#COMMENT_"),avatar:(C=a.post)==null?void 0:C.profile.avatar,name:($=a.post)==null?void 0:$.profile.name,time:"now"},data:{comment:_,likes:{like:!1,value:0},replies:[]}};e.addComment(k,A),i.value=""};return(k,_)=>{const y=r("v-avatar"),A=r("CircleIcon"),C=r("v-col"),$=r("v-row"),G=r("ThumbUpIcon"),R=r("v-btn"),L=r("v-tooltip"),g=r("v-list-item-title"),z=r("v-list-item"),N=r("v-list"),B=r("v-menu"),E=r("v-card-item"),F=r("v-divider"),I=r("v-text-field"),Nt=r("v-card");return m(),j(Nt,{elevation:"10",class:"bg-surface"},{default:n(()=>{var dt,mt;return[o(E,null,{default:n(()=>{var h,T,ut,vt,_t,ft,pt,bt,gt,yt,ht;return[l("div",qe,[o(y,{size:"40"},{default:n(()=>{var f;return[l("img",{src:(f=t.post)==null?void 0:f.profile.avatar,width:"40",alt:"avatar"},null,8,je)]}),_:1}),l("div",Ce,[l("h6",Re,b((h=t.post)==null?void 0:h.profile.name),1),l("span",ze,[o(A,{size:"8",fill:"inherit",class:"opacity-50 mr-1"}),S(" "+b((T=t.post)==null?void 0:T.profile.time),1)])])]),l("div",$e,b((ut=t.post)==null?void 0:ut.data.content),1),(vt=t.post)!=null&&vt.data.images?(m(),j($,{key:0},{default:n(()=>{var f;return[(m(!0),p(O,null,U((f=t.post)==null?void 0:f.data.images,q=>(m(),j(C,{md:q.featured?"12":"6"},{default:n(()=>[o(y,{class:"rounded-md w-100",size:"360"},{default:n(()=>[l("img",{src:q.img,alt:"photo"},null,8,Pe)]),_:2},1024)]),_:2},1032,["md"]))),256))]}),_:1})):P("",!0),(_t=t.post)!=null&&_t.data.video?(m(),p("div",Oe,[l("iframe",{src:`https://www.youtube.com/embed/${(ft=t.post)==null?void 0:ft.data.video}`,frameborder:"0",width:"100%",height:"400"},null,8,Ae)])):P("",!0),l("div",Le,[o(L,{text:"Like"},{activator:n(({props:f})=>{var q,xt,kt;return[o(R,M({onClick:_[0]||(_[0]=We=>{var St;return c(`${(St=t.post)==null?void 0:St.id}`)})},f,{icon:"",color:(q=t.post)!=null&&q.data&&((xt=t.post)!=null&&xt.data.likes)&&((kt=t.post)!=null&&kt.data.likes.like)?"primary":"grey100",variant:"flat",size:"x-small"}),{default:n(()=>[o(G,{size:"16"})]),_:2},1040,["color"])]}),_:1}),l("span",Ve,b(((pt=t.post)==null?void 0:pt.data)&&((bt=t.post)==null?void 0:bt.data.likes)&&((gt=t.post)==null?void 0:gt.data.likes.value)),1),o(L,{text:"Comment"},{activator:n(({props:f})=>[o(R,M({icon:""},f,{color:"secondary",variant:"flat",size:"x-small",onClick:u}),{default:n(()=>[o(Tt(It),{size:"16"})]),_:2},1040)]),_:1}),l("span",Me,b((yt=t.post)!=null&&yt.data.comments?(ht=t.post)==null?void 0:ht.data.comments.length:0),1),o(B,null,{activator:n(({props:f})=>[o(R,M({icon:"",class:"ml-auto",variant:"text",size:"small"},f),{default:n(()=>[o(Tt(wt),{size:"16"})]),_:2},1040)]),default:n(()=>[o(N,null,{default:n(()=>[(m(!0),p(O,null,U(d.value,(f,q)=>(m(),j(z,{key:q,value:q},{prepend:n(()=>[(m(),j(Yt(f.icon),{"stroke-width":"1.5",size:"20"}))]),default:n(()=>[o(g,{class:"ml-3"},{default:n(()=>[S(b(f.title),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]}),_:1}),(dt=t.post)!=null&&dt.data.comments?(m(),p("div",Ue,[(m(!0),p(O,null,U((mt=t.post)==null?void 0:mt.data.comments,h=>{var T;return m(),p("div",null,[o(Te,{comments:h,postId:(T=t.post)==null?void 0:T.id},null,8,["comments","postId"])])}),256))])):P("",!0),s.value?(m(),p("div",Ge,[o(F),l("div",Ne,[o(y,{class:"flex-shrink-0 d-none d-sm-block",size:"33"},{default:n(()=>{var h;return[l("img",{src:(h=t.post)==null?void 0:h.profile.avatar,width:"33",alt:"avatar"},null,8,Be)]}),_:1}),o(I,{variant:"outlined",color:"primary",modelValue:i.value,"onUpdate:modelValue":_[1]||(_[1]=h=>i.value=h),placeholder:"Comment","hide-details":""},null,8,["modelValue"]),o(R,{color:"primary",disabled:i.value==="",class:"mt-3 mt-sm-0",size:"large",onClick:_[2]||(_[2]=h=>{var T;return v((T=t.post)==null?void 0:T.id,i.value)})},{default:n(()=>_[3]||(_[3]=[S(" Comment ")])),_:1},8,["disabled"])])])):P("",!0)]}),_:1})}}}),Je=it({__name:"PostListing",setup(t){const e=lt();Wt(()=>{e.fetchPosts()});const a=Ht(()=>e.posts);return(s,i)=>{const d=r("v-col"),u=r("v-row");return m(),j(u,{class:"mt-4"},{default:n(()=>[(m(!0),p(O,null,U(a.value,c=>(m(),j(d,{cols:"12",key:c.id},{default:n(()=>[o(Ee,{post:c},null,8,["post"])]),_:2},1024))),128))]),_:1})}}}),Fe={},De={class:"d-flex pb-2"};function Ye(t,e){const a=r("v-textarea"),s=r("PhotoIcon"),i=r("v-avatar"),d=r("v-btn"),u=r("NotebookIcon"),c=r("v-card-item"),v=r("v-card");return m(),j(v,{elevation:"10",class:"bg-surface"},{default:n(()=>[o(c,null,{default:n(()=>[o(a,{elevation:"10",color:"primary",name:"input-7-4",placeholder:"Share your thoughts",rows:"5"}),l("div",De,[o(i,{size:"32",color:"primary",class:"mr-2"},{default:n(()=>[o(s,{size:"16"})]),_:1}),o(d,{color:"inherit",type:"upload",variant:"plain",class:"opacity-1"},{default:n(()=>e[0]||(e[0]=[S(" Photo / Video ")])),_:1}),o(d,{color:"inherit",variant:"plain",class:"opacity-1"},{default:n(()=>[o(i,{size:"32",color:"secondary",class:"mr-2"},{default:n(()=>[o(u,{size:"16"})]),_:1}),e[1]||(e[1]=S(" Article "))]),_:1}),o(d,{class:"bg-primary ml-auto",size:"large"},{default:n(()=>e[2]||(e[2]=[S("Post")])),_:1})])]),_:1})]),_:1})}const Ke=Gt(Fe,[["render",Ye]]);export{Ke as A,Je as _};
