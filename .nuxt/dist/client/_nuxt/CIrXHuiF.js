import{L,B as b}from"./CHuF-KPj.js";import{d as p,c as a,b as n,f as s,m as i,y as h,C as B,bR as E,k as o,o as I,bQ as R,e as f,n as C,t as M,w as g}from"./DkNnpBgi.js";import{L as V}from"./Bz_k2J1X.js";import{u as $}from"./DbI_UbDv.js";import"./kkF_28Ko.js";import"./CyXQxhwq.js";const N=""+new URL("check-email.BWRWztMi.jpg",import.meta.url).href,j=""+new URL("good-verification.DMFiIdFa.svg",import.meta.url).href,U={class:"loader__container"},z=["src"],D=p({__name:"Loader",setup(k){return(m,u)=>(n(),a("div",U,[s("img",{src:i(V),alt:"",class:"loader__img"},null,8,z)]))}}),F=h(D,[["__scopeId","data-v-fe2c8952"]]),P={class:"verify-email__container"},S={class:"verify-email__message"},W={key:0},A={key:1},Q=["src"],T={class:"text-green-600"},q={class:"mt-6 text-sm"},G=["src"],H=["src"],J=p({__name:"[token]",setup(k){const m=B(),u=E(),w=m.params.token,{checkEmail:x}=$(),_=o(!0),r=o(!1),y=o(""),c=o(10);let l;return I(async()=>{var d,t,v;try{const e=await x(w);if((e==null?void 0:e.message)==="Email verified"||(d=e==null?void 0:e.message)!=null&&d.toLowerCase().includes("verified"))r.value=!0,setTimeout(()=>u.push("/auth/login"),1e4);else throw new Error((e==null?void 0:e.message)||"Erreur inconnue")}catch(e){y.value=((v=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:v.message)||(e==null?void 0:e.message)}finally{_.value=!1}l=window.setInterval(()=>{c.value>0&&r.value?c.value--:clearInterval(l)},1e3)}),R(()=>{clearInterval(l)}),(d,t)=>(n(),a("div",P,[s("div",S,[_.value?(n(),a("div",W,[f(F)])):r.value?(n(),a("div",A,[s("img",{src:i(j),alt:"",width:"70"},null,8,Q),t[2]||(t[2]=s("h1",{class:"text-2xl font-bold mb-4"},"Bonjour à toi,",-1)),s("div",T,[t[0]||(t[0]=s("h3",null,"Nous venons de vérifier ton email.",-1)),t[1]||(t[1]=s("h3",{class:"mt-2 text-sm"},"L'aventure commence ici",-1)),s("p",q,M(`Vous allez être rediriger vers la page d'identification dans ${c.value} secondes `),1)])])):C("",!0)]),f(b,null,{"bg-image":g(()=>[s("img",{src:i(N),alt:"",style:{width:"100%",height:"100%","object-fit":"cover","border-radius":"5px"}},null,8,G)]),logo:g(()=>[s("img",{src:i(L),alt:"",class:"manie-logo"},null,8,H)]),_:1})]))}}),se=h(J,[["__scopeId","data-v-606a0d9c"]]);export{se as default};
