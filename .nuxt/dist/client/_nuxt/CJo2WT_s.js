import{bc as q,be as R,k as V,d as z,s as A,r as d,l as x,b as r,w as a,e as u,g as $,f as i,c as E,F as M,x as T,n as S,m as y,bf as F,q as G,v as H,bg as J,z as K,L as I,t as L,bh as Q,T as U,y as W}from"./C7zyImg8.js";const D=q("notes",()=>{const n=R("notesByEvent",{}),c=V(null),s=V(null);return{notesByEvent:n,selectedNote:c,selectedEventUuid:s,addNote:(e,t)=>{n.value[e]||(n.value[e]=[]),t.id||(t.id=Date.now()),n.value[e].push(t)},getNotesByEvent:e=>n.value[e]||[],deleteNote:(e,t)=>{n.value[e]&&(n.value[e]=n.value[e].filter(_=>_.id!==t))},updateNote:(e,t,_)=>{var o;const f=n.value[e];if(!f)return;const p=f.findIndex(m=>m.id===t);if(p!==-1){const m={...f[p],..._};f[p]=m,((o=c.value)==null?void 0:o.id)===t&&(c.value=m)}},selectNote:(e,t)=>{if(n.value[e]){const _=n.value[e].find(f=>f.id===t);_&&(c.value=_,s.value=e)}},clearSelection:()=>{c.value=null,s.value=null}}}),X={class:"d-flex gap-3 align-center"},Y={class:"pt-6 pb-3 d-flex gap-2"},Z=z({__name:"AddNote",props:{event:{}},setup(n){const c=n,s=D(),{selectedNote:g,notes:C}=A(s),{updateNote:b,getNotesByEvent:h,addNote:k}=s,v=V(!1),e=V(""),t=V("primary"),_=p=>t.value=p,f=()=>{var p;k(((p=c.event)==null?void 0:p.uuid)||"",{id:Date.now(),title:e.value,content:"",color:t.value,datef:new Date().toISOString()}),v.value=!1,e.value=""};return(p,o)=>{const m=d("v-btn"),l=d("v-textarea"),w=d("CheckIcon"),B=d("v-card-text"),O=d("v-card"),P=d("v-dialog"),j=d("v-sheet");return r(),x(j,null,{default:a(()=>[u(m,{color:"primary",onClick:o[0]||(o[0]=N=>v.value=!0),rounded:"pill"},{default:a(()=>[...o[4]||(o[4]=[$("+",-1)])]),_:1}),u(P,{modelValue:v.value,"onUpdate:modelValue":o[3]||(o[3]=N=>v.value=N),"max-width":"500"},{default:a(()=>[u(O,null,{default:a(()=>[u(B,null,{default:a(()=>[o[7]||(o[7]=i("h4",{class:"text-h6 mb-4"},"Ajoutez un memo",-1)),u(l,{outlined:"",name:"Note",modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=N=>e.value=N)},null,8,["modelValue"]),o[8]||(o[8]=i("h4",{class:"text-h6 mt-4 mb-4"},"Séléctionnez une couleur",-1)),i("div",X,[(r(!0),E(M,null,T(y(F),N=>(r(),x(m,{icon:"",key:N.id,size:"x-small",color:N.color,onClick:re=>_(N.color)},{default:a(()=>[t.value===N.color?(r(),x(w,{key:0,width:"16"})):S("",!0)]),_:2},1032,["color","onClick"]))),128))]),i("div",Y,[u(m,{color:"primary",onClick:f,rounded:"pill"},{default:a(()=>[...o[5]||(o[5]=[$("Enregistrer",-1)])]),_:1}),u(m,{color:"error",onClick:o[2]||(o[2]=N=>v.value=!1),rounded:"pill"},{default:a(()=>[...o[6]||(o[6]=[$("Fermer",-1)])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),ee={class:"d-flex gap-3 align-center"},te=z({__name:"NotesContent",props:G({event:{}},{openContentModal:{type:Boolean,default:!1},openContentModalModifiers:{}}),emits:["update:openContentModal"],setup(n){const c=D(),{selectedNote:s}=A(c),{updateNote:g}=c,C=n,b=H(n,"openContentModal"),h=v=>{var e;s.value&&((e=C.event)!=null&&e.uuid)&&g(C.event.uuid,s.value.id,{color:v})},k=()=>{var v;s.value&&((v=C.event)!=null&&v.uuid)&&g(C.event.uuid,s.value.id,{title:s.value.title})};return(v,e)=>{const t=d("v-sheet"),_=d("v-divider"),f=d("v-textarea"),p=d("v-btn"),o=d("v-alert"),m=d("v-dialog");return r(),x(m,{"max-width":"600",width:"100%",modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l)},{default:a(()=>[u(t,null,{default:a(()=>[u(t,{class:"py-3 pl-6 pr-4 d-flex align-center"},{default:a(()=>[...e[2]||(e[2]=[i("h4",{class:"text-h6 font-weight-semibold"},"Edit Notes",-1)])]),_:1}),u(_),y(s)?(r(),x(t,{key:0,class:"pa-6"},{default:a(()=>[e[3]||(e[3]=i("h4",{class:"text-h6 mb-4"},"Change Title",-1)),u(f,{outlined:"",name:"Note",modelValue:y(s).title,"onUpdate:modelValue":e[0]||(e[0]=l=>y(s).title=l),onBlur:k},null,8,["modelValue"]),e[4]||(e[4]=i("h4",{class:"text-h6 mt-4 mb-4"},"Change Notes Color",-1)),i("div",ee,[(r(!0),E(M,null,T(y(F),l=>(r(),x(p,{icon:"",key:l.id,size:"x-small",color:l.color,onClick:w=>h(l.color)},{default:a(()=>[y(s).color===l.color?(r(),x(y(J),{key:0,width:"16"})):S("",!0)]),_:2},1032,["color","onClick"]))),128))])]),_:1})):(r(),x(t,{key:1,class:"pa-6"},{default:a(()=>[u(o,{type:"error",title:"Oops",text:"No note selected. Please select a note."})]),_:1}))]),_:1})]),_:1},8,["modelValue"])}}}),oe={class:"pa-6"},ne={class:"d-flex mb-6 align-center justify-lg-space-between"},le={class:"d-flex gap-4"},se={class:"d-flex mt-3 align-center"},ae={class:"text-subtitle-2 opacity-25"},de=z({__name:"NotesListing",props:{event:{}},setup(n){const c=n,s=D(),{deleteNote:g,getNotesByEvent:C,selectNote:b}=s,h=K(()=>{var e;return C(((e=c.event)==null?void 0:e.uuid)||"")}),k=V(!1),v=e=>{var t;b(((t=c.event)==null?void 0:t.uuid)||"",e)};return(e,t)=>{const _=d("v-tooltip"),f=d("TrashIcon"),p=d("v-btn"),o=d("v-sheet"),m=d("v-alert");return r(),E(M,null,[i("div",oe,[i("div",ne,[t[1]||(t[1]=i("h4",{class:"text-h6 mb-4 font-weight-semibold"},"All Notes",-1)),u(Z,{event:n.event},null,8,["event"])]),i("div",le,[h.value.length>0?(r(!0),E(M,{key:0},T(h.value,l=>(r(),x(o,{class:I("note-sheet pa-6 pb-4 rounded-md cursor-pointer mb-4  bg-light"+l.color),key:l.id,onClick:w=>{v(l.id),k.value=!0}},{default:a(()=>[i("h6",{class:I("text-h6 text-truncate text-"+l.color)},L(l.title),3),i("div",se,[i("small",ae,L(new Date(l.datef).toLocaleDateString()),1),u(p,{icon:"",variant:"text",class:"ml-auto",size:"x-small",onClick:Q(w=>{var B;return y(g)((B=c.event)==null?void 0:B.uuid,l.id)},["stop"])},{default:a(()=>[u(_,{activator:"parent",location:"top"},{default:a(()=>[...t[2]||(t[2]=[$("Delete Note",-1)])]),_:1}),u(f,{size:"18"})]),_:1},8,["onClick"])])]),_:2},1032,["class","onClick"]))),128)):S("",!0)]),h.value.length===0?(r(),x(o,{key:0,class:"pa-6"},{default:a(()=>[u(m,{type:"error",title:"Oops",text:"No notes found Prout. Please add a note."})]),_:1})):S("",!0)]),(r(),x(U,{to:"body"},[u(te,{"open-content-modal":k.value,"onUpdate:openContentModal":t[0]||(t[0]=l=>k.value=l),event:n.event},null,8,["open-content-modal","event"])]))],64)}}}),ue=z({__name:"index",props:{event:{}},setup(n){return(c,s)=>{const g=d("v-card");return r(),x(g,{elevation:"10"},{default:a(()=>[u(de,{event:n.event},null,8,["event"])]),_:1})}}}),ie=W(ue,[["__scopeId","data-v-0fd1cc42"]]);export{ie as default};
