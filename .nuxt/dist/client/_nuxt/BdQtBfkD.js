import{_ as xe}from"./tIApKXi5.js";import{d as pe,h as re,s as le,A as ge,k as U,D as fe,o as Se,r as p,c as v,b as n,F as T,e as s,l as A,w as r,c4 as we,n as R,f as u,g as b,m as t,t as j,q as K,c5 as Ae,T as me,M as ne,v as ue,y as qe,Z as Ue,c6 as Ee,aM as ze,x as Pe,bh as Ce,c7 as Ie,c8 as Qe,c9 as Re}from"./DRerZXE8.js";import{B as Oe}from"./YXVYs8S1.js";import{u as De}from"./1aKaUokA.js";import{c as de,a as Q,d as $e,e as ce,f as Te}from"./BY1ZYcaV.js";import{_ as Be}from"./B4RLF8gt.js";import{u as ve,A as _e}from"./Bn7shm6T.js";import{u as ye}from"./C7_aGLWn.js";import{M as ke}from"./DrU7OixA.js";import{u as he}from"./C9fps2xW.js";const Fe=[{label:"Auvergne Rhône-Alpes",value:"rhoneAlpes"},{label:"Ain",value:"ain"},{label:"Allier",value:"allier"},{label:"Ardèche",value:"ardeche"},{label:"Cantal",value:"cantal"},{label:"Drôme",value:"drome"},{label:"Haute-Savoie",value:"hauteSavoie"},{label:"Haute Loire",value:"hauteLoire"},{label:"Isère",value:"isere"},{label:"Loire",value:"loire"},{label:"Puy De Dôme",value:"puyDeDome"},{label:"Rhône",value:"rhone"},{label:"Savoie",value:"savoie"}],Le={class:"d-flex gap-2 flex-column justify-start align-items-start"},Me={class:"d-flex align-center gap-2"},je={class:"mt-4"},He={class:"my-8"},Ne={key:0,class:"d-flex justify-space-between"},Ke={key:1},Ye=pe({__name:"EditProfessionalProfil",props:{openModal:{type:Boolean},openModalModifiers:{}},emits:["update:openModal"],setup(ie){var M;const W=re(),{professionalUser:f}=le(W),{createProfessionalProfile:F,patchProfessionnalProfileDetails:L}=ye(),{getSectors:S}=ve(),B=ge(ie,"openModal"),z=U([]),h=U(!1),{addError:O,addSuccess:ee}=he(),w=U(1),oe=U(_e),P=U(Fe),D=localStorage.getItem("is-profile-verified"),d=U(0),C=U(!1),H=fe(()=>d.value*7),Y=fe(()=>z.value.reduce((y,e)=>(e.question&&e.reponse&&(y[e.question]=e.reponse),y),null)),G=de({name:Q().min(2).required("Le nom est requis"),siret:Q().required("Le SIRET est requis").length(14,"Le SIRET doit contenir 14 caractères"),address:Q().required("L'adresse est requise"),bio:Q().required("La bio est requise"),mainActivity:Q().required("Activité requise"),mainInterlocutor:Q().required("L'interlocuteur principal est requis"),experience:ce().min(0,"L'expérience doit être positive").required("L'expérience est requise"),geographicArea:Q().required("La zone géographique est requise"),certification:Q(),minimumReservationPeriod:ce().min(0,"La période de réservation doit être positive"),deposit:Te(),depositAmount:ce().min(0,"Le montant de l'acompte doit être positif"),billingPeriod:Q().required("La période de facturation est requise"),links:$e().of(de({type:Q(),value:Q().url("URL non valide")})),faq:de({question:Q(),reponse:Q()})}),{values:a,errors:V,resetForm:Z}=De({validationSchema:G,initialValues:{name:"",siret:"",address:"",bio:"",mainActivity:"Veuillez choisir votre activité",mainInterlocutor:"",experience:0,geographicArea:((M=P.value[0])==null?void 0:M.label)??"",faq:{},minimumReservationPeriod:0,certification:"",deposit:!1,depositAmount:0,billingPeriod:"beforeEvent",links:[]},validateOnMount:!1,keepValuesOnUnmount:!0}),se=()=>{a.links.push({type:"",value:""})},i=y=>{a.links.length>0&&a.links.splice(y,1)},o=()=>{z.value.push({question:"",reponse:""})},q=y=>{z.value.length>=0&&z.value.splice(y,1)},m=()=>{S(a.mainActivity)},E=async y=>{try{const e={...y,faq:Y.value||{},minimumReservationPeriod:H.value};(await F(e)).message==="Professional created"?(ee("Votre profil a été envoyé pour être soumi à vérification"),B.value=!1,C.value=!0):O({message:"La mise à jour du profil a échoué."})}catch{O({message:"Erreur lors de la mise à jour du profil."})}},k=async y=>{try{const e={...y,faq:Y.value||{},minimumReservationPeriod:H.value},x=await L(e);console.log(x,"RESPINSE MODIFY"),x.message==="Professional updated"?(ee("Votre profil a été modifié avec success"),B.value=!1,C.value=!0):O({message:"La mise à jour du profil a échoué."})}catch{O({message:"Erreur lors de la mise à jour du profil."})}};return Se(()=>{var y,e;f.value&&(Z({values:{name:f.value.name??"",siret:f.value.siret??"",address:f.value.address??"",bio:f.value.bio??"",mainActivity:f.value.mainActivity??"Veuillez choisir votre activité",mainInterlocutor:f.value.mainInterlocutor??"",experience:f.value.experience??0,geographicArea:f.value.geographicArea??((y=P.value[0])==null?void 0:y.label)??"",certification:f.value.certification??"",minimumReservationPeriod:f.value.minimumReservationPeriod??0,deposit:f.value.deposit??!1,depositAmount:f.value.depositAmount??0,billingPeriod:f.value.billingPeriod??"beforeEvent",links:(e=f.value.links)!=null&&e.length?f.value.links:[{type:"",value:""}],faq:f.value.faq??{}}}),z.value=f.value.faqArray??[])}),(y,e)=>{const x=p("v-divider"),I=p("v-text-field"),X=p("v-select"),$=p("v-number-input"),c=p("v-checkbox"),J=p("v-label"),_=p("v-switch"),g=p("v-btn"),ae=p("v-form"),Ve=xe;return n(),v(T,null,[s(Oe,{modelValue:B.value,"onUpdate:modelValue":e[16]||(e[16]=l=>B.value=l),fullscreen:"",transition:"dialog-bottom-transition"},{content:r(()=>[s(ae,{class:"px-4"},{default:r(()=>[we(u("div",null,[s(x,{class:"mt-6"},{default:r(()=>e[18]||(e[18]=[u("p",{class:"mt-6"},null,-1),b(" A propos de votre entreprise",-1)])),_:1,__:[18]}),s(I,{class:"mt-6",label:"Le nom de votre entreprise ?",modelValue:t(a).name,"onUpdate:modelValue":e[0]||(e[0]=l=>t(a).name=l),"error-messages":h.value?t(V).name:void 0},null,8,["modelValue","error-messages"]),s(I,{label:"Votre Numéro De Siret ?",modelValue:t(a).siret,"onUpdate:modelValue":e[1]||(e[1]=l=>t(a).siret=l),"error-messages":h.value?t(V).siret:void 0},null,8,["modelValue","error-messages"]),s(I,{label:"L'adresse complète du siège social ?",modelValue:t(a).address,"onUpdate:modelValue":e[2]||(e[2]=l=>t(a).address=l),"error-messages":h.value?t(V).address:void 0},null,8,["modelValue","error-messages"]),s(I,{label:"Une courte description de votre activité ?",modelValue:t(a).bio,"onUpdate:modelValue":e[3]||(e[3]=l=>t(a).bio=l),"error-messages":h.value?t(V).bio:void 0},null,8,["modelValue","error-messages"]),s(X,{label:"Votre activité principale ?",modelValue:t(a).mainActivity,"onUpdate:modelValue":[e[4]||(e[4]=l=>t(a).mainActivity=l),m],items:oe.value,"item-title":"label","item-value":"value","error-messages":h.value?t(V).mainActivity:void 0},null,8,["modelValue","items","error-messages"]),s(I,{label:"Le nom complet de l'interlocuteur principal ?",modelValue:t(a).mainInterlocutor,"onUpdate:modelValue":e[5]||(e[5]=l=>t(a).mainInterlocutor=l),"error-messages":h.value?t(V).mainInterlocutor:void 0},null,8,["modelValue","error-messages"]),s($,{label:"Depuis combien d'année exercez-vous cette activité ?",modelValue:t(a).experience,"onUpdate:modelValue":e[6]||(e[6]=l=>t(a).experience=l),variant:"solo",min:0,"error-messages":h.value?t(V).experience:void 0},null,8,["modelValue","error-messages"]),s(x,{class:"border-opacity-50 mb-6"},{default:r(()=>e[19]||(e[19]=[u("p",{class:"mb-6"},"A propos de votre activité",-1)])),_:1,__:[19]}),s(X,{label:"Votre secteur géographique ?",modelValue:t(a).geographicArea,"onUpdate:modelValue":e[7]||(e[7]=l=>t(a).geographicArea=l),items:P.value,"item-title":"label","item-value":"value","error-messages":h.value?t(V).geographicArea:void 0},null,8,["modelValue","items","error-messages"]),s(I,{modelValue:t(a).certification,"onUpdate:modelValue":e[8]||(e[8]=l=>t(a).certification=l),label:"Labels & Certifications",variant:"outlined",placeholder:"exemple: Label AB (Bio)"},null,8,["modelValue"]),s($,{variant:"solo",min:0,label:"Votre délai de réservation minimum (en semaine) ?",modelValue:d.value,"onUpdate:modelValue":e[9]||(e[9]=l=>d.value=l),"error-messages":h.value?t(V).minimumReservationPeriod:void 0},null,8,["modelValue","error-messages"]),s(c,{label:"Doit-on vous faire un accompte avant prestation",modelValue:t(a).deposit,"onUpdate:modelValue":e[10]||(e[10]=l=>t(a).deposit=l),"error-messages":h.value?t(V).deposit:void 0},null,8,["modelValue","error-messages"]),t(a).deposit?(n(),A($,{key:0,variant:"solo",min:0,max:100,step:5,label:"Quel est le montant de dépôt (en pourcentage)?",modelValue:t(a).depositAmount,"onUpdate:modelValue":e[11]||(e[11]=l=>t(a).depositAmount=l),"error-messages":h.value?t(V).depositAmount:void 0},null,8,["modelValue","error-messages"])):R("",!0),u("div",Le,[s(J,{class:"text-subtitle-1 font-weight-medium"},{default:r(()=>e[20]||(e[20]=[b("Vous souhaitez être payer avant l'évènement ?",-1)])),_:1,__:[20]}),u("div",Me,[s(J,{class:"text-subtitle-1 font-weight-medium"},{default:r(()=>e[21]||(e[21]=[b("Avant la prestation",-1)])),_:1,__:[21]}),s(_,{modelValue:t(a).billingPeriod,"onUpdate:modelValue":e[12]||(e[12]=l=>t(a).billingPeriod=l),"false-value":"beforeEvent","true-value":"afterEvent",color:t(a).billingPeriod==="beforeEvent"?"success":"primary","hide-details":"","error-messages":h.value?t(V).billingPeriod:void 0},{default:r(()=>[b(j(t(a).billingPeriod),1)]),_:1},8,["modelValue","color","error-messages"]),s(J,{class:"text-subtitle-1 font-weight-medium"},{default:r(()=>e[22]||(e[22]=[b("Après la prestation",-1)])),_:1,__:[22]})])]),s(x,{class:"mb-6"},{default:r(()=>e[23]||(e[23]=[u("p",{class:"mb-6"},"A propos de votre communication",-1)])),_:1,__:[23]}),u("div",je,[(n(!0),v(T,null,K(t(a).links,(l,te)=>(n(),v("div",{key:te},[s(X,{modelValue:l.type,"onUpdate:modelValue":N=>l.type=N,label:"Renseignez le réseau social ou le site web",items:["Facebook","Instagram","LinkedIn","Twitter","Site Web"],"item-title":"label","item-value":"value"},null,8,["modelValue","onUpdate:modelValue"]),s(I,{modelValue:l.value,"onUpdate:modelValue":N=>l.value=N,label:"Renseignez le lien vers le réseau social ou le site web",type:"url",variant:"outlined",placeholder:"https://www.example.com/mon-reseau-social"},null,8,["modelValue","onUpdate:modelValue"]),s(g,{onClick:N=>i(te),disabled:t(a).links.length<=0,color:"error","prepend-icon":"mdi-delete",size:"small",class:"mb-4"},{default:r(()=>e[24]||(e[24]=[b(" Supprimer ",-1)])),_:2,__:[24]},1032,["onClick","disabled"])]))),128)),s(g,{onClick:se,color:"primary"},{default:r(()=>e[25]||(e[25]=[b(" Ajouter un lien vers un réseau social ou un site web ",-1)])),_:1,__:[25]})]),u("div",He,[(n(!0),v(T,null,K(z.value,(l,te)=>(n(),v("div",{key:te},[s(I,{modelValue:l.question,"onUpdate:modelValue":N=>l.question=N,label:"Renseignez une question fréquente auquelle vous répondez souvent","item-title":"label","item-value":"value"},null,8,["modelValue","onUpdate:modelValue"]),s(I,{modelValue:l.reponse,"onUpdate:modelValue":N=>l.reponse=N,label:"Renseignez la réponse à la question",type:"text",variant:"outlined",placeholder:"https://www.example.com/mon-reseau-social"},null,8,["modelValue","onUpdate:modelValue"]),s(g,{onClick:N=>q(te),disabled:z.value.length===0,color:"error","prepend-icon":"mdi-delete",size:"small",class:"my-2"},{default:r(()=>e[26]||(e[26]=[b(" Supprimer ",-1)])),_:2,__:[26]},1032,["onClick","disabled"])]))),128)),s(g,{onClick:o,color:"primary"},{default:r(()=>e[27]||(e[27]=[b(" Ajouter une question fréquente et sa réponse ",-1)])),_:1,__:[27]})])],512),[[Ae,w.value===1]]),w.value===1?(n(),v("div",Ne,[s(g,{onClick:e[13]||(e[13]=l=>B.value=!1)},{default:r(()=>e[28]||(e[28]=[b("Annuler",-1)])),_:1,__:[28]}),t(D)?R("",!0):(n(),A(g,{key:0,color:"primary",onClick:e[14]||(e[14]=l=>E(t(a)))},{default:r(()=>e[29]||(e[29]=[b(" Valider mon profil ",-1)])),_:1,__:[29]})),t(D)?(n(),v("div",Ke,[s(g,{color:"primary",onClick:e[15]||(e[15]=l=>k(t(a)))},{default:r(()=>e[30]||(e[30]=[b(" Modifier mon profil ",-1)])),_:1,__:[30]})])):R("",!0)])):R("",!0)]),_:1})]),_:1},8,["modelValue"]),(n(),A(me,{to:"body"},[s(ke,{redirection:"dashboard2",modelValue:C.value,"onUpdate:modelValue":e[17]||(e[17]=l=>C.value=l)},null,8,["modelValue"]),s(Ve),s(Be)]))],64)}}}),be=JSON.parse(`[{"sector":"food","general":{"questions":[{"id":"food-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quel type de cuisine proposez-vous ?  ","category":"cuisines","type":"checkbox","required":true},{"id":"food-keywords-1","question":"Quel(s) format(s) de prestations assurez-vous ? ","category":"format","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Propositions sucrées : ","category":"sucré","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Propositions salées : ","category":"salé","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Vos options : ","category":"régimes","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"lieux","general":{"questions":[{"id":"lieux-general-1","question":"vous proposez ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Dans quel environement ? ","category":"environnement","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Mon lieu est accessible : ","category":"accessibilité","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quelles prestations sont imposées à vos clients ? ","category":"prestations imposées","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Vous proposez une privatisation : ","category":"privatisation","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Quel(s) espaces peuvent-ils y trouver ? ","category":"espaces","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Quels équipements sont à leur disposition ? ","category":"équipements","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{}},{"sector":"service","general":{"questions":[{"id":"service-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"service-keywords-1","question":"Quelle(s) préstation(s) proposez-vous ? ","category":"serveur","type":"checkbox","required":true},{"id":"service-keywords-1","question":"Quel(s) matériel(s) fournissez-vous sur une prestation ? ","category":"matériel serveur","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"musique","general":{"questions":[{"id":"musique-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"musique-keywords-1","question":"Quelle service proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"musique-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"musique-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"service","general":{"questions":[{"id":"service-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}}]`),Ge={class:"questionnaires-container"},Je={key:0,class:"mb-6"},We={key:1},Ze={class:"text-h6 px-4"},Xe={class:"service-chips mt-4"},eo={key:0,class:"mt-6"},oo={class:"text-h6 px-4"},so={class:"mt-4"},to={class:"keyword-chips"},io={key:1,class:"mt-6"},ro={class:"text-h6 px-4"},lo={class:"mt-4"},ao={class:"keyword-chips"},no={key:2,class:"text-center py-8"},uo={key:3,class:"text-center py-4"},co={class:"mt-6 text-center d-flex justify-space-between"},po=pe({__name:"ServicesPrestataire",props:{pageActuelle:{type:Boolean,default:!1},pageActuelleModifiers:{}},emits:["update:pageActuelle"],setup(ie){const W=ge(ie,"pageActuelle"),f=re(),{professionnalServices:F,keywords:L,professionalUser:S}=le(f),{getSectors:B,sendProfessionalServices:z}=ve(),{addSuccess:h,addError:O}=he(),{patchProfessionnalProfileDetails:ee}=ye(),w=U([]),oe=U(_e),P=U([]),D=U(!1),d=()=>Math.random().toString(36).substr(2,9),C=(i,o)=>{var E,k,M;if(!i||!((E=L.value)!=null&&E.length))return{};const q={},m=[];return i.servicesSection&&m.push(...((k=i.servicesSection.questions)==null?void 0:k.map(y=>y.category))||[]),i.habitudesSection&&m.push(...((M=i.habitudesSection.questions)==null?void 0:M.map(y=>y.category))||[]),m.forEach(y=>{const e=L.value.filter(x=>x.category===y&&(x.sector.toLowerCase()===o.toLowerCase()||!x.sector));q[y]=e.filter((x,I,X)=>X.findIndex($=>$.uuid===x.uuid)===I)}),q},H=i=>{const o=be.find(q=>q.sector.toLowerCase()===i.toLowerCase());return{id:d(),sector:i,questionnaireData:o,services:[...F.value||[]],keywordsByCategory:C(o,i),selectedServiceUuid:null,selectedKeywords:new Set}},Y=(i,o)=>{o.selectedServiceUuid===i.uuid?o.selectedServiceUuid=null:o.selectedServiceUuid=i.uuid,Z()},G=(i,o)=>{o.selectedKeywords.has(i.uuid)?o.selectedKeywords.delete(i.uuid):o.selectedKeywords.add(i.uuid),Z()},a=async(i,o)=>{if(!o)return;i.questionnaireData=null,i.services=[],i.keywordsByCategory={},i.selectedServiceUuid=null,i.selectedKeywords.clear(),await B(o);const q=ne([F,L],([m,E])=>{if(m!=null&&m.length&&(E!=null&&E.length)){const k=be.find(M=>M.sector.toLowerCase()===o.toLowerCase());i.sector=o,i.questionnaireData=k,i.services=[...m],i.keywordsByCategory=C(k,o),q()}},{immediate:!0})},V=()=>{const i={id:d(),sector:"",questionnaireData:null,services:[],keywordsByCategory:{},selectedServiceUuid:null,selectedKeywords:new Set};w.value.push(i)},Z=()=>{P.value=[],w.value.forEach(i=>{var o;i.selectedServiceUuid&&((o=S.value)!=null&&o.uuid)&&P.value.push({serviceUuid:i.selectedServiceUuid,professionalUuid:S.value.uuid,keywordsUuid:Array.from(i.selectedKeywords)})})},se=async()=>{var o,q;if(Z(),console.log("payloadArray après updatePayloadArray:",P.value),!w.value.some(m=>m.selectedServiceUuid)){O({message:"Veuillez sélectionner au moins un service"});return}if(P.value.length===0){O({message:"Erreur: UUID professionnel manquant"});return}try{const m=w.value.filter(k=>k.sector&&k.selectedServiceUuid).map(k=>k.sector);await ee({...S.value,faq:typeof((o=S.value)==null?void 0:o.faq)=="string"?JSON.parse(S.value.faq||"{}"):((q=S.value)==null?void 0:q.faq)||{},secondActivity:m[0]||"",thirdActivity:m[1]||""});const E=P.value.map(k=>z(k));await Promise.all(E),h(`${P.value.length} service(s) créé(s) avec succès !`),W.value=!1,D.value=!0}catch(m){console.error("Erreur lors de l'envoi:",m),O({message:"Erreur lors de l'envoi des services"})}};return ne(()=>S.value,async i=>{if(i!=null&&i.mainActivity&&(i!=null&&i.uuid)&&w.value.length===0)try{await B(i.mainActivity);const o=H(i.mainActivity);w.value.push(o)}catch(o){console.error("Erreur lors du chargement initial:",o),O({message:"Erreur lors du chargement des données"})}},{immediate:!0,deep:!0}),ne([F,L],([i,o])=>{var q;if(i!=null&&i.length&&(o!=null&&o.length)&&w.value.length>0){const m=w.value[0];m&&((q=S.value)!=null&&q.mainActivity)&&(m.services=[...i],m.keywordsByCategory=C(m.questionnaireData,S.value.mainActivity))}}),(i,o)=>{const q=p("v-select"),m=p("v-divider"),E=p("v-chip"),k=p("v-expansion-panel-text"),M=p("v-expansion-panel"),y=p("v-expansion-panels"),e=p("v-progress-circular"),x=p("v-btn"),I=p("v-card"),X=p("v-dialog");return n(),v(T,null,[s(X,{modelValue:W.value,"onUpdate:modelValue":o[1]||(o[1]=$=>W.value=$),fullscreen:"",transition:"dialog-bottom-transition"},{default:r(()=>{var $;return[($=t(S))!=null&&$.uuid?(n(),A(I,{key:0,width:"800"},{default:r(()=>[u("div",Ge,[(n(!0),v(T,null,K(w.value,(c,J)=>(n(),v("div",{key:c.id,class:"questionnaire-section mb-8"},[J>0?(n(),v("div",Je,[s(q,{label:`Votre ${J+1}ème activité ?`,modelValue:c.sector,"onUpdate:modelValue":[_=>c.sector=_,_=>a(c,_)],items:oe.value,"item-title":"label","item-value":"value",variant:"outlined"},null,8,["label","modelValue","onUpdate:modelValue","items"])])):R("",!0),c.questionnaireData&&c.services.length>0?(n(),v("div",We,[s(m,{class:"mt-6"},{default:r(()=>[u("span",Ze,j(c.questionnaireData.general.questions[0].question),1)]),_:2},1024),u("div",Xe,[(n(!0),v(T,null,K(c.services,_=>(n(),A(E,{key:_.uuid,variant:"outlined",color:c.selectedServiceUuid===_.uuid?"primary":"default",class:ue(["ma-1",{"selected-chip":c.selectedServiceUuid===_.uuid}]),onClick:g=>Y(_,c)},{default:r(()=>[b(j(_.name),1)]),_:2},1032,["color","onClick","class"]))),128))]),c.questionnaireData.servicesSection?(n(),v("div",eo,[s(m,null,{default:r(()=>[u("span",oo,j(c.questionnaireData.servicesSection.title||"Services détaillés"),1)]),_:2},1024),u("div",so,[s(y,{variant:"accordion",multiple:""},{default:r(()=>[(n(!0),v(T,null,K(c.questionnaireData.servicesSection.questions,_=>(n(),A(M,{key:_.category,title:_.question},{default:r(()=>[s(k,null,{default:r(()=>[u("div",to,[(n(!0),v(T,null,K(c.keywordsByCategory[_.category]||[],g=>(n(),A(E,{key:g.uuid,variant:"outlined",class:ue(["ma-1",{"selected-chip":c.selectedKeywords.has(g.uuid)}]),color:c.selectedKeywords.has(g.uuid)?"success":"default",onClick:ae=>G(g,c)},{default:r(()=>[b(j(g.value),1)]),_:2},1032,["color","onClick","class"]))),128))])]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:2},1024)])])):R("",!0),c.questionnaireData.habitudesSection?(n(),v("div",io,[s(m,null,{default:r(()=>[u("span",ro,j(c.questionnaireData.habitudesSection.title||"Habitudes et pratiques"),1)]),_:2},1024),u("div",lo,[s(y,{variant:"accordion",multiple:""},{default:r(()=>[(n(!0),v(T,null,K(c.questionnaireData.habitudesSection.questions,_=>(n(),A(M,{key:_.category,title:_.question},{default:r(()=>[s(k,null,{default:r(()=>[u("div",ao,[(n(!0),v(T,null,K(c.keywordsByCategory[_.category]||[],g=>(n(),A(E,{key:g.uuid,variant:"outlined",class:ue(["ma-1",{"selected-chip":c.selectedKeywords.has(g.uuid)}]),color:c.selectedKeywords.has(g.uuid)?"success":"default",onClick:ae=>G(g,c)},{default:r(()=>[b(j(g.value),1)]),_:2},1032,["color","onClick","class"]))),128))])]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:2},1024)])])):R("",!0)])):J===0?(n(),v("div",no,[s(e,{indeterminate:"",color:"primary",class:"mb-4"}),o[3]||(o[3]=u("p",null,"Chargement des services et mots-clés...",-1))])):J>0&&!c.sector?(n(),v("div",uo,o[4]||(o[4]=[u("p",{class:"text-grey"}," Sélectionnez un secteur d'activité pour afficher les services disponibles ",-1)]))):R("",!0)]))),128)),u("div",co,[w.value.length<3?(n(),A(x,{key:0,onClick:V,color:"primary",variant:"outlined","prepend-icon":"mdi-plus"},{default:r(()=>o[5]||(o[5]=[b(" Ajouter une nouvelle activité ",-1)])),_:1,__:[5]})):R("",!0)]),u("div",null,[s(x,{color:"primary",onClick:o[0]||(o[0]=c=>se())},{default:r(()=>o[6]||(o[6]=[b("Valider ma selection",-1)])),_:1,__:[6]})])])]),_:1})):R("",!0)]}),_:1},8,["modelValue"]),(n(),A(me,{to:"body"},[s(ke,{redirection:"dashboard2",modelValue:D.value,"onUpdate:modelValue":o[2]||(o[2]=$=>D.value=$)},null,8,["modelValue"])]))],64)}}}),mo=qe(po,[["__scopeId","data-v-bf1006da"]]),vo={class:"position-relative"},yo=["src"],fo={class:"mx-sm-5"},bo={class:"d-sm-flex align-center justify-sm-start justify-center"},go={class:"text-sm-left text-center"},qo=["src"],_o={class:"ml-sm-4 text-sm-left text-center"},ko={class:"text-h3 font-weight-semibold mb-1 my-sm-0 my-2"},ho={class:"text-h6 font-weight-medium text-grey100"},Vo={class:"d-flex flex-column justify-center align-center gap-4"},xo={key:1},So={key:0},wo={class:"d-sm-flex d-none"},Ao=pe({__name:"ProfileBannerOne",setup(ie){const{bgPicture:W}=le(re()),f=U(null),F=U(!1),L=U(!1),S=U(null),{user:B,isProfileCreated:z}=le(re());ve();const{changeProfessionalBannerPicture:h}=ye(),O=localStorage.getItem("is-profile-verified"),ee=()=>{var D;return(D=S.value)==null?void 0:D.click()},w=async D=>{var H;const d=D.target;if(!((H=d.files)!=null&&H.length))return;const C=d.files[0];await h(C)},oe=Ue([{tab:"My Profile",icon:Ce,href:"/apps/userprofile/one"},{tab:"Teams",icon:Ie,href:"/apps/userprofile/one/teams"},{tab:"Projects",icon:Qe,href:"/apps/userprofile/one/projects"},{tab:"Connection",icon:Re,href:"/apps/userprofile/one/connection"}]),P=()=>{F.value=!F.value};return(D,d)=>{const C=p("v-avatar"),H=p("v-chip"),Y=p("v-col"),G=p("v-btn"),a=p("v-row"),V=p("v-tab"),Z=p("v-tabs"),se=p("v-card-item"),i=p("v-card");return n(),v(T,null,[u("div",vo,[u("img",{src:t(W),alt:"profile",class:"w-100"},null,8,yo),u("button",{onClick:ee,class:"profile-banner__change-image"},"+"),u("input",{type:"file",ref_key:"fileInput",ref:S,onChange:w,accept:"image/*",style:{display:"none"}},null,544)]),u("div",fo,[s(i,{elevation:"10",class:"overflow-hidden mt-sm-n13 mt-n5"},{default:r(()=>[s(se,{class:"pb-0"},{default:r(()=>[s(a,{class:"mt-1 justify-space-between"},{default:r(()=>[s(Y,{cols:"12",md:"6",sm:"9",class:"pt-0"},{default:r(()=>{var o,q;return[u("div",bo,[u("div",go,[s(C,{size:"100",class:"userImage position-relative overflow-visible"},{default:r(()=>[u("img",{src:t(Ee),width:"100",alt:"Mathew",class:"rounded-circle"},null,8,qo),s(C,{size:"26",class:"bg-primary position-absolute plus"},{default:r(()=>[s(t(ze),{size:"16","stroke-width":"2"})]),_:1})]),_:1})]),u("div",_o,[u("h5",ko,[b(j(((o=t(B))==null?void 0:o.username)??"Définir votre nom complet")+" ",1),s(H,{color:"primary",class:"bg-lightprimary font-weight-semibold ml-2 mt-n1",variant:"outlined",size:"x-small"},{default:r(()=>d[6]||(d[6]=[b("Admin",-1)])),_:1,__:[6]})]),u("span",ho,j(((q=t(B))==null?void 0:q.category)??"Aucune phrase inspirante définie"),1)])])]}),_:1}),s(Y,{cols:"12",md:"6",sm:"3",class:"d-flex align-center justify-center justify-sm-end order-sm-third"},{default:r(()=>[u("div",Vo,[u("div",null,[t(z)?R("",!0):(n(),A(G,{key:0,color:"primary",size:"large",class:"w-100",onClick:d[0]||(d[0]=o=>P())},{default:r(()=>d[7]||(d[7]=[b("Editez votre profil",-1)])),_:1,__:[7]})),t(z)&&t(O)?(n(),v("div",xo,[s(G,{color:"primary",size:"large",class:"w-100",onClick:d[1]||(d[1]=o=>P())},{default:r(()=>d[8]||(d[8]=[b("Modifier votre profil",-1)])),_:1,__:[8]}),s(G,{color:"success",size:"large",class:"w-100",onClick:d[2]||(d[2]=o=>L.value=!0)},{default:r(()=>d[9]||(d[9]=[b("Ajouter votre secteur d'activité",-1)])),_:1,__:[9]})])):R("",!0)]),t(z)&&!t(O)?(n(),v("p",So,d[10]||(d[10]=[u("span",{style:{fontSize:"14px"}}," Nous reviendrons dans les 48heures...",-1)]))):R("",!0)])]),_:1})]),_:1}),s(a,null,{default:r(()=>[s(Y,{md:"12",class:"profile-one"},{default:r(()=>[s(Z,{modelValue:f.value,"onUpdate:modelValue":d[3]||(d[3]=o=>f.value=o),color:"primary",dark:"",class:"profiletab"},{default:r(()=>[(n(!0),v(T,null,K(oe.value,o=>(n(),A(V,{key:o.tab,to:o.href,class:"text-grey100 mr-sm-3"},{default:r(()=>[(n(),A(Pe(o.icon),{size:"20","stroke-width":"1.5",class:"mr-sm-2 text-h6 text-grey100 icon"})),u("span",wo,j(o.tab),1)]),_:2},1032,["to"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),(n(),A(me,{to:"body"},[s(Ye,{openModal:F.value,"onUpdate:openModal":d[4]||(d[4]=o=>F.value=o)},null,8,["openModal"]),s(mo,{class:"mt-6",pageActuelle:L.value,"onUpdate:pageActuelle":d[5]||(d[5]=o=>L.value=o)},null,8,["pageActuelle"])]))],64)}}}),$o=qe(Ao,[["__scopeId","data-v-1ea17247"]]);export{$o as P};
