import{d as We,aM as re,x as He,a0 as Ke,k as ee,aN as Ie,m as f,D as B,o as Ye,p as Oe,M as Q,aO as vt,aP as ve,aQ as mt,aq as yt,Z as Qe,aR as ht,a1 as Xe}from"./tuwxSyZN.js";/**
  * vee-validate v4.6.7
  * (c) 2022 Abdelrahman Awad
  * @license MIT
  */function ce(e){return typeof e=="function"}function Ze(e){return e==null}const ue=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Je(e){return Number(e)>=0}function gt(e){const t=parseFloat(e);return isNaN(t)?e:t}const Ot={};function Vt(e){return Ot[e]}const ye=Symbol("vee-validate-form"),bt=Symbol("vee-validate-field-instance"),Ve=Symbol("Default empty value");function we(e){return ce(e)&&!!e.__locatorRef}function me(e){return!!e&&ce(e.validate)}function de(e){return e==="checkbox"||e==="radio"}function At(e){return ue(e)||Array.isArray(e)}function xe(e){return Array.isArray(e)?e.length===0:ue(e)&&Object.keys(e).length===0}function be(e){return/^\[.+\]$/i.test(e)}function St(e){return et(e)&&e.multiple}function et(e){return e.tagName==="SELECT"}function Et(e,t){const n=![!1,null,void 0,0].includes(t.multiple)&&!Number.isNaN(t.multiple);return e==="select"&&"multiple"in t&&n}function Ft(e,t){return!Et(e,t)&&t.type!=="file"&&!de(t.type)}function tt(e){return Be(e)&&e.target&&"submit"in e.target}function Be(e){return e?!!(typeof Event<"u"&&ce(Event)&&e instanceof Event||e&&e.srcElement):!1}function Te(e,t){return t in e&&e[t]!==Ve}var Ue=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),i=a.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;r--!==0;){var o=a[r];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};function ke(e){return be(e)?e.replace(/\[|\]/gi,""):e}function G(e,t,n){return e?be(t)?e[ke(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((r,a)=>At(r)&&a in r?r[a]:n,e):n}function le(e,t,n){if(be(t)){e[ke(t)]=n;return}const i=t.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let a=0;a<i.length;a++){if(a===i.length-1){r[i[a]]=n;return}(!(i[a]in r)||Ze(r[i[a]]))&&(r[i[a]]=Je(i[a+1])?[]:{}),r=r[i[a]]}}function Fe(e,t){if(Array.isArray(e)&&Je(t)){e.splice(Number(t),1);return}ue(e)&&delete e[t]}function je(e,t){if(be(t)){delete e[ke(t)];return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let i=e;for(let a=0;a<n.length;a++){if(a===n.length-1){Fe(i,n[a]);break}if(!(n[a]in i)||Ze(i[n[a]]))break;i=i[n[a]]}const r=n.map((a,o)=>G(e,n.slice(0,o).join(".")));for(let a=r.length-1;a>=0;a--)if(xe(r[a])){if(a===0){Fe(e,n[0]);continue}Fe(r[a-1],n[a-1])}}function I(e){return Object.keys(e)}function Ae(e,t=void 0){const n=Qe();return(n==null?void 0:n.provides[e])||ht(e,t)}function Me(e,t,n){if(Array.isArray(e)){const i=[...e],r=i.findIndex(a=>Ue(a,t));return r>=0?i.splice(r,1):i.push(t),i}return Ue(e,t)?n:t}function De(e,t=0){let n=null,i=[];return function(...r){return n&&window.clearTimeout(n),n=window.setTimeout(()=>{const a=e(...r);i.forEach(o=>o(a)),i=[]},t),new Promise(a=>i.push(a))}}function jt(e,t){return ue(t)&&t.number?gt(e):e}function _e(e,t){let n;return async function(...r){const a=e(...r);n=a;const o=await a;return a!==n||(n=void 0,t(o,r)),o}}const nt=(e,t,n)=>t.slots.default?typeof e=="string"||!e?t.slots.default(n()):{default:()=>{var i,r;return(r=(i=t.slots).default)===null||r===void 0?void 0:r.call(i,n())}}:t.slots.default;function pe(e){if(rt(e))return e._value}function rt(e){return"_value"in e}function Ce(e){if(!Be(e))return e;const t=e.target;if(de(t.type)&&rt(t))return pe(t);if(t.type==="file"&&t.files){const n=Array.from(t.files);return t.multiple?n:n[0]}if(St(t))return Array.from(t.options).filter(n=>n.selected&&!n.disabled).map(pe);if(et(t)){const n=Array.from(t.options).find(i=>i.selected);return n?pe(n):t.value}return t.value}function it(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ue(e)&&e._$$isNormalized?e:ue(e)?Object.keys(e).reduce((n,i)=>{const r=pt(e[i]);return e[i]!==!1&&(n[i]=ze(r)),n},t):typeof e!="string"?t:e.split("|").reduce((n,i)=>{const r=wt(i);return r.name&&(n[r.name]=ze(r.params)),n},t):t}function pt(e){return e===!0?[]:Array.isArray(e)||ue(e)?e:[e]}function ze(e){const t=n=>typeof n=="string"&&n[0]==="@"?Mt(n.slice(1)):n;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,i)=>(n[i]=t(e[i]),n),{})}const wt=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};function Mt(e){const t=n=>G(n,e)||n[e];return t.__locatorRef=e,t}function _t(e){return Array.isArray(e)?e.filter(we):I(e).filter(t=>we(e[t])).map(t=>e[t])}const It={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Bt=Object.assign({},It);const Re=()=>Bt;async function at(e,t,n={}){const i=n==null?void 0:n.bails,r={name:(n==null?void 0:n.name)||"{field}",rules:t,bails:i??!0,formData:(n==null?void 0:n.values)||{}},o=(await kt(r,e)).errors;return{errors:o,valid:!o.length}}async function kt(e,t){if(me(e.rules))return Ct(t,e.rules,{bails:e.bails});if(ce(e.rules)||Array.isArray(e.rules)){const o={field:e.name,form:e.formData,value:t},v=Array.isArray(e.rules)?e.rules:[e.rules],s=v.length,m=[];for(let V=0;V<s;V++){const g=v[V],O=await g(t,o);if(typeof O!="string"&&O)continue;const M=typeof O=="string"?O:lt(o);if(m.push(M),e.bails)return{errors:m}}return{errors:m}}const n=Object.assign(Object.assign({},e),{rules:it(e.rules)}),i=[],r=Object.keys(n.rules),a=r.length;for(let o=0;o<a;o++){const v=r[o],s=await Rt(n,t,{name:v,params:n.rules[v]});if(s.error&&(i.push(s.error),e.bails))return{errors:i}}return{errors:i}}async function Ct(e,t,n){var i;return{errors:await t.validate(e,{abortEarly:(i=n.bails)!==null&&i!==void 0?i:!0}).then(()=>[]).catch(a=>{if(a.name==="ValidationError")return a.errors;throw a})}}async function Rt(e,t,n){const i=Vt(n.name);if(!i)throw new Error(`No such validator '${n.name}' exists.`);const r=Nt(n.params,e.formData),a={field:e.name,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:r})},o=await i(t,r,a);return typeof o=="string"?{error:o}:{error:o?void 0:lt(a)}}function lt(e){const t=Re().generateMessage;return t?t(e):"Field is invalid"}function Nt(e,t){const n=i=>we(i)?i(t):i;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((i,r)=>(i[r]=n(e[r]),i),{})}async function Pt(e,t){const n=await e.validate(t,{abortEarly:!1}).then(()=>[]).catch(a=>{if(a.name!=="ValidationError")throw a;return a.inner||[]}),i={},r={};for(const a of n){const o=a.errors;i[a.path]={valid:!o.length,errors:o},o.length&&(r[a.path]=o[0])}return{valid:!n.length,results:i,errors:r}}async function Tt(e,t,n){const r=I(e).map(async m=>{var V,g,O;const j=await at(G(t,m),e[m],{name:((V=n==null?void 0:n.names)===null||V===void 0?void 0:V[m])||m,values:t,bails:(O=(g=n==null?void 0:n.bailsMap)===null||g===void 0?void 0:g[m])!==null&&O!==void 0?O:!0});return Object.assign(Object.assign({},j),{path:m})});let a=!0;const o=await Promise.all(r),v={},s={};for(const m of o)v[m.path]={valid:m.valid,errors:m.errors},m.valid||(a=!1,s[m.path]=m.errors[0]);return{valid:a,results:v,errors:s}}function Le(e,t,n){typeof n.value=="object"&&(n.value=F(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function F(e){if(typeof e!="object")return e;var t=0,n,i,r,a=Object.prototype.toString.call(e);if(a==="[object Object]"?r=Object.create(e.__proto__||null):a==="[object Array]"?r=Array(e.length):a==="[object Set]"?(r=new Set,e.forEach(function(o){r.add(F(o))})):a==="[object Map]"?(r=new Map,e.forEach(function(o,v){r.set(F(v),F(o))})):a==="[object Date]"?r=new Date(+e):a==="[object RegExp]"?r=new RegExp(e.source,e.flags):a==="[object DataView]"?r=new e.constructor(F(e.buffer)):a==="[object ArrayBuffer]"?r=e.slice(0):a.slice(-6)==="Array]"&&(r=new e.constructor(e)),r){for(i=Object.getOwnPropertySymbols(e);t<i.length;t++)Le(r,i[t],Object.getOwnPropertyDescriptor(e,i[t]));for(t=0,i=Object.getOwnPropertyNames(e);t<i.length;t++)Object.hasOwnProperty.call(r,n=i[t])&&r[n]===e[n]||Le(r,n,Object.getOwnPropertyDescriptor(e,n))}return r||e}var X=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;for(r of t.entries())if(!e(r[1],n.get(r[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(t[r]!==n[r])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),i=a.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;r--!==0;){var o=a[r];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};let $e=0;function Ut(e,t){const{value:n,initialValue:i,setInitialValue:r}=ut(e,t.modelValue,!t.standalone),{errorMessage:a,errors:o,setErrors:v}=zt(e,!t.standalone),s=Dt(n,i,o),m=$e>=Number.MAX_SAFE_INTEGER?0:++$e;function V(g){var O;"value"in g&&(n.value=g.value),"errors"in g&&v(g.errors),"touched"in g&&(s.touched=(O=g.touched)!==null&&O!==void 0?O:s.touched),"initialValue"in g&&r(g.initialValue)}return{id:m,path:e,value:n,initialValue:i,meta:s,errors:o,errorMessage:a,setState:V}}function ut(e,t,n=!0){const i=n===!0?Ae(ye,void 0):void 0,r=ee(f(t));function a(){return i?G(i.meta.value.initialValues,f(e),f(r)):f(r)}function o(V){if(!i){r.value=V;return}i.stageInitialValue(f(e),V,!0)}const v=B(a);if(!i)return{value:ee(a()),initialValue:v,setInitialValue:o};const s=t?f(t):G(i.values,f(e),f(v));return i.stageInitialValue(f(e),s,!0),{value:B({get(){return G(i.values,f(e))},set(V){i.setFieldValue(f(e),V)}}),initialValue:v,setInitialValue:o}}function Dt(e,t,n){const i=Ie({touched:!1,pending:!1,valid:!0,validated:!!f(n).length,initialValue:B(()=>f(t)),dirty:B(()=>!X(f(e),f(t)))});return Q(n,r=>{i.valid=!r.length},{immediate:!0,flush:"sync"}),i}function zt(e,t){const n=t?Ae(ye,void 0):void 0;function i(a){return a?Array.isArray(a)?a:[a]:[]}if(!n){const a=ee([]);return{errors:a,errorMessage:B(()=>a.value[0]),setErrors:o=>{a.value=i(o)}}}const r=B(()=>n.errorBag.value[f(e)]||[]);return{errors:r,errorMessage:B(()=>r.value[0]),setErrors:a=>{n.setFieldErrorBag(f(e),i(a))}}}function Lt(e,t,n){return de(n==null?void 0:n.type)?qt(e,t,n):ot(e,t,n)}function ot(e,t,n){const{initialValue:i,validateOnMount:r,bails:a,type:o,checkedValue:v,label:s,validateOnValueUpdate:m,uncheckedValue:V,standalone:g,keepValueOnUnmount:O,modelPropName:j,syncVModel:M}=$t(f(e),n),S=g?void 0:Ae(ye);let W=!1;const{id:D,value:k,initialValue:z,meta:E,setState:L,errors:Z,errorMessage:q}=Ut(e,{modelValue:i,standalone:g});M&&Wt({value:k,prop:j,handleChange:ie});const C=()=>{E.touched=!0},R=B(()=>{let c=f(t);const A=f(S==null?void 0:S.schema);return A&&!me(A)&&(c=Gt(A,f(e))||c),me(c)||ce(c)||Array.isArray(c)?c:it(c)});async function _(c){var A,N;return S!=null&&S.validateSchema?(A=(await S.validateSchema(c)).results[f(e)])!==null&&A!==void 0?A:{valid:!0,errors:[]}:at(k.value,R.value,{name:f(s)||f(e),values:(N=S==null?void 0:S.values)!==null&&N!==void 0?N:{},bails:a})}const b=_e(async()=>(E.pending=!0,E.validated=!0,_("validated-only")),c=>(W&&(c.valid=!0,c.errors=[]),L({errors:c.errors}),E.pending=!1,c)),w=_e(async()=>_("silent"),c=>(W&&(c.valid=!0),E.valid=c.valid,c));function H(c){return(c==null?void 0:c.mode)==="silent"?w():b()}function ie(c,A=!0){const N=Ce(c);k.value=N,!m&&A&&b()}Ye(()=>{if(r)return b();(!S||!S.validateSchema)&&w()});function U(c){E.touched=c}let $;function T(){$=Q(k,(c,A)=>{if(X(c,A))return;(m?b:w)()},{deep:!0})}T();function te(c){var A;$==null||$();const N=c&&"value"in c?c.value:z.value;L({value:F(N),initialValue:F(N),touched:(A=c==null?void 0:c.touched)!==null&&A!==void 0?A:!1,errors:(c==null?void 0:c.errors)||[]}),E.pending=!1,E.validated=!1,w(),ve(()=>{T()})}function he(c){k.value=c}function ge(c){L({errors:Array.isArray(c)?c:[c]})}const K={id:D,name:e,label:s,value:k,meta:E,errors:Z,errorMessage:q,type:o,checkedValue:v,uncheckedValue:V,bails:a,keepValueOnUnmount:O,resetField:te,handleReset:()=>te(),validate:H,handleChange:ie,handleBlur:C,setState:L,setTouched:U,setErrors:ge,setValue:he};if(Xe(bt,K),Oe(t)&&typeof f(t)!="function"&&Q(t,(c,A)=>{X(c,A)||(E.validated?b():w())},{deep:!0}),!S)return K;S.register(K),yt(()=>{W=!0,S.unregister(K)});const ne=B(()=>{const c=R.value;return!c||ce(c)||me(c)||Array.isArray(c)?{}:Object.keys(c).reduce((A,N)=>{const Se=_t(c[N]).map(oe=>oe.__locatorRef).reduce((oe,J)=>{const ae=G(S.values,J)||S.values[J];return ae!==void 0&&(oe[J]=ae),oe},{});return Object.assign(A,Se),A},{})});return Q(ne,(c,A)=>{if(!Object.keys(c).length)return;!X(c,A)&&(E.validated?b():w())}),K}function $t(e,t){const n=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,rules:"",label:e,validateOnValueUpdate:!0,standalone:!1,keepValueOnUnmount:void 0,modelPropName:"modelValue",syncVModel:!0});if(!t)return n();const i="valueProp"in t?t.valueProp:t.checkedValue;return Object.assign(Object.assign(Object.assign({},n()),t||{}),{checkedValue:i})}function Gt(e,t){if(e)return e[t]}function qt(e,t,n){const i=n!=null&&n.standalone?void 0:Ae(ye),r=n==null?void 0:n.checkedValue,a=n==null?void 0:n.uncheckedValue;function o(v){const s=v.handleChange,m=B(()=>{const g=f(v.value),O=f(r);return Array.isArray(g)?g.findIndex(j=>X(j,O))>=0:X(O,g)});function V(g,O=!0){var j;if(m.value===((j=g==null?void 0:g.target)===null||j===void 0?void 0:j.checked))return;let M=Ce(g);i||(M=Me(f(v.value),f(r),f(a))),s(M,O)}return Object.assign(Object.assign({},v),{checked:m,checkedValue:r,uncheckedValue:a,handleChange:V})}return o(ot(e,t,n))}function Wt({prop:e,value:t,handleChange:n}){const i=Qe();if(!i)return;const r=e||"modelValue",a=`update:${r}`;r in i.props&&(Q(t,o=>{X(o,Ge(i,r))||i.emit(a,o)}),Q(()=>Ge(i,r),o=>{if(o===Ve&&t.value===void 0)return;const v=o===Ve?void 0:o;X(v,jt(t.value,i.props.modelModifiers))||n(v)}))}function Ge(e,t){return e.props[t]}const Ht=We({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>Re().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:Ve},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(e,t){const n=re(e,"rules"),i=re(e,"name"),r=re(e,"label"),a=re(e,"uncheckedValue"),o=re(e,"keepValue"),{errors:v,value:s,errorMessage:m,validate:V,handleChange:g,handleBlur:O,setTouched:j,resetField:M,handleReset:S,meta:W,checked:D,setErrors:k}=Lt(i,n,{validateOnMount:e.validateOnMount,bails:e.bails,standalone:e.standalone,type:t.attrs.type,initialValue:Yt(e,t),checkedValue:t.attrs.value,uncheckedValue:a,label:r,validateOnValueUpdate:!1,keepValueOnUnmount:o}),z=function(R,_=!0){g(R,_),t.emit("update:modelValue",s.value)},E=C=>{de(t.attrs.type)||(s.value=Ce(C))},L=function(R){E(R),t.emit("update:modelValue",s.value)},Z=B(()=>{const{validateOnInput:C,validateOnChange:R,validateOnBlur:_,validateOnModelUpdate:b}=Kt(e),w=[O,t.attrs.onBlur,_?V:void 0].filter(Boolean),H=[T=>z(T,C),t.attrs.onInput].filter(Boolean),ie=[T=>z(T,R),t.attrs.onChange].filter(Boolean),U={name:e.name,onBlur:w,onInput:H,onChange:ie};U["onUpdate:modelValue"]=T=>z(T,b),de(t.attrs.type)&&D&&(U.checked=D.value);const $=qe(e,t);return Ft($,t.attrs)&&(U.value=s.value),U});function q(){return{field:Z.value,value:s.value,meta:W,errors:v.value,errorMessage:m.value,validate:V,resetField:M,handleChange:z,handleInput:L,handleReset:S,handleBlur:O,setTouched:j,setErrors:k}}return t.expose({setErrors:k,setTouched:j,reset:M,validate:V,handleChange:g}),()=>{const C=He(qe(e,t)),R=nt(C,t,q);return C?Ke(C,Object.assign(Object.assign({},t.attrs),Z.value),R):R}}});function qe(e,t){let n=e.as||"";return!e.as&&!t.slots.default&&(n="input"),n}function Kt(e){var t,n,i,r;const{validateOnInput:a,validateOnChange:o,validateOnBlur:v,validateOnModelUpdate:s}=Re();return{validateOnInput:(t=e.validateOnInput)!==null&&t!==void 0?t:a,validateOnChange:(n=e.validateOnChange)!==null&&n!==void 0?n:o,validateOnBlur:(i=e.validateOnBlur)!==null&&i!==void 0?i:v,validateOnModelUpdate:(r=e.validateOnModelUpdate)!==null&&r!==void 0?r:s}}function Yt(e,t){return de(t.attrs.type)?Te(e,"modelValue")?e.modelValue:void 0:Te(e,"modelValue")?e.modelValue:t.attrs.value}const nn=Ht;let Qt=0;function Xt(e){var t;const n=Qt++;let i=!1;const r=ee({}),a=ee(!1),o=ee(0),v=[],s=Ie(F(f(e==null?void 0:e.initialValues)||{})),{errorBag:m,setErrorBag:V,setFieldErrorBag:g}=xt(e==null?void 0:e.initialErrors),O=B(()=>I(m.value).reduce((l,u)=>{const y=m.value[u];return y&&y.length&&(l[u]=y[0]),l},{}));function j(l){const u=r.value[l];return Array.isArray(u)?u[0]:u}function M(l){return!!r.value[l]}const S=B(()=>I(r.value).reduce((l,u)=>{const y=j(u);return y&&(l[u]=f(y.label||y.name)||""),l},{})),W=B(()=>I(r.value).reduce((l,u)=>{var y;const h=j(u);return h&&(l[u]=(y=h.bails)!==null&&y!==void 0?y:!0),l},{})),D=Object.assign({},(e==null?void 0:e.initialErrors)||{}),k=(t=e==null?void 0:e.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:z,originalInitialValues:E,setInitialValues:L}=Jt(r,s,e==null?void 0:e.initialValues),Z=Zt(r,s,E,O),q=e==null?void 0:e.validationSchema,C=De(Pe,5),R=De(Pe,5),_=_e(async l=>await l==="silent"?C():R(),(l,[u])=>{const y=b.fieldsByPath.value||{},h=I(b.errorBag.value);return[...new Set([...I(l.results),...I(y),...h])].reduce((p,P)=>{const x=y[P],se=(l.results[P]||{errors:[]}).errors,Y={errors:se,valid:!se.length};if(p.results[P]=Y,Y.valid||(p.errors[P]=Y.errors[0]),!x)return U(P,se),p;if(H(x,fe=>fe.meta.valid=Y.valid),u==="silent")return p;const ft=Array.isArray(x)?x.some(fe=>fe.meta.validated):x.meta.validated;return u==="validated-only"&&!ft||H(x,fe=>fe.setState({errors:Y.errors})),p},{valid:l.valid,results:{},errors:{}})}),b={formId:n,fieldsByPath:r,values:s,errorBag:m,errors:O,schema:q,submitCount:o,meta:Z,isSubmitting:a,fieldArrays:v,keepValuesOnUnmount:k,validateSchema:f(q)?_:void 0,validate:J,register:Se,unregister:oe,setFieldErrorBag:g,validateField:ae,setFieldValue:T,setValues:te,setErrors:$,setFieldError:U,setFieldTouched:K,setTouched:ne,resetForm:c,handleSubmit:Ee,stageInitialValue:ct,unsetInitialValue:st,setFieldInitialValue:Ne,useFieldModel:ge};function w(l){return Array.isArray(l)}function H(l,u){return Array.isArray(l)?l.forEach(u):u(l)}function ie(l){Object.values(r.value).forEach(u=>{u&&H(u,l)})}function U(l,u){g(l,u)}function $(l){V(l)}function T(l,u,{force:y}={force:!1}){var h;const d=r.value[l],p=F(u);if(!d){le(s,l,p);return}if(w(d)&&((h=d[0])===null||h===void 0?void 0:h.type)==="checkbox"&&!Array.isArray(u)){const x=F(Me(G(s,l)||[],u,void 0));le(s,l,x);return}let P=u;!w(d)&&d.type==="checkbox"&&!y&&!i&&(P=F(Me(G(s,l),u,f(d.uncheckedValue)))),le(s,l,P)}function te(l){I(s).forEach(u=>{delete s[u]}),I(l).forEach(u=>{T(u,l[u])}),v.forEach(u=>u&&u.reset())}function he(l){const{value:u}=ut(l);return Q(u,()=>{M(f(l))||J({mode:"validated-only"})},{deep:!0}),u}function ge(l){return Array.isArray(l)?l.map(he):he(l)}function K(l,u){const y=r.value[l];y&&H(y,h=>h.setTouched(u))}function ne(l){I(l).forEach(u=>{K(u,!!l[u])})}function c(l){i=!0,l!=null&&l.values?(L(l.values),te(l==null?void 0:l.values)):(L(E.value),te(E.value)),ie(u=>u.resetField()),l!=null&&l.touched&&ne(l.touched),$((l==null?void 0:l.errors)||{}),o.value=(l==null?void 0:l.submitCount)||0,ve(()=>{i=!1})}function A(l,u){const y=mt(l),h=u;if(!r.value[h]){r.value[h]=y;return}const d=r.value[h];d&&!Array.isArray(d)&&(r.value[h]=[d]),r.value[h]=[...r.value[h],y]}function N(l,u){const y=u,h=r.value[y];if(h){if(!w(h)&&l.id===h.id){delete r.value[y];return}if(w(h)){const d=h.findIndex(p=>p.id===l.id);if(d===-1)return;h.splice(d,1),h.length||delete r.value[y]}}}function Se(l){const u=f(l.name);A(l,u),Oe(l.name)&&Q(l.name,async(h,d)=>{await ve(),N(l,d),A(l,h),(O.value[d]||O.value[h])&&(U(d,void 0),ae(h)),await ve(),M(d)||je(s,d)});const y=f(l.errorMessage);y&&(D==null?void 0:D[u])!==y&&ae(u),delete D[u]}function oe(l){const u=f(l.name),y=r.value[u],h=!!y&&w(y);N(l,u),ve(()=>{var d;const p=(d=f(l.keepValueOnUnmount))!==null&&d!==void 0?d:f(k),P=G(s,u);if(h&&(y===r.value[u]||!r.value[u])&&Array.isArray(P)&&!p){const se=P.findIndex(Y=>X(Y,f(l.checkedValue)));if(se>-1){const Y=[...P];Y.splice(se,1),T(u,Y,{force:!0})}}if(!M(u)){if(U(u,void 0),p||h&&!xe(G(s,u)))return;je(s,u)}})}async function J(l){if(ie(d=>d.meta.validated=!0),b.validateSchema)return b.validateSchema((l==null?void 0:l.mode)||"force");const u=await Promise.all(Object.values(r.value).map(d=>{const p=Array.isArray(d)?d[0]:d;return p?p.validate(l).then(P=>({key:f(p.name),valid:P.valid,errors:P.errors})):Promise.resolve({key:"",valid:!0,errors:[]})})),y={},h={};for(const d of u)y[d.key]={valid:d.valid,errors:d.errors},d.errors.length&&(h[d.key]=d.errors[0]);return{valid:u.every(d=>d.valid),results:y,errors:h}}async function ae(l){const u=r.value[l];return u?Array.isArray(u)?u.map(y=>y.validate())[0]:u.validate():Promise.resolve({errors:[],valid:!0})}function Ee(l,u){return function(h){return h instanceof Event&&(h.preventDefault(),h.stopPropagation()),ne(I(r.value).reduce((d,p)=>(d[p]=!0,d),{})),a.value=!0,o.value++,J().then(d=>{if(d.valid&&typeof l=="function")return l(F(s),{evt:h,setErrors:$,setFieldError:U,setTouched:ne,setFieldTouched:K,setValues:te,setFieldValue:T,resetForm:c});!d.valid&&typeof u=="function"&&u({values:F(s),evt:h,errors:d.errors,results:d.results})}).then(d=>(a.value=!1,d),d=>{throw a.value=!1,d})}}function Ne(l,u){le(z.value,l,F(u))}function st(l){je(z.value,l)}function ct(l,u,y=!1){le(s,l,u),Ne(l,u),y&&!(e!=null&&e.initialValues)&&le(E.value,l,F(u))}async function Pe(){const l=f(q);return l?me(l)?await Pt(l,s):await Tt(l,s,{names:S.value,bailsMap:W.value}):{valid:!0,results:{},errors:{}}}const dt=Ee((l,{evt:u})=>{tt(u)&&u.target.submit()});return Ye(()=>{if(e!=null&&e.initialErrors&&$(e.initialErrors),e!=null&&e.initialTouched&&ne(e.initialTouched),e!=null&&e.validateOnMount){J();return}b.validateSchema&&b.validateSchema("silent")}),Oe(q)&&Q(q,()=>{var l;(l=b.validateSchema)===null||l===void 0||l.call(b,"validated-only")}),Xe(ye,b),{errors:O,meta:Z,values:s,isSubmitting:a,submitCount:o,validate:J,validateField:ae,handleReset:()=>c(),resetForm:c,handleSubmit:Ee,submitForm:dt,setFieldError:U,setErrors:$,setFieldValue:T,setValues:te,setFieldTouched:K,setTouched:ne,useFieldModel:ge}}function Zt(e,t,n,i){const r={touched:"some",pending:"some",valid:"every"},a=B(()=>!X(t,f(n)));function o(){const s=Object.values(e.value).flat(1).filter(Boolean);return I(r).reduce((m,V)=>{const g=r[V];return m[V]=s[g](O=>O.meta[V]),m},{})}const v=Ie(o());return vt(()=>{const s=o();v.touched=s.touched,v.valid=s.valid,v.pending=s.pending}),B(()=>Object.assign(Object.assign({initialValues:f(n)},v),{valid:v.valid&&!I(i.value).length,dirty:a.value}))}function Jt(e,t,n){const i=ee(F(f(n))||{}),r=ee(F(f(n))||{});function a(o,v=!1){i.value=F(o),r.value=F(o),v&&I(e.value).forEach(s=>{const m=e.value[s],V=Array.isArray(m)?m.some(O=>O.meta.touched):m==null?void 0:m.meta.touched;if(!m||V)return;const g=G(i.value,s);le(t,s,F(g))})}return Oe(n)&&Q(n,o=>{a(o,!0)},{deep:!0}),{initialValues:i,originalInitialValues:r,setInitialValues:a}}function xt(e){const t=ee({});function n(a){return Array.isArray(a)?a:a?[a]:[]}function i(a,o){if(!o){delete t.value[a];return}t.value[a]=n(o)}function r(a){t.value=I(a).reduce((o,v)=>{const s=a[v];return s&&(o[v]=n(s)),o},{})}return e&&r(e),{errorBag:t,setErrorBag:r,setFieldErrorBag:i}}const en=We({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1}},setup(e,t){const n=re(e,"initialValues"),i=re(e,"validationSchema"),r=re(e,"keepValues"),{errors:a,values:o,meta:v,isSubmitting:s,submitCount:m,validate:V,validateField:g,handleReset:O,resetForm:j,handleSubmit:M,setErrors:S,setFieldError:W,setFieldValue:D,setValues:k,setFieldTouched:z,setTouched:E}=Xt({validationSchema:i.value?i:void 0,initialValues:n,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:r}),L=M((_,{evt:b})=>{tt(b)&&b.target.submit()},e.onInvalidSubmit),Z=e.onSubmit?M(e.onSubmit,e.onInvalidSubmit):L;function q(_){Be(_)&&_.preventDefault(),O(),typeof t.attrs.onReset=="function"&&t.attrs.onReset()}function C(_,b){return M(typeof _=="function"&&!b?_:b,e.onInvalidSubmit)(_)}function R(){return{meta:v.value,errors:a.value,values:o,isSubmitting:s.value,submitCount:m.value,validate:V,validateField:g,handleSubmit:C,handleReset:O,submitForm:L,setErrors:S,setFieldError:W,setFieldValue:D,setValues:k,setFieldTouched:z,setTouched:E,resetForm:j}}return t.expose({setFieldError:W,setErrors:S,setFieldValue:D,setValues:k,setFieldTouched:z,setTouched:E,resetForm:j,validate:V,validateField:g}),function(){const b=e.as==="form"?e.as:He(e.as),w=nt(b,t,R);if(!e.as)return w;const H=e.as==="form"?{novalidate:!0}:{};return Ke(b,Object.assign(Object.assign(Object.assign({},H),t.attrs),{onSubmit:Z,onReset:q}),w)}}}),rn=en;export{rn as F,nn as a,Lt as b,Xt as u};
