import{h,u as g,ch as t}from"./BGVbXBYx.js";import{u as P}from"./DHKzahhz.js";import{u as m}from"./CErvUb0H.js";const C=()=>{const{addError:i,addSuccess:u}=P(),s=m("token"),p=h(),{setProfessionalUser:l,sendNewPhotoOnProfile:f}=p,a=g(),n=localStorage.getItem("professional-uuid"),d=async e=>{try{const{data:r}=await t.post(`${a.public.apiUrl}/professional/create`,e,{headers:{Authorization:`Bearer ${s.value}`,"Content-Type":"application/json"}});if(r)return u("Modification du profil professionnel réussie !"),c(),r}catch(r){i(r.response.data)}},c=async()=>{try{const{data:e}=await t.get(`${a.public.apiUrl}/professional`,{headers:{Authorization:`Bearer ${s.value}`,"Content-Type":"application/json"}});if(e)return l(e),console.log("User profile details:",e),e}catch{i({message:"Une erreur est survenue lors de la récupération du profil."})}};return{createProfessionalProfile:d,getProfessionalProfile:c,getProfessionalProfileDetails:async()=>{try{const{data:e}=await t.get(`${a.public.apiUrl}/professional/${n}`,{headers:{Authorization:`Bearer ${s.value}`,"Content-Type":"application/json"}});if(e)return l(e),e}catch{i({message:"Une erreur est survenue lors de la récupération du profil."})}},patchProfessionnalProfileDetails:async e=>{try{const{data:r}=await t.patch(`${a.public.apiUrl}/professional/${n}`,{newProfile:e,headers:{Authorization:`Bearer ${s.value}`,"Content-Type":"application/json"}});if(r)return console.log("data",r),l(r),r}catch{i({message:"Une erreur est survenue lors de la récupération du profil."})}},changeProfessionalBannerPicture:async e=>{const r=new FormData;r.append("file",e),console.log("URL finale:",`${a.public.apiUrl}/professional/${n}/picture`);try{const{data:o}=await t.patch(`${a.public.apiUrl}/professional/${n}/picture`,r,{headers:{Authorization:`Bearer ${s.value}`,"Content-Type":"multipart/form-data"}});return o!=null&&o.imageUrl&&f(o.imageUrl),console.log("ici",o.imageUrl),o}catch(o){console.error(o),alert("Une erreur est survenue lors de la mise à jour du profil")}}}};export{C as u};
