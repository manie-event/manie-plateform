import{d as v,q as g,bT as _,g as n,o as x,c as t,a as o,e as i,t as k}from"./4RQtgJZ9.js";import{u as h}from"./BrLY1Xct.js";import"./D_xRysGK.js";const y={class:"p-8 text-center"},E={key:0},w={key:1,class:"text-green-600"},b={key:2,class:"text-red-600"},L=v({__name:"[token]",setup(B){const d=g(),m=_(),f=d.params.token,{checkEmail:p}=h(),c=n(!0),r=n(!1),l=n("");return x(async()=>{var a,s,u;try{const e=await p(f);if(console.log(e,"result"),(e==null?void 0:e.message)==="Email verified"||(a=e==null?void 0:e.message)!=null&&a.toLowerCase().includes("verified"))r.value=!0,setTimeout(()=>m.push("/login"),3e3);else throw new Error((e==null?void 0:e.message)||"Erreur inconnue")}catch(e){l.value=((u=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:u.message)||(e==null?void 0:e.message)}finally{c.value=!1}}),(a,s)=>(o(),t("div",y,[s[1]||(s[1]=i("h1",{class:"text-2xl font-bold mb-4"},"Vérification de l'email",-1)),c.value?(o(),t("div",E,"⏳ Vérification en cours...")):r.value?(o(),t("div",w,s[0]||(s[0]=[i("p",null,"✅ ✅ Email vérifié avec succès !",-1),i("p",{class:"mt-2 text-sm"},"Redirection vers la page de connexion dans 3 secondes...",-1)]))):(o(),t("div",b," ❌ Erreur de vérification : "+k(l.value||"Lien invalide ou expiré."),1))]))}});export{L as default};
