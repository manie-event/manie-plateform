import{h,aD as t,u as P}from"./DRerZXE8.js";import{u as g}from"./C9fps2xW.js";import{u as m}from"./-XPu_Rvd.js";const C=()=>{const{addError:n,addSuccess:u}=g(),a=m("token"),p=h(),{setProfessionalUser:l,sendNewPhotoOnProfile:f}=p,s=P(),i=localStorage.getItem("professional-uuid"),d=async e=>{try{const{data:r}=await t.post(`${s.public.apiUrl}/professional/create`,e,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(r)return u("Modification du profil professionnel réussie !"),c(),r}catch(r){n(r.response.data)}},c=async()=>{try{const{data:e}=await t.get(`${s.public.apiUrl}/professional`,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(e)return l(e),e}catch{n({message:"Une erreur est survenue lors de la récupération du profil."})}};return{createProfessionalProfile:d,getProfessionalProfile:c,getProfessionalProfileDetails:async()=>{try{const{data:e}=await t.get(`${s.public.apiUrl}/professional/${i}`,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(e)return l(e),e}catch{n({message:"Une erreur est survenue lors de la récupération du profil."})}},patchProfessionnalProfileDetails:async e=>{console.log(e,"newProfile"),console.log(i,"professionalUuid");try{const{data:r}=await t.patch(`${s.public.apiUrl}/professional/${i}`,e,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(r)return l(r),r}catch(r){console.log(r,"error"),n({message:"Une erreur est survenue lors de la récupération du profil."})}},changeProfessionalBannerPicture:async e=>{const r=new FormData;r.append("file",e);try{const{data:o}=await t.patch(`${s.public.apiUrl}/professional/${i}/picture`,r,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"multipart/form-data"}});return o!=null&&o.imageUrl&&f(o.imageUrl),o}catch(o){console.error(o),alert("Une erreur est survenue lors de la mise à jour du profil")}}}};export{C as u};
