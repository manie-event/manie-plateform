import{_ as Y}from"./DgM4whJa.js";/* empty css        */import{x as Z,z as tt,d as $,o as et,s as g,g as v,G as lt,r as a,c as b,a as C,F as y,b as s,w as o,e,t as u,f as x,i as f,j as st,k as ot,B as at,O as nt}from"./BR_J5eSC.js";import{I}from"./CAurdWeK.js";import{f as it}from"./CBX3g8Fx.js";import"./DTCs3I_I.js";const rt=Z({id:"tickets",state:()=>({ticket:[],ticketContent:1,ticketearch:""}),actions:{async fetchTicket(){try{const n=await tt.get("/api/data/tickets/TicketData");this.ticket=n.data,console.log(n)}catch(n){alert(n),console.log(n)}},SelectTicket(n){this.ticketContent=n},deleteTicket(n){const c=this.ticket.findIndex(d=>d.Id==n);c!==-1&&(this.ticket=[...this.ticket.slice(0,c),...this.ticket.slice(c+1)])},addTicket(n){n.Id=this.ticket.length>0?Math.max(...this.ticket.map(c=>c.Id))+1:1,this.ticket.push(n)}}}),ct={class:"overflow-x-reposive"},dt={class:"text-primary text-24"},ut={class:"text-warning text-24"},pt={class:"text-success text-24"},mt={class:"text-error text-24"},vt={class:""},_t={class:"d-sm-flex justify-space-between align-center my-7"},xt=["onClick"],ft={class:"text-body-1"},ht={class:"text-h6"},kt={style:{"max-width":"280px"},class:"text-body-1 text-muted text-truncate"},gt={class:"d-flex ga-2 align-center"},Tt=["src","alt"],wt={class:"text-h6 text-no-wrap"},bt={class:"text-muted text-body-1 text-no-wrap"},Ct={class:"text-center"},yt=$({__name:"TicketList",setup(n){const c=rt();et(async()=>{await c.fetchTicket(),console.log("Fetched tickets:",d.value),m(h.value)});const d=g(()=>c.ticket);let p=v([...d.value]);const _=v(""),h=v("total"),k=v(!1),i=v({title:"",description:"",usernm:"Liam"}),L=()=>{if(i.value.title&&i.value.description&&i.value.usernm){const t={Id:d.value.length+1,ticketTitle:i.value.title,ticketDescription:i.value.description,AgentName:i.value.usernm,Label:"success",Status:"Open",Date:new Date().toISOString(),thumb:nt};c.addTicket(t),m("total"),i.value.title="",i.value.description="",k.value=!1}},m=r=>{h.value=r,console.log(`TicketTypeVal changed to: ${r}`),h.value==="total"?p.value=[...d.value]:p.value=d.value.filter(t=>(console.log("Filtering ticket:",t),t.Status&&t.Status.toLowerCase()===h.value.toLowerCase())),V()},V=()=>{_.value&&(p.value=p.value.filter(r=>{var t;return(t=r.ticketTitle)==null?void 0:t.toLowerCase().includes(_.value.toLowerCase())}))};lt(_,V);const A=g(()=>d.value.length),N=g(()=>d.value.filter(r=>r.Status==="Pending").length),M=g(()=>d.value.filter(r=>r.Status==="Open").length),F=g(()=>d.value.filter(r=>r.Status==="Closed").length),O=r=>{c.deleteTicket(r),m(h.value)};return(r,t)=>{const T=a("v-col"),U=a("v-row"),w=a("v-btn"),S=a("v-text-field"),z=a("v-sheet"),B=a("v-avatar"),q=a("v-chip"),P=a("v-tooltip"),j=a("v-table"),E=a("v-card-item"),D=a("v-card"),G=a("v-card-title"),J=a("v-textarea"),W=a("v-select"),H=a("v-form"),K=a("v-card-text"),Q=a("v-card-actions"),R=a("v-dialog");return C(),b(y,null,[s(D,{elevation:"10"},{default:o(()=>[s(E,null,{default:o(()=>[e("div",ct,[s(U,{class:"d-flex flex-nowrap"},{default:o(()=>[s(T,{cols:"10",md:"3",sm:"6"},{default:o(()=>[e("div",{class:"bg-lightprimary pa-7 text-center cursor-pointer rounded-md",onClick:t[0]||(t[0]=l=>m("total"))},[e("h2",dt,u(A.value),1),t[11]||(t[11]=e("h6",{class:"text-primary text-h6"},"Total Tickets",-1))])]),_:1}),s(T,{cols:"10",md:"3",sm:"6"},{default:o(()=>[e("div",{class:"bg-lightwarning pa-7 text-center cursor-pointer rounded-md",onClick:t[1]||(t[1]=l=>m("Pending"))},[e("h2",ut,u(N.value),1),t[12]||(t[12]=e("h6",{class:"text-warning text-h6"},"Pending Tickets",-1))])]),_:1}),s(T,{cols:"10",md:"3",sm:"6"},{default:o(()=>[e("div",{class:"bg-lightsuccess pa-7 text-center cursor-pointer rounded-md",onClick:t[2]||(t[2]=l=>m("Open"))},[e("h2",pt,u(M.value),1),t[13]||(t[13]=e("h6",{class:"text-success text-h6"},"Open Tickets",-1))])]),_:1}),s(T,{cols:"10",md:"3",sm:"6"},{default:o(()=>[e("div",{class:"bg-lighterror pa-7 text-center cursor-pointer rounded-md",onClick:t[3]||(t[3]=l=>m("Closed"))},[e("h2",mt,u(F.value),1),t[14]||(t[14]=e("h6",{class:"text-error text-h6"},"Closed Tickets",-1))])]),_:1})]),_:1})]),e("div",vt,[e("div",_t,[s(w,{color:"primary",rounded:"pill",onClick:t[4]||(t[4]=l=>k.value=!0)},{default:o(()=>t[15]||(t[15]=[x("Create Ticket")])),_:1,__:[15]}),s(z,{width:"255",class:"mt-lg-0 mt-4"},{default:o(()=>[s(S,{modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=l=>_.value=l),label:"Search Invoice",variant:"outlined","hide-details":"",class:"w-100",density:"compact"},{"prepend-inner":o(()=>[s(f(I),{icon:"solar:magnifer-linear",height:"18",width:"25"})]),_:1},8,["modelValue"])]),_:1})]),s(j,{class:"ticket-table"},{default:o(()=>[t[17]||(t[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-h6 text-no-wrap"},"Id"),e("th",{class:"text-h6 text-no-wrap"},"Ticket"),e("th",{class:"text-h6 text-no-wrap"},"Assigned To"),e("th",{class:"text-h6 text-no-wrap"},"Status"),e("th",{class:"text-h6 text-no-wrap"},"Date"),e("th",{class:"text-h6 text-no-wrap"},"Action")])],-1)),e("tbody",null,[f(p).length>0?(C(!0),b(y,{key:0},ot(f(p),l=>(C(),b("tr",{key:l.Id,onClick:X=>f(c).SelectTicket(l.Id)},[e("td",ft,u(l.Id),1),e("td",null,[e("h6",ht,u(l.ticketTitle),1),e("p",kt,u(l.ticketDescription),1)]),e("td",null,[e("div",gt,[s(B,{size:"40"},{default:o(()=>[e("img",{src:l.thumb,alt:l.thumb,width:"40"},null,8,Tt)]),_:2},1024),e("h6",wt,u(l.AgentName),1)])]),e("td",null,[s(q,{rounded:"pill",class:"font-weight-bold",color:l.Label,size:"small",label:""},{default:o(()=>[x(u(l.Status),1)]),_:2},1032,["color"])]),e("td",null,[e("p",bt,u(l!=null&&l.Date?f(it)(new Date(l.Date),"E, MMM d"):"N/A"),1)]),e("td",Ct,[s(w,{icon:"",color:"lighterror",class:"mx-auto",flat:"",size:"x-small",onClick:at(X=>O(l.Id),["stop"])},{default:o(()=>[s(P,{activator:"parent",location:"top"},{default:o(()=>t[16]||(t[16]=[x("Delete Ticket")])),_:1,__:[16]}),s(f(I),{icon:"solar:trash-bin-minimalistic-linear",class:"text-error",height:"18"})]),_:2},1032,["onClick"])])],8,xt))),128)):st("",!0)])]),_:1})])]),_:1})]),_:1}),s(R,{modelValue:k.value,"onUpdate:modelValue":t[10]||(t[10]=l=>k.value=l),"max-width":"500px"},{default:o(()=>[s(D,null,{default:o(()=>[s(G,{class:"pa-4 bg-primary"},{default:o(()=>t[18]||(t[18]=[x("Create New Ticket")])),_:1,__:[18]}),s(K,null,{default:o(()=>[s(H,null,{default:o(()=>[s(S,{label:"Ticket Title",modelValue:i.value.title,"onUpdate:modelValue":t[6]||(t[6]=l=>i.value.title=l),required:""},null,8,["modelValue"]),s(J,{label:"Ticket Description",modelValue:i.value.description,"onUpdate:modelValue":t[7]||(t[7]=l=>i.value.description=l),rows:"4",required:""},null,8,["modelValue"]),s(W,{label:"Assign To",modelValue:i.value.usernm,"onUpdate:modelValue":t[8]||(t[8]=l=>i.value.usernm=l),items:["Liam","Steve","Jack","Wiliam","Dona"],variant:"outlined",required:""},null,8,["modelValue"])]),_:1})]),_:1}),s(Q,{class:"ga-3"},{default:o(()=>[s(w,{color:"error",variant:"flat",class:"px-5",rounded:"pill",onClick:t[9]||(t[9]=l=>k.value=!1)},{default:o(()=>t[19]||(t[19]=[x("Cancel")])),_:1,__:[19]}),s(w,{color:"primary",variant:"flat",class:"px-5",rounded:"pill",onClick:L},{default:o(()=>t[20]||(t[20]=[x("Create")])),_:1,__:[20]})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),At=$({__name:"index",setup(n){const c=v({title:"Tickets App"}),d=v([{text:"Dashboard",disabled:!1,href:"#"},{text:"Tickets App",disabled:!0,href:"#"}]);return(p,_)=>(C(),b(y,null,[s(Y,{title:c.value.title,breadcrumbs:d.value},null,8,["title","breadcrumbs"]),s(yt)],64))}});export{At as default};
