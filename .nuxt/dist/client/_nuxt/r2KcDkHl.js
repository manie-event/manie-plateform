import{h as P,b2 as s,u as h}from"./C7zyImg8.js";import{u as m}from"./DM1i6pyx.js";import{u as y}from"./Bbe0W9pt.js";const b=()=>{const{addError:t,addSuccess:u}=m(),a=y("token"),p=P(),{setProfessionalUser:l,sendNewPhotoOnProfile:f,sendProfessionalProfileForCustomer:d}=p,n=h(),i=localStorage.getItem("professional-uuid"),g=async e=>{try{const{data:r}=await s.post(`${n.public.apiUrl}/professional/create`,e,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(r)return u("Modification du profil professionnel réussie !"),c(),r}catch(r){t(r.response.data)}},c=async()=>{try{const{data:e}=await s.get(`${n.public.apiUrl}/professional`,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(e)return l(e),e}catch(e){console.log(e,"getProfessionalProfileError"),t({message:"Une erreur est survenue lors de la récupération du profil."})}};return{createProfessionalProfile:g,getProfessionalProfile:c,getProfessionalProfileDetails:async()=>{try{const{data:e}=await s.get(`${n.public.apiUrl}/professional/${i}`,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(e)return l(e),e}catch{t({message:"Une erreur est survenue lors de la récupération du profil."})}},patchProfessionnalProfileDetails:async e=>{console.log(e,"newProfile"),console.log(i,"professionalUuid");try{const{data:r}=await s.patch(`http://127.0.0.1:3333/professional/${i}`,e,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(r)return l(r),r}catch(r){console.log(r,"error"),t({message:"Une erreur est survenue lors de la récupération du profil."})}},getProfessionalProfileForCustomer:async e=>{try{const{data:r}=await s.get(`${n.public.apiUrl}/professional/show-professional-for-organisator/${e}`,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(r)return d(r),r}catch{t({message:"Une erreur est survenue lors de la récupération du profil."})}},changeProfessionalBannerPicture:async e=>{const r=new FormData;r.append("file",e);try{const{data:o}=await s.patch(`${n.public.apiUrl}/professional/${i}/picture`,r,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"multipart/form-data"}});return o!=null&&o.imageUrl&&(console.log(o.imageUrl,"data.imageUrl"),f(o.imageUrl)),o}catch(o){console.error(o),alert("Une erreur est survenue lors de la mise à jour du profil")}}}};export{b as u};
