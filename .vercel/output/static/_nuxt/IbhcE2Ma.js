import{_ as Ae}from"./Cy56Fxle.js";import{d as se,h as ae,s as ne,v as _e,k as Q,z as be,o as he,r as p,c as b,b as u,F as D,e as o,l as A,w as s,bN as Ue,n as T,f as l,g as h,m as t,x as J,t as K,bO as ze,T as me,a$ as ue,L as de,y as ve,C as Ee,bP as Pe,bQ as Ce,X as Ie,W as Qe,bR as Re,bS as $e,bT as Oe,bU as De,bV as Te}from"./C7zyImg8.js";import{B as Le}from"./vxhyI0bC.js";import{u as Be}from"./ChGr82CN.js";import{c as ce,a as O,d as Fe,e as pe,f as Me}from"./BsrHGcQQ.js";import{_ as je}from"./DYDaJBey.js";import{u as fe,A as qe}from"./DHK_j---.js";import{u as ye}from"./r2KcDkHl.js";import{M as ke}from"./DlYMBLTp.js";import{u as xe}from"./DM1i6pyx.js";import{_ as He}from"./sks-LOh4.js";import"./C8w4AP7O.js";import"./Bbe0W9pt.js";import"./Dtvx2niU.js";const Ne=[{label:"Auvergne Rhône-Alpes",value:"Auvergne-Rhône-Alpes"},{label:"Ain",value:"Ain"},{label:"Allier",value:"Allier"},{label:"Ardèche",value:"Ardèche"},{label:"Cantal",value:"Cantal"},{label:"Drôme",value:"Drôme"},{label:"Haute-Savoie",value:"Haute-Savoie"},{label:"Haute Loire",value:"Haute-Loire"},{label:"Isère",value:"Isère"},{label:"Loire",value:"Loire"},{label:"Puy De Dôme",value:"Puy-de-Dôme"},{label:"Rhône",value:"Rhône"},{label:"Savoie",value:"Savoie"}],Ke={class:"d-flex gap-2 flex-column justify-start align-items-start"},Ge={class:"d-flex align-center gap-2"},We={class:"mt-4"},Je={class:"my-8"},Ye={key:0,class:"d-flex justify-space-between"},Xe={key:1},Ze=se({__name:"EditProfessionalProfil",props:{openModal:{type:Boolean},openModalModifiers:{}},emits:["update:openModal"],setup(ee){var te;const F=ae(),{professionalUser:d}=ne(F),{createProfessionalProfile:w,patchProfessionnalProfileDetails:E}=ye(),{getSectors:k}=fe(),C=_e(ee,"openModal"),U=Q([]),q=Q(!1),{addError:R,addSuccess:oe}=xe(),P=Q(1),ie=Q(qe),M=Q(Ne),X=localStorage.getItem("is-profile-verified"),Y=Q(0),$=Q(!1),v=be(()=>Y.value*7),j=be(()=>U.value.reduce((_,e)=>(e.question&&e.reponse&&(_[e.question]=e.reponse),_),null)),G=ce({name:O().min(2).required("Le nom est requis"),siret:O().required("Le SIRET est requis").length(14,"Le SIRET doit contenir 14 caractères"),address:O().required("L'adresse est requise"),telephone:O().length(10,"Vous devez indiquer 10 numéros").required("Le numéro de téléphone est obligatoire"),bio:O().required("La bio est requise"),mainActivity:O().required("Activité requise"),mainInterlocutor:O().required("L'interlocuteur principal est requis"),experience:pe().min(0,"L'expérience doit être positive").required("L'expérience est requise"),geographicArea:O().required("La zone géographique est requise"),certification:O(),minimumReservationPeriod:pe().min(0,"La période de réservation doit être positive"),deposit:Me(),depositAmount:pe().min(0,"Le montant de l'acompte doit être positif"),billingPeriod:O().required("La période de facturation est requise"),links:Fe().of(ce({type:O(),value:O().url("URL non valide")})),faq:ce({question:O(),reponse:O()})}),{values:n,errors:x,resetForm:Z}=Be({validationSchema:G,initialValues:{name:"",siret:"",address:"",telephone:"",bio:"",mainActivity:"Veuillez choisir votre activité",mainInterlocutor:"",experience:0,geographicArea:((te=M.value[0])==null?void 0:te.label)??"",faq:{},minimumReservationPeriod:0,certification:[""],deposit:!1,depositAmount:0,billingPeriod:"beforeEvent",links:[]},validateOnMount:!1,keepValuesOnUnmount:!0}),re=()=>{n.links.push({type:"",value:""})},r=_=>{n.links.length>0&&n.links.splice(_,1)},a=()=>{U.value.push({question:"",reponse:""})},S=_=>{U.value.length>=0&&U.value.splice(_,1)},f=()=>{n.certification.push("")},z=_=>{n.certification.splice(_,1)},m=()=>{k(n.mainActivity)},L=async _=>{var e,I,g,i;try{const N={..._,faq:j.value||{},minimumReservationPeriod:v.value,links:n.links.filter(V=>V.type.trim()&&V.value.trim()),certification:n.certification.filter(V=>V.trim())};(await w(N)).message==="Professional updated"?(console.log(d.value,"professionalUser.VALUE"),(e=d.value)!=null&&e.uuid&&localStorage.setItem("professional-uuid",(I=d.value)==null?void 0:I.uuid),(g=d.value)!=null&&g.name&&localStorage.setItem("pro-name",(i=d.value)==null?void 0:i.name),oe("Votre profil a été modifié avec success"),C.value=!1,$.value=!0):R({message:"La mise à jour du profil a échoué."})}catch{R({message:"Erreur lors de la mise à jour du profil."})}},H=async _=>{var e;try{const I={..._,faq:j.value||{},minimumReservationPeriod:v.value,links:n.links.filter(i=>i.type.trim()&&i.value.trim()),certification:n.certification.filter(i=>i.trim())},g=await E(I);if(g.message==="Professional updated"){const i=g.newPro||((e=g.data)==null?void 0:e.professional);console.log(i,"PROFESSIONAL"),i!=null&&i.uuid&&(console.log(i==null?void 0:i.uuid,"professional?.uuid"),localStorage.setItem("professional-uuid",i.uuid)),i!=null&&i.name&&(console.log(i==null?void 0:i.name,"professional?.name"),localStorage.setItem("pro-name",i.name)),oe("Votre profil a été modifié avec success"),C.value=!1,$.value=!0}else R({message:"La mise à jour du profil a échoué."})}catch{R({message:"Erreur lors de la mise à jour du profil."})}};return he(()=>{var _,e;if(d.value){const I=typeof d.value.billingPeriod=="boolean"?d.value.billingPeriod?"afterEvent":"beforeEvent":d.value.billingPeriod||"beforeEvent";Z({values:{name:d.value.name??"",siret:d.value.siret??"",telephone:d.value.telephone??"",address:d.value.address??"",bio:d.value.bio??"",mainActivity:d.value.mainActivity??"Veuillez choisir votre activité",mainInterlocutor:d.value.mainInterlocutor??"",experience:d.value.experience??0,geographicArea:d.value.geographicArea??((_=M.value[0])==null?void 0:_.label)??"",certification:Array.isArray(d.value.certification)&&d.value.certification.length>0?d.value.certification:[""],minimumReservationPeriod:d.value.minimumReservationPeriod??0,deposit:d.value.deposit??!1,depositAmount:d.value.depositAmount??0,billingPeriod:I,links:(e=d.value.links)!=null&&e.length?d.value.links:[],faq:d.value.faq??{}}}),U.value=d.value.faqArray??[]}}),(_,e)=>{const I=p("v-divider"),g=p("v-text-field"),i=p("v-select"),N=p("v-number-input"),y=p("v-btn"),V=p("v-checkbox"),le=p("v-label"),Ve=p("v-switch"),we=p("v-form"),Se=Ae;return u(),b(D,null,[o(Le,{modelValue:C.value,"onUpdate:modelValue":e[16]||(e[16]=c=>C.value=c),fullscreen:"",transition:"dialog-bottom-transition"},{content:s(()=>[o(we,{class:"px-4"},{default:s(()=>[Ue(l("div",null,[o(I,{class:"mt-6"},{default:s(()=>[...e[18]||(e[18]=[l("p",{class:"mt-6"},null,-1),h(" A propos de votre entreprise",-1)])]),_:1}),o(g,{class:"mt-6",label:"Le nom de votre entreprise ?",modelValue:t(n).name,"onUpdate:modelValue":e[0]||(e[0]=c=>t(n).name=c),"error-messages":q.value?t(x).name:void 0},null,8,["modelValue","error-messages"]),o(g,{label:"Votre Numéro De Siret ?",modelValue:t(n).siret,"onUpdate:modelValue":e[1]||(e[1]=c=>t(n).siret=c),"error-messages":q.value?t(x).siret:void 0},null,8,["modelValue","error-messages"]),o(g,{label:"Votre numéro de téléphone ?",modelValue:t(n).telephone,"onUpdate:modelValue":e[2]||(e[2]=c=>t(n).telephone=c),"error-messages":q.value?t(x).siret:void 0},null,8,["modelValue","error-messages"]),o(g,{label:"L'adresse complète du siège social ?",modelValue:t(n).address,"onUpdate:modelValue":e[3]||(e[3]=c=>t(n).address=c),"error-messages":q.value?t(x).address:void 0},null,8,["modelValue","error-messages"]),o(g,{label:"Une courte description de votre activité ?",modelValue:t(n).bio,"onUpdate:modelValue":e[4]||(e[4]=c=>t(n).bio=c),"error-messages":q.value?t(x).bio:void 0},null,8,["modelValue","error-messages"]),o(i,{label:"Votre activité principale ?",modelValue:t(n).mainActivity,"onUpdate:modelValue":[e[5]||(e[5]=c=>t(n).mainActivity=c),m],items:ie.value,"item-title":"label","item-value":"value","error-messages":q.value?t(x).mainActivity:void 0},null,8,["modelValue","items","error-messages"]),o(g,{label:"Le nom complet de l'interlocuteur principal ?",modelValue:t(n).mainInterlocutor,"onUpdate:modelValue":e[6]||(e[6]=c=>t(n).mainInterlocutor=c),"error-messages":q.value?t(x).mainInterlocutor:void 0},null,8,["modelValue","error-messages"]),o(N,{label:"Depuis combien d'année exercez-vous cette activité ?",modelValue:t(n).experience,"onUpdate:modelValue":e[7]||(e[7]=c=>t(n).experience=c),variant:"solo",min:0,"error-messages":q.value?t(x).experience:void 0},null,8,["modelValue","error-messages"]),o(I,{class:"border-opacity-50 mb-6"},{default:s(()=>[...e[19]||(e[19]=[l("p",{class:"mb-6"},"A propos de votre activité",-1)])]),_:1}),o(i,{label:"Votre secteur géographique ?",modelValue:t(n).geographicArea,"onUpdate:modelValue":e[8]||(e[8]=c=>t(n).geographicArea=c),items:M.value,"item-title":"label","item-value":"value","error-messages":q.value?t(x).geographicArea:void 0},null,8,["modelValue","items","error-messages"]),l("div",null,[(u(!0),b(D,null,J(t(n).certification,(c,W)=>(u(),b("div",{key:W,class:"flex items-center gap-2 mb-3"},[o(g,{modelValue:t(n).certification[W],"onUpdate:modelValue":B=>t(n).certification[W]=B,label:"Certification(s) & Label(s)",variant:"outlined",placeholder:"Exemple : Label AB (Bio)","hide-details":"",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),t(n).certification.length>1?(u(),A(y,{key:0,icon:"mdi-delete",color:"error",variant:"text",size:"small",onClick:B=>z(W)},null,8,["onClick"])):T("",!0)]))),128)),o(y,{color:"primary",class:"mt-2",onClick:f},{default:s(()=>[...e[20]||(e[20]=[h(" Ajouter une certification ",-1)])]),_:1})]),o(N,{variant:"solo",min:0,label:"Votre délai de réservation minimum (en semaine) ?",modelValue:Y.value,"onUpdate:modelValue":e[9]||(e[9]=c=>Y.value=c),"error-messages":q.value?t(x).minimumReservationPeriod:void 0},null,8,["modelValue","error-messages"]),o(V,{label:"Doit-on vous faire un accompte avant prestation",modelValue:t(n).deposit,"onUpdate:modelValue":e[10]||(e[10]=c=>t(n).deposit=c),"error-messages":q.value?t(x).deposit:void 0},null,8,["modelValue","error-messages"]),t(n).deposit?(u(),A(N,{key:0,variant:"solo",min:0,max:100,step:5,label:"Quel est le montant de dépôt (en pourcentage)?",modelValue:t(n).depositAmount,"onUpdate:modelValue":e[11]||(e[11]=c=>t(n).depositAmount=c),"error-messages":q.value?t(x).depositAmount:void 0},null,8,["modelValue","error-messages"])):T("",!0),l("div",Ke,[o(le,{class:"text-subtitle-1 font-weight-medium"},{default:s(()=>[...e[21]||(e[21]=[h("Vous souhaitez être payer avant l'évènement ?",-1)])]),_:1}),l("div",Ge,[o(le,{class:"text-subtitle-1 font-weight-medium"},{default:s(()=>[...e[22]||(e[22]=[h("Avant la prestation",-1)])]),_:1}),o(Ve,{modelValue:t(n).billingPeriod,"onUpdate:modelValue":e[12]||(e[12]=c=>t(n).billingPeriod=c),"false-value":"beforeEvent","true-value":"afterEvent",color:t(n).billingPeriod==="beforeEvent"?"success":"primary","hide-details":"","error-messages":q.value?t(x).billingPeriod:void 0},{default:s(()=>[h(K(t(n).billingPeriod),1)]),_:1},8,["modelValue","color","error-messages"]),o(le,{class:"text-subtitle-1 font-weight-medium"},{default:s(()=>[...e[23]||(e[23]=[h("Après la prestation",-1)])]),_:1})])]),o(I,{class:"mb-6"},{default:s(()=>[...e[24]||(e[24]=[l("p",{class:"mb-6"},"A propos de votre communication",-1)])]),_:1}),l("div",We,[(u(!0),b(D,null,J(t(n).links,(c,W)=>(u(),b("div",{key:W},[o(i,{modelValue:c.type,"onUpdate:modelValue":B=>c.type=B,label:"Renseignez le réseau social ou le site web",items:["Facebook","Instagram","LinkedIn","Twitter","Site Web"],"item-title":"label","item-value":"value"},null,8,["modelValue","onUpdate:modelValue"]),o(g,{modelValue:c.value,"onUpdate:modelValue":B=>c.value=B,label:"Renseignez le lien vers le réseau social ou le site web",type:"url",variant:"outlined",placeholder:"https://www.example.com/mon-reseau-social"},null,8,["modelValue","onUpdate:modelValue"]),o(y,{onClick:B=>r(W),disabled:t(n).links.length<=0,color:"error","prepend-icon":"mdi-delete",size:"small",class:"mb-4"},{default:s(()=>[...e[25]||(e[25]=[h(" Supprimer ",-1)])]),_:1},8,["onClick","disabled"])]))),128)),o(y,{onClick:re,color:"primary"},{default:s(()=>[...e[26]||(e[26]=[h(" Ajouter un lien vers un réseau social ou un site web ",-1)])]),_:1})]),l("div",Je,[(u(!0),b(D,null,J(U.value,(c,W)=>(u(),b("div",{key:W},[o(g,{modelValue:c.question,"onUpdate:modelValue":B=>c.question=B,label:"Renseignez une question fréquente auquelle vous répondez souvent","item-title":"label","item-value":"value"},null,8,["modelValue","onUpdate:modelValue"]),o(g,{modelValue:c.reponse,"onUpdate:modelValue":B=>c.reponse=B,label:"Renseignez la réponse à la question",type:"text",variant:"outlined",placeholder:"https://www.example.com/mon-reseau-social"},null,8,["modelValue","onUpdate:modelValue"]),o(y,{onClick:B=>S(W),disabled:U.value.length===0,color:"error","prepend-icon":"mdi-delete",size:"small",class:"my-2"},{default:s(()=>[...e[27]||(e[27]=[h(" Supprimer ",-1)])]),_:1},8,["onClick","disabled"])]))),128)),o(y,{onClick:a,color:"primary"},{default:s(()=>[...e[28]||(e[28]=[h(" Ajouter une question fréquente et sa réponse ",-1)])]),_:1})])],512),[[ze,P.value===1]]),P.value===1?(u(),b("div",Ye,[o(y,{onClick:e[13]||(e[13]=c=>C.value=!1)},{default:s(()=>[...e[29]||(e[29]=[h("Annuler",-1)])]),_:1}),t(X)?T("",!0):(u(),A(y,{key:0,color:"primary",onClick:e[14]||(e[14]=c=>L(t(n)))},{default:s(()=>[...e[30]||(e[30]=[h(" Valider mon profil ",-1)])]),_:1})),t(X)?(u(),b("div",Xe,[o(y,{color:"primary",onClick:e[15]||(e[15]=c=>H(t(n)))},{default:s(()=>[...e[31]||(e[31]=[h(" Modifier mon profil ",-1)])]),_:1})])):T("",!0)])):T("",!0)]),_:1})]),_:1},8,["modelValue"]),(u(),A(me,{to:"body"},[o(ke,{redirection:"dashboard2",modelValue:$.value,"onUpdate:modelValue":e[17]||(e[17]=c=>$.value=c)},null,8,["modelValue"]),o(Se),o(je)]))],64)}}}),ge=JSON.parse(`[{"sector":"food","general":{"questions":[{"id":"food-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quel type de cuisine proposez-vous ?  ","category":"cuisines","type":"checkbox","required":true},{"id":"food-keywords-1","question":"Quel(s) format(s) de prestations assurez-vous ? ","category":"format","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Propositions sucrées : ","category":"sucré","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Propositions salées : ","category":"salé","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Vos options : ","category":"régimes","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"lieux","general":{"questions":[{"id":"lieux-general-1","question":"vous proposez ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Dans quel environement ? ","category":"environnement","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Mon lieu est accessible : ","category":"accessibilité","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quelles prestations sont imposées à vos clients ? ","category":"prestations imposées","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Vous proposez une privatisation : ","category":"privatisation","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Quel(s) espaces peuvent-ils y trouver ? ","category":"espaces","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Quels équipements sont à leur disposition ? ","category":"équipements","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{}},{"sector":"service","general":{"questions":[{"id":"service-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"service-keywords-1","question":"Quelle(s) préstation(s) proposez-vous ? ","category":"serveur","type":"checkbox","required":true},{"id":"service-keywords-1","question":"Quel(s) matériel(s) fournissez-vous sur une prestation ? ","category":"matériel serveur","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"musique","general":{"questions":[{"id":"musique-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"musique-keywords-1","question":"Quelle service proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"musique-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"musique-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"service","general":{"questions":[{"id":"service-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}}]`),eo={class:"questionnaires-container"},oo={key:0,class:"mb-6"},to={key:1},so={class:"text-h6 px-4"},io={class:"service-chips mt-4"},ro={key:0,class:"mt-6"},lo={class:"text-h6 px-4"},ao={class:"mt-4"},no={class:"keyword-chips"},uo={key:1,class:"mt-6"},co={class:"text-h6 px-4"},po={class:"mt-4"},mo={class:"keyword-chips"},vo={key:2,class:"text-center py-8"},fo={key:3,class:"text-center py-4"},yo={class:"mt-6 text-center d-flex justify-space-between"},bo=se({__name:"ServicesPrestataire",props:{pageActuelle:{type:Boolean,default:!1},pageActuelleModifiers:{}},emits:["update:pageActuelle"],setup(ee){const F=_e(ee,"pageActuelle"),d=ae(),{professionnalServices:w,keywords:E,professionalUser:k}=ne(d),{getSectors:C,sendProfessionalServices:U}=fe(),{addSuccess:q,addError:R}=xe(),{patchProfessionnalProfileDetails:oe}=ye(),P=Q([]),ie=Q(qe),M=Q([]),X=Q(!1),Y=()=>Math.random().toString(36).substr(2,9),$=(r,a)=>{var z,m,L;if(!r||!((z=E.value)!=null&&z.length))return{};const S={},f=[];return r.servicesSection&&f.push(...((m=r.servicesSection.questions)==null?void 0:m.map(H=>H.category))||[]),r.habitudesSection&&f.push(...((L=r.habitudesSection.questions)==null?void 0:L.map(H=>H.category))||[]),f.forEach(H=>{const te=E.value.filter(_=>_.category===H&&(_.sector.toLowerCase()===a.toLowerCase()||!_.sector));S[H]=te.filter((_,e,I)=>I.findIndex(g=>g.uuid===_.uuid)===e)}),S},v=r=>{const a=ge.find(S=>S.sector.toLowerCase()===r.toLowerCase());return{id:Y(),sector:r,questionnaireData:a,services:[...w.value||[]],keywordsByCategory:$(a,r),selectedServiceUuid:null,selectedKeywords:new Set}},j=(r,a)=>{a.selectedServiceUuid===r.uuid?a.selectedServiceUuid=null:a.selectedServiceUuid=r.uuid,Z()},G=(r,a)=>{a.selectedKeywords.has(r.uuid)?a.selectedKeywords.delete(r.uuid):a.selectedKeywords.add(r.uuid),Z()},n=async(r,a)=>{if(!a)return;r.questionnaireData=null,r.services=[],r.keywordsByCategory={},r.selectedServiceUuid=null,r.selectedKeywords.clear(),await C(a);const S=ue([w,E],([f,z])=>{if(f!=null&&f.length&&(z!=null&&z.length)){const m=ge.find(L=>L.sector.toLowerCase()===a.toLowerCase());r.sector=a,r.questionnaireData=m,r.services=[...f],r.keywordsByCategory=$(m,a),S()}},{immediate:!0})},x=()=>{const r={id:Y(),sector:"",questionnaireData:null,services:[],keywordsByCategory:{},selectedServiceUuid:null,selectedKeywords:new Set};P.value.push(r)},Z=()=>{M.value=[],P.value.forEach(r=>{var a;r.selectedServiceUuid&&((a=k.value)!=null&&a.uuid)&&M.value.push({serviceUuid:r.selectedServiceUuid,professionalUuid:k.value.uuid,keywordsUuid:Array.from(r.selectedKeywords)})})},re=async()=>{var a,S;if(Z(),!P.value.some(f=>f.selectedServiceUuid)){R({message:"Veuillez sélectionner au moins un service"});return}if(M.value.length===0){R({message:"Erreur: UUID professionnel manquant"});return}try{const f=P.value.filter(m=>m.sector&&m.selectedServiceUuid).map(m=>m.sector);await oe({...k.value,faq:typeof((a=k.value)==null?void 0:a.faq)=="string"?JSON.parse(k.value.faq||"{}"):((S=k.value)==null?void 0:S.faq)||{},secondActivity:f[0]||"",thirdActivity:f[1]||""});const z=M.value.map(m=>U(m));await Promise.all(z),q(`${M.value.length} service(s) créé(s) avec succès !`),F.value=!1,X.value=!0}catch(f){console.error("Erreur lors de l'envoi:",f),R({message:"Erreur lors de l'envoi des services"})}};return ue(()=>k.value,async r=>{if(r!=null&&r.mainActivity&&(r!=null&&r.uuid)&&P.value.length===0)try{await C(r.mainActivity);const a=v(r.mainActivity);P.value.push(a)}catch(a){console.error("Erreur lors du chargement initial:",a),R({message:"Erreur lors du chargement des données"})}},{immediate:!0,deep:!0}),ue([w,E],([r,a])=>{var S;if(r!=null&&r.length&&(a!=null&&a.length)&&P.value.length>0){const f=P.value[0];f&&((S=k.value)!=null&&S.mainActivity)&&(f.services=[...r],f.keywordsByCategory=$(f.questionnaireData,k.value.mainActivity))}}),(r,a)=>{const S=p("v-select"),f=p("v-divider"),z=p("v-chip"),m=p("v-expansion-panel-text"),L=p("v-expansion-panel"),H=p("v-expansion-panels"),te=p("v-progress-circular"),_=p("v-btn"),e=p("v-card"),I=p("v-dialog");return u(),b(D,null,[o(I,{modelValue:F.value,"onUpdate:modelValue":a[1]||(a[1]=g=>F.value=g),fullscreen:"",transition:"dialog-bottom-transition"},{default:s(()=>{var g;return[(g=t(k))!=null&&g.uuid?(u(),A(e,{key:0,width:"800"},{default:s(()=>[l("div",eo,[(u(!0),b(D,null,J(P.value,(i,N)=>(u(),b("div",{key:i.id,class:"questionnaire-section mb-8"},[N>0?(u(),b("div",oo,[o(S,{label:`Votre ${N+1}ème activité ?`,modelValue:i.sector,"onUpdate:modelValue":[y=>i.sector=y,y=>n(i,y)],items:ie.value,"item-title":"label","item-value":"value",variant:"outlined"},null,8,["label","modelValue","onUpdate:modelValue","items"])])):T("",!0),i.questionnaireData&&i.services.length>0?(u(),b("div",to,[o(f,{class:"mt-6"},{default:s(()=>[l("span",so,K(i.questionnaireData.general.questions[0].question),1)]),_:2},1024),l("div",io,[(u(!0),b(D,null,J(i.services,y=>(u(),A(z,{key:y.uuid,variant:"outlined",color:i.selectedServiceUuid===y.uuid?"primary":"default",class:de(["ma-1",{"selected-chip":i.selectedServiceUuid===y.uuid}]),onClick:V=>j(y,i)},{default:s(()=>[h(K(y.name),1)]),_:2},1032,["color","onClick","class"]))),128))]),i.questionnaireData.servicesSection?(u(),b("div",ro,[o(f,null,{default:s(()=>[l("span",lo,K(i.questionnaireData.servicesSection.title||"Services détaillés"),1)]),_:2},1024),l("div",ao,[o(H,{variant:"accordion",multiple:""},{default:s(()=>[(u(!0),b(D,null,J(i.questionnaireData.servicesSection.questions,y=>(u(),A(L,{key:y.category,title:y.question},{default:s(()=>[o(m,null,{default:s(()=>[l("div",no,[(u(!0),b(D,null,J(i.keywordsByCategory[y.category]||[],V=>(u(),A(z,{key:V.uuid,variant:"outlined",class:de(["ma-1",{"selected-chip":i.selectedKeywords.has(V.uuid)}]),color:i.selectedKeywords.has(V.uuid)?"success":"default",onClick:le=>G(V,i)},{default:s(()=>[h(K(V.value),1)]),_:2},1032,["color","onClick","class"]))),128))])]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:2},1024)])])):T("",!0),i.questionnaireData.habitudesSection?(u(),b("div",uo,[o(f,null,{default:s(()=>[l("span",co,K(i.questionnaireData.habitudesSection.title||"Habitudes et pratiques"),1)]),_:2},1024),l("div",po,[o(H,{variant:"accordion",multiple:""},{default:s(()=>[(u(!0),b(D,null,J(i.questionnaireData.habitudesSection.questions,y=>(u(),A(L,{key:y.category,title:y.question},{default:s(()=>[o(m,null,{default:s(()=>[l("div",mo,[(u(!0),b(D,null,J(i.keywordsByCategory[y.category]||[],V=>(u(),A(z,{key:V.uuid,variant:"outlined",class:de(["ma-1",{"selected-chip":i.selectedKeywords.has(V.uuid)}]),color:i.selectedKeywords.has(V.uuid)?"success":"default",onClick:le=>G(V,i)},{default:s(()=>[h(K(V.value),1)]),_:2},1032,["color","onClick","class"]))),128))])]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:2},1024)])])):T("",!0)])):N===0?(u(),b("div",vo,[o(te,{indeterminate:"",color:"primary",class:"mb-4"}),a[3]||(a[3]=l("p",null,"Chargement des services et mots-clés...",-1))])):N>0&&!i.sector?(u(),b("div",fo,[...a[4]||(a[4]=[l("p",{class:"text-grey"}," Sélectionnez un secteur d'activité pour afficher les services disponibles ",-1)])])):T("",!0)]))),128)),l("div",yo,[P.value.length<3?(u(),A(_,{key:0,onClick:x,color:"primary",variant:"outlined","prepend-icon":"mdi-plus"},{default:s(()=>[...a[5]||(a[5]=[h(" Ajouter une nouvelle activité ",-1)])]),_:1})):T("",!0)]),l("div",null,[o(_,{color:"primary",onClick:a[0]||(a[0]=i=>re())},{default:s(()=>[...a[6]||(a[6]=[h("Valider ma selection",-1)])]),_:1})])])]),_:1})):T("",!0)]}),_:1},8,["modelValue"]),(u(),A(me,{to:"body"},[o(ke,{redirection:"dashboard2",modelValue:X.value,"onUpdate:modelValue":a[2]||(a[2]=g=>X.value=g)},null,8,["modelValue"])]))],64)}}}),go=ve(bo,[["__scopeId","data-v-ca60808d"]]),_o={class:"position-relative"},ho=["src"],qo={class:"mx-sm-5"},ko={class:"d-sm-flex align-center justify-sm-start justify-center"},xo={class:"text-sm-left text-center"},Vo=["src"],wo={class:"ml-sm-4 text-sm-left text-center"},So={class:"text-h3 font-weight-semibold mb-1 my-sm-0 my-2"},Ao={class:"text-h6 font-weight-medium text-grey100"},Uo={class:"d-flex flex-column justify-center align-center gap-4"},zo={key:1},Eo={key:0},Po={class:"d-sm-flex d-none"},Co=se({__name:"ProfileBannerOne",setup(ee){const{bgPicture:F}=ne(ae()),d=Q(null),w=Q(!1),E=Q(!1),k=Q(null),{user:C,isProfileCreated:U,professionalUser:q}=ne(ae());fe();const{changeProfessionalBannerPicture:R,getProfessionalProfileDetails:oe}=ye(),P=localStorage.getItem("is-profile-verified"),ie=()=>{var $;return($=k.value)==null?void 0:$.click()},M=async $=>{var G;const v=$.target;if(!((G=v.files)!=null&&G.length))return;const j=v.files[0];await R(j)},X=Ee([{tab:"My Profile",icon:Qe,href:"/apps/userprofile/one"},{tab:"Teams",icon:Re,href:"/apps/userprofile/one/teams"},{tab:"Projects",icon:$e,href:"/apps/userprofile/one/projects"},{tab:"Connection",icon:Oe,href:"/apps/userprofile/one/connection"}]),Y=()=>{w.value=!w.value};return he(()=>{oe()}),($,v)=>{var f,z;const j=p("v-btn"),G=p("v-avatar"),n=p("v-chip"),x=p("v-col"),Z=p("v-row"),re=p("v-tab"),r=p("v-tabs"),a=p("v-card-item"),S=p("v-card");return u(),b(D,null,[o(j,null,{default:s(()=>[...v[6]||(v[6]=[h("Revenir à votre Dashboard",-1)])]),_:1}),l("div",_o,[l("img",{src:(f=t(q))!=null&&f.picture?(z=t(q))==null?void 0:z.picture:t(F),alt:"profile",class:"w-100 max-h-400 rounded-md obj-cover"},null,8,ho),l("button",{onClick:ie,class:"profile-banner__change-image"},"+"),l("input",{type:"file",ref_key:"fileInput",ref:k,onChange:M,accept:"image/*",style:{display:"none"}},null,544)]),l("div",qo,[o(S,{elevation:"10",class:"overflow-hidden mt-sm-n13 mt-n5"},{default:s(()=>[o(a,{class:"pb-0"},{default:s(()=>[o(Z,{class:"mt-1 justify-space-between"},{default:s(()=>[o(x,{cols:"12",md:"6",sm:"9",class:"pt-0"},{default:s(()=>{var m,L;return[l("div",ko,[l("div",xo,[o(G,{size:"100",class:"userImage position-relative overflow-visible"},{default:s(()=>[l("img",{src:t(Pe),width:"100",alt:"Mathew",class:"rounded-circle"},null,8,Vo),o(G,{size:"26",class:"bg-primary position-absolute plus"},{default:s(()=>[o(t(Ce),{size:"16","stroke-width":"2"})]),_:1})]),_:1})]),l("div",wo,[l("h5",So,[h(K(((m=t(C))==null?void 0:m.username)??"Définir votre nom complet")+" ",1),o(n,{color:"primary",class:"bg-lightprimary font-weight-semibold ml-2 mt-n1",variant:"outlined",size:"x-small"},{default:s(()=>[...v[7]||(v[7]=[h("Admin",-1)])]),_:1})]),l("span",Ao,K(((L=t(C))==null?void 0:L.category)??"Aucune phrase inspirante définie"),1)])])]}),_:1}),o(x,{cols:"12",md:"6",sm:"3",class:"d-flex align-center justify-center justify-sm-end order-sm-third"},{default:s(()=>[l("div",Uo,[l("div",null,[t(U)?T("",!0):(u(),A(j,{key:0,color:"primary",size:"large",class:"w-100",onClick:v[0]||(v[0]=m=>Y())},{default:s(()=>[...v[8]||(v[8]=[h("Editez votre profil",-1)])]),_:1})),t(U)&&t(P)?(u(),b("div",zo,[o(j,{color:"primary",size:"large",class:"w-100",onClick:v[1]||(v[1]=m=>Y())},{default:s(()=>[...v[9]||(v[9]=[h("Modifier votre profil",-1)])]),_:1}),o(j,{color:"success",size:"large",class:"w-100",onClick:v[2]||(v[2]=m=>E.value=!0)},{default:s(()=>[...v[10]||(v[10]=[h("Ajouter votre secteur d'activité",-1)])]),_:1})])):T("",!0)]),t(U)&&!t(P)?(u(),b("p",Eo,[...v[11]||(v[11]=[l("span",{style:{fontSize:"14px"}}," Nous reviendrons dans les 48heures...",-1)])])):T("",!0)])]),_:1})]),_:1}),o(Z,null,{default:s(()=>[o(x,{md:"12",class:"profile-one"},{default:s(()=>[o(r,{modelValue:d.value,"onUpdate:modelValue":v[3]||(v[3]=m=>d.value=m),color:"primary",dark:"",class:"profiletab"},{default:s(()=>[(u(!0),b(D,null,J(X.value,m=>(u(),A(re,{key:m.tab,to:m.href,class:"text-grey100 mr-sm-3"},{default:s(()=>[(u(),A(Ie(m.icon),{size:"20","stroke-width":"1.5",class:"mr-sm-2 text-h6 text-grey100 icon"})),l("span",Po,K(m.tab),1)]),_:2},1032,["to"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),(u(),A(me,{to:"body"},[o(Ze,{openModal:w.value,"onUpdate:openModal":v[4]||(v[4]=m=>w.value=m)},null,8,["openModal"]),o(go,{class:"mt-6",pageActuelle:E.value,"onUpdate:pageActuelle":v[5]||(v[5]=m=>E.value=m)},null,8,["pageActuelle"])]))],64)}}}),Io=ve(Co,[["__scopeId","data-v-a23a2fb9"]]),Qo={class:"d-flex"},Ro={class:"my-5 text-subtitle-1 lh-md font-weight-medium"},$o=se({__name:"IntroCard",setup(ee){const{professionalUser:F}=ne(ae());return(d,w)=>{const E=p("v-divider"),k=p("v-card-item"),C=p("v-card"),U=p("v-col"),q=p("v-row");return u(),A(q,null,{default:s(()=>[o(U,{cols:"12"},{default:s(()=>[o(C,{elevation:"10",class:"bg-surface"},{default:s(()=>[o(k,null,{default:s(()=>{var R;return[l("div",Qo,[l("div",null,[w[0]||(w[0]=l("h4",{class:"text-h5"},"A mon propos",-1)),l("p",Ro,K((R=t(F))==null?void 0:R.name),1)]),o(E,{class:"mb-4"})])]}),_:1})]),_:1})]),_:1})]),_:1})}}}),Oo=ve($o,[["__scopeId","data-v-ea1cf61a"]]),Do={class:"d-flex align-center mb-5"},To={class:"d-flex align-center mb-5"},Lo=se({__name:"TeamsCard",setup(ee){return(F,d)=>{const w=p("v-avatar"),E=He,k=p("v-card-item"),C=p("v-card"),U=p("v-col"),q=p("v-row");return u(),A(q,null,{default:s(()=>[o(U,{cols:"12"},{default:s(()=>[o(C,{elevation:"10",class:"bg-surface"},{default:s(()=>[o(k,null,{default:s(()=>[d[3]||(d[3]=l("h4",{class:"text-h5 mb-4"},"Teams",-1)),l("div",Do,[o(w,{size:"40",class:"bg-lightinfo"},{default:s(()=>[o(t(De),{size:"20","stroke-width":"1.5",class:"text-info"})]),_:1}),d[0]||(d[0]=l("div",{class:"ml-3"},[l("h5",{class:"text-subtitle-1 font-weight-semibold text-grey200 mb-1"}," Backend Developer "),l("p",{class:"text-subtitle-1 font-weight-medium text-grey100"},"120 members")],-1))]),l("div",To,[o(w,{size:"40",class:"bg-lightprimary"},{default:s(()=>[o(t(Te),{size:"20","stroke-width":"1.5",class:"text-primary"})]),_:1}),d[1]||(d[1]=l("div",{class:"ml-3"},[l("h5",{class:"text-subtitle-1 font-weight-semibold text-grey200 mb-1"}," React Developer "),l("p",{class:"text-subtitle-1 font-weight-medium text-grey100"},"86 members")],-1))]),l("div",null,[o(E,{to:"/",class:"text-primary font-weight-semibold text-subtitle-1 text-decoration-none"},{default:s(()=>[...d[2]||(d[2]=[h("View all",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})}}}),Bo={class:"mx-sm-4"},tt=se({__name:"index",setup(ee){return(F,d)=>{const w=p("v-col"),E=p("v-row");return u(),b(D,null,[o(Io),l("div",Bo,[o(E,{class:"mt-4"},{default:s(()=>[o(w,{cols:"12",lg:"4",md:"4"},{default:s(()=>[o(Oo),o(Lo)]),_:1})]),_:1})])],64)}}});export{tt as default};
