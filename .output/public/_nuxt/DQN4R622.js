import{h,cj as t,u as P}from"./tuwxSyZN.js";import{u as m}from"./Mu8HO9gZ.js";import{u as g}from"./DJAGGwEC.js";const C=()=>{const{addError:n,addSuccess:u}=m(),a=g("token"),p=h(),{setProfessionalUser:i,sendNewPhotoOnProfile:f}=p,s=P(),l=localStorage.getItem("professional-uuid"),d=async e=>{try{const{data:r}=await t.post(`${s.public.apiUrl}/professional/create`,e,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(r)return u("Modification du profil professionnel réussie !"),c(),r}catch(r){n(r.response.data)}},c=async()=>{try{const{data:e}=await t.get(`${s.public.apiUrl}/professional`,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(e)return i(e),e}catch{n({message:"Une erreur est survenue lors de la récupération du profil."})}};return{createProfessionalProfile:d,getProfessionalProfile:c,getProfessionalProfileDetails:async()=>{try{const{data:e}=await t.get(`${s.public.apiUrl}/professional/${l}`,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(e)return i(e),e}catch{n({message:"Une erreur est survenue lors de la récupération du profil."})}},patchProfessionnalProfileDetails:async e=>{try{const{data:r}=await t.patch(`${s.public.apiUrl}/professional/${l}`,{newProfile:e,headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"}});if(r)return i(r),r}catch{n({message:"Une erreur est survenue lors de la récupération du profil."})}},changeProfessionalBannerPicture:async e=>{const r=new FormData;r.append("file",e);try{const{data:o}=await t.patch(`${s.public.apiUrl}/professional/${l}/picture`,r,{headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"multipart/form-data"}});return o!=null&&o.imageUrl&&f(o.imageUrl),o}catch(o){console.error(o),alert("Une erreur est survenue lors de la mise à jour du profil")}}}};export{C as u};
