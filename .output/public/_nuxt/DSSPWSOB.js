import{L,B as b}from"./DmihCrmn.js";import{d as g,c as a,b as n,f as t,m as i,y as h,C as B,bS as E,k as o,o as I,bR as R,e as f,n as C,t as V,w as p}from"./DRerZXE8.js";import{L as M}from"./Ct2VQ-Ww.js";import{u as N}from"./c2vrdqAN.js";import"./DNy8rhbs.js";import"./C9fps2xW.js";import"./-XPu_Rvd.js";import"./DaO5vHFs.js";const $=""+new URL("check-email.BWRWztMi.jpg",import.meta.url).href,j=""+new URL("good-verification.DMFiIdFa.svg",import.meta.url).href,S={class:"loader__container"},U=["src"],z=g({__name:"Loader",setup(k){return(m,u)=>(n(),a("div",S,[t("img",{src:i(M),alt:"",class:"loader__img"},null,8,U)]))}}),D=h(z,[["__scopeId","data-v-fe2c8952"]]),F={class:"verify-email__container"},P={class:"verify-email__message"},W={key:0},A={key:1},T=["src"],q={class:"text-green-600"},G={class:"mt-6 text-sm"},H=["src"],J=["src"],K=g({__name:"[token]",setup(k){const m=B(),u=E(),w=m.params.token,{checkEmail:x}=N(),_=o(!0),r=o(!1),y=o(""),c=o(10);let l;return I(async()=>{var d,s,v;try{const e=await x(w);if((e==null?void 0:e.message)==="Email verified"||(d=e==null?void 0:e.message)!=null&&d.toLowerCase().includes("verified"))r.value=!0,setTimeout(()=>u.push("/auth/login"),1e4);else throw new Error((e==null?void 0:e.message)||"Erreur inconnue")}catch(e){y.value=((v=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:v.message)||(e==null?void 0:e.message)}finally{_.value=!1}l=window.setInterval(()=>{c.value>0&&r.value?c.value--:clearInterval(l)},1e3)}),R(()=>{clearInterval(l)}),(d,s)=>(n(),a("div",F,[t("div",P,[_.value?(n(),a("div",W,[f(D)])):r.value?(n(),a("div",A,[t("img",{src:i(j),alt:"",width:"70"},null,8,T),s[2]||(s[2]=t("h1",{class:"text-2xl font-bold mb-4"},"Bonjour à toi,",-1)),t("div",q,[s[0]||(s[0]=t("h3",null,"Nous venons de vérifier ton email.",-1)),s[1]||(s[1]=t("h3",{class:"mt-2 text-sm"},"L'aventure commence ici",-1)),t("p",G,V(`Vous allez être rediriger vers la page d'identification dans ${c.value} secondes `),1)])])):C("",!0)]),f(b,null,{"bg-image":p(()=>[t("img",{src:i($),alt:"",style:{width:"100%",height:"100%","object-fit":"cover","border-radius":"5px"}},null,8,H)]),logo:p(()=>[t("img",{src:i(L),alt:"",class:"manie-logo"},null,8,J)]),_:1})]))}}),oe=h(K,[["__scopeId","data-v-606a0d9c"]]);export{oe as default};
