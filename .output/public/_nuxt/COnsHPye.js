import{d as v,z as _,b$ as g,l as n,o as x,c as t,a as o,e as i,t as k}from"./RV8HHTPq.js";import{u as h}from"./Bca-y4gR.js";import"./nI9jmXyo.js";import"./DCvGJmM2.js";const y={class:"p-8 text-center"},E={key:0},w={key:1,class:"text-green-600"},b={key:2,class:"text-red-600"},z=v({__name:"[token]",setup(B){const d=_(),m=g(),p=d.params.token,{checkEmail:f}=h(),r=n(!0),c=n(!1),l=n("");return x(async()=>{var a,s,u;try{const e=await f(p);if((e==null?void 0:e.message)==="Email verified"||(a=e==null?void 0:e.message)!=null&&a.toLowerCase().includes("verified"))c.value=!0,setTimeout(()=>m.push("/auth/login"),3e3);else throw new Error((e==null?void 0:e.message)||"Erreur inconnue")}catch(e){l.value=((u=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:u.message)||(e==null?void 0:e.message)}finally{r.value=!1}}),(a,s)=>(o(),t("div",y,[s[1]||(s[1]=i("h1",{class:"text-2xl font-bold mb-4"},"Vérification de l'email",-1)),r.value?(o(),t("div",E,"⏳ Vérification en cours...")):c.value?(o(),t("div",w,s[0]||(s[0]=[i("p",null,"✅ ✅ Email vérifié avec succès !",-1),i("p",{class:"mt-2 text-sm"},"Redirection vers la page de connexion dans 3 secondes...",-1)]))):(o(),t("div",b," ❌ Erreur de vérification : "+k(l.value||"Lien invalide ou expiré."),1))]))}});export{z as default};
