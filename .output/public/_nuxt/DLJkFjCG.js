/* empty css        */import{_ as G}from"./Dhczp8Zt.js";import{E as J,G as K,a as Q,o as O,D as M,k as D,r as a,c as i,b as n,e as t,w as e,f as s,F as C,q as $,l as f,g as B,t as v,B as W,m as I,H as V,d as N,I as X,n as y,J as Y,K as Z,y as tt}from"./DFIvP0J7.js";import{f as q}from"./Duiz8y7J.js";import"./CQ5i11QA.js";const E=J({id:"chat",state:()=>({chats:[],chatContent:1}),getters:{},actions:{async fetchChats(){try{const c=await Q.get("/api/data/chat/ChatData");this.chats=c.data}catch(c){alert(c),console.log(c)}},SelectChat(c){this.chatContent=c},sendMsg(c,r){const p={id:c,msg:r,type:"text",attachments:[],createdAt:K(new Date,{seconds:1}),senderId:c};this.chats=this.chats.filter(o=>o.id===c?{...o,...o.chatHistory.push(p)}:o)}}}),et={class:"px-6 pt-3"},st=["src"],at={key:1,class:"text-subtitle-2 textPrimary mt-1 text-truncate w-100"},nt={class:"d-flex flex-column text-right w-25"},ot={class:"textPrimary text-subtitle-2"},F={__name:"ChatListing",setup(c){const r=E();O(()=>{r.fetchChats()});const o=M(()=>r.chats),d=D(""),l=M(()=>o.value.filter(h=>h.name.toLowerCase().includes(d.value.toLowerCase()))),k=h=>V.last(h.chatHistory).createdAt,g=D([{title:"Sort by time"},{title:"Sort by Unread"},{title:"Mark all as read"}]);return(h,_)=>{const x=a("v-text-field"),S=a("ChevronDownIcon"),b=a("v-btn"),P=a("v-list-item-title"),z=a("v-list-item"),A=a("v-list"),H=a("v-menu"),w=a("v-sheet"),L=a("v-avatar"),U=a("v-badge"),u=a("perfect-scrollbar");return n(),i(C,null,[t(w,null,{default:e(()=>[s("div",et,[t(x,{variant:"outlined",modelValue:d.value,"onUpdate:modelValue":_[0]||(_[0]=m=>d.value=m),"append-inner-icon":"mdi-magnify",placeholder:"Search Contact","hide-details":"",density:"compact"},null,8,["modelValue"]),t(H,null,{activator:e(({props:m})=>[t(b,W({color:"white",variant:"flat",class:"mt-4 text-medium-emphasis"},m),{default:e(()=>[_[1]||(_[1]=B("Recent Chats ",-1)),t(S,{size:"18",class:"ml-2"})]),_:2,__:[1]},1040)]),default:e(()=>[t(A,{class:"elevation-10"},{default:e(()=>[(n(!0),i(C,null,$(g.value,(m,j)=>(n(),f(z,{key:j,value:j},{default:e(()=>[t(P,null,{default:e(()=>[B(v(m.title),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1}),t(u,{class:"lgScroll h-100"},{default:e(()=>[t(A,null,{default:e(()=>[(n(!0),i(C,null,$(l.value,m=>(n(),f(z,{value:m.id,color:"primary",class:"text-no-wrap chatItem",key:m.id,lines:"two",active:I(r).chatContent===m.id,onClick:j=>I(r).SelectChat(m.id)},{prepend:e(()=>[t(L,null,{default:e(()=>[s("img",{src:m.thumb,alt:"pro",width:"50"},null,8,st)]),_:2},1024),t(U,{class:"badg-dot",dot:"",color:m.status==="away"?"warning":m.status==="busy"?"error":m.status==="online"?"success":"containerBg"},null,8,["color"])]),append:e(()=>[s("div",nt,[s("small",ot,v(I(q)(new Date(k(m)),{addSuffix:!1})),1)])]),default:e(()=>[t(P,{class:"text-subtitle-1 textPrimary w-100 font-weight-semibold"},{default:e(()=>[B(v(m.name),1)]),_:2},1024),m.chatHistory.slice(-1)[0].type=="img"?(n(),f(w,{key:0},{default:e(()=>_[2]||(_[2]=[s("small",{class:"textPrimary text-subtitle-2"},"Sent a Photo",-1)])),_:1,__:[2]})):(n(),i("div",at,v(m.chatHistory.slice(-1)[0].msg),1))]),_:2},1032,["value","active","onClick"]))),128))]),_:1})]),_:1})],64)}}},lt=N({__name:"ChatSendMsg",setup(c){const r=D(""),p=E();function o(d){console.log(d),d.length!==0&&(p.sendMsg(p.chatContent,r.value),r.value="")}return(d,l)=>{const k=a("MoodSmileIcon"),g=a("v-btn"),h=a("v-text-field"),_=a("SendIcon"),x=a("PhotoIcon"),S=a("PaperclipIcon");return n(),i("form",{class:"d-flex align-center pa-4",onSubmit:l[1]||(l[1]=X(b=>o(r.value),["prevent"]))},[t(g,{icon:"",variant:"text",class:"text-medium-emphasis"},{default:e(()=>[t(k,{size:"24"})]),_:1}),t(h,{variant:"solo","hide-details":"",modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=b=>r.value=b),color:"primary",class:"shadow-none",density:"compact",placeholder:"Type a Message"},null,8,["modelValue"]),t(g,{icon:"",variant:"text",type:"submit",class:"text-medium-emphasis",disabled:!r.value},{default:e(()=>[t(_,{size:"20"})]),_:1},8,["disabled"]),t(g,{icon:"",variant:"text",class:"text-medium-emphasis"},{default:e(()=>[t(x,{size:"20"})]),_:1}),t(g,{icon:"",variant:"text",class:"text-medium-emphasis"},{default:e(()=>[t(S,{size:"20"})]),_:1})],32)}}}),it={key:0,class:"pa-6"},ct={class:"text-h6 mb-3"},rt={key:0},dt=["src"],ut={class:"text-h6 mb-3 mt-7"},_t=["src"],mt={class:"pl-4"},pt={class:"text-subtitle-1 font-weight-semibold"},vt={class:"text-subtitle-2 mt-1"},R=N({__name:"ChatInfo",props:{chatDetail:Object},setup(c){const r=c,p=M(()=>{var d;return V.uniq(V.flatten((d=r.chatDetail)==null?void 0:d.chatHistory.map(l=>l.attachment))).length}),o=M(()=>{var d;return V.uniq(V.flatten((d=r.chatDetail)==null?void 0:d.chatHistory.map(l=>(l==null?void 0:l.type)==="img"?l.msg:null))).length-1});return(d,l)=>{const k=a("v-avatar"),g=a("v-sheet"),h=a("v-alert");return c.chatDetail?(n(),i("div",it,[s("h6",ct,"Media ("+v(o.value)+")",1),(n(!0),i(C,null,$(c.chatDetail.chatHistory,_=>(n(),i("div",{key:_.id},[_.type=="img"?(n(),i("div",rt,[s("img",{src:_.msg,alt:"img",width:"100"},null,8,dt)])):y("",!0)]))),128)),s("h6",ut,"Attachments ("+v(p.value)+")",1),p.value!=0?(n(),f(g,{key:0},{default:e(()=>[(n(!0),i(C,null,$(c.chatDetail.chatHistory,_=>(n(),i("div",{key:_.id},[(n(!0),i(C,null,$(_.attachment,x=>(n(),i("div",{class:"d-flex align-center mt-7",key:x.file},[t(k,{class:"rounded-md bg-lightsecondary",size:"48"},{default:e(()=>[s("img",{width:"24",alt:"file",src:x.icon},null,8,_t)]),_:2},1024),s("div",mt,[s("h6",pt,v(x.file),1),s("h5",vt,v(x.fileSize),1)])]))),128))]))),128))]),_:1})):(n(),f(g,{key:1},{default:e(()=>[t(h,{color:"error",type:"warning",density:"compact",variant:"tonal",class:"text-subtitle-1"},{default:e(()=>l[0]||(l[0]=[B(" No Attachments Found! ",-1)])),_:1,__:[0]})]),_:1}))])):y("",!0)}}}),ht={key:0,class:"customHeight"},ft={class:"d-flex align-center gap-3 pa-4 justify-space-between"},gt={class:"d-flex gap-2 align-center"},xt=["src"],yt={class:"text-h5 mb-n1"},bt={class:"textPrimary"},wt={class:"d-flex"},Ct={class:"d-flex"},kt={class:"w-100",style:{height:"calc(100vh - 360px)"}},Dt={key:0,class:"justify-end d-flex text-end mb-1"},$t={key:0,class:"text-medium-emphasis text-subtitle-2"},It={class:"text-body-1"},St=["src"],Vt={key:1,class:"d-flex align-items-start gap-3 mb-1"},Mt=["src"],Pt={key:0,class:"text-medium-emphasis text-subtitle-2"},zt={class:"text-body-1"},At=["src"],Ht={key:0,class:"right-sidebar d-lg-flex d-none"},Bt=N({__name:"ChatDetail",setup(c){const{lgAndUp:r}=Y(),p=E();O(()=>{p.fetchChats()});const o=M(()=>p.chats[p.chatContent-1]),d=D(!!r),l=D(!1);function k(){d.value=!d.value}return(g,h)=>{const _=a("v-avatar"),x=a("v-badge"),S=a("PhoneIcon"),b=a("v-btn"),P=a("VideoPlusIcon"),z=a("Menu2Icon"),A=a("DotsVerticalIcon"),H=a("v-divider"),w=a("v-sheet"),L=a("perfect-scrollbar"),U=a("v-navigation-drawer");return n(),i(C,null,[o.value?(n(),i("div",ht,[s("div",null,[s("div",ft,[s("div",gt,[t(_,null,{default:e(()=>[s("img",{src:o.value.thumb,alt:"pro",width:"50"},null,8,xt)]),_:1}),t(x,{class:"badg-dotDetail",dot:"",color:o.value.status==="away"?"warning":o.value.status==="busy"?"error":o.value.status==="online"?"success":"containerBg"},null,8,["color"]),s("div",null,[s("h5",yt,v(o.value.name),1),s("small",bt,v(o.value.status),1)])]),s("div",wt,[t(b,{icon:"",variant:"text",class:"text-medium-emphasis"},{default:e(()=>[t(S,{size:"24"})]),_:1}),t(b,{icon:"",variant:"text",class:"text-medium-emphasis"},{default:e(()=>[t(P,{size:"24"})]),_:1}),t(b,{icon:"",variant:"text",class:"text-medium-emphasis d-lg-flex d-none",onClick:k},{default:e(()=>[t(z,{size:"24"})]),_:1}),t(b,{icon:"",variant:"text",class:"text-medium-emphasis d-lg-none d-flex",onClick:h[0]||(h[0]=u=>l.value=!l.value)},{default:e(()=>[t(A,{size:"24"})]),_:1})])]),t(H),t(L,{class:"rightpartHeight h-100"},{default:e(()=>[s("div",Ct,[s("div",kt,[(n(!0),i(C,null,$(o.value.chatHistory,u=>(n(),i("div",{key:u.id,class:"pa-5"},[o.value.id===u.senderId?(n(),i("div",Dt,[s("div",null,[u.createdAt?(n(),i("small",$t,v(I(q)(new Date(u.createdAt),{addSuffix:!1}))+" ago",1)):y("",!0),u.type=="text"?(n(),f(w,{key:1,class:"bg-lightprimary rounded-md px-3 py-2 mb-1"},{default:e(()=>[s("p",It,v(u.msg),1)]),_:2},1024)):y("",!0),u.type=="img"?(n(),f(w,{key:2,class:"mb-1"},{default:e(()=>[s("img",{src:u.msg,class:"rounded-md",alt:"pro",width:"250"},null,8,St)]),_:2},1024)):y("",!0)])])):(n(),i("div",Vt,[t(_,null,{default:e(()=>[s("img",{src:o.value.thumb,alt:"pro",width:"40"},null,8,Mt)]),_:1}),s("div",null,[u.createdAt?(n(),i("small",Pt,v(o.value.name)+", "+v(I(q)(new Date(u.createdAt),{addSuffix:!1}))+" ago ",1)):y("",!0),u.type=="text"?(n(),f(w,{key:1,class:"bg-lightsecondary rounded-md px-3 py-2 mb-1"},{default:e(()=>[s("p",zt,v(u.msg),1)]),_:2},1024)):y("",!0),u.type=="img"?(n(),f(w,{key:2,class:"mb-1"},{default:e(()=>[s("img",{src:u.msg,class:"rounded-md",alt:"pro",width:"250"},null,8,At)]),_:2},1024)):y("",!0)])]))]))),128))]),d.value?(n(),i("div",Ht,[t(w,null,{default:e(()=>[t(R,{chatDetail:o.value},null,8,["chatDetail"])]),_:1})])):y("",!0)])]),_:1})]),t(H),t(lt)])):y("",!0),t(U,{modelValue:l.value,"onUpdate:modelValue":h[1]||(h[1]=u=>l.value=u),location:"right",class:"drawer-top-zero",temporary:"",width:"350"},{default:e(()=>[t(R,{chatDetail:o.value},null,8,["chatDetail"])]),_:1},8,["modelValue"])],64)}}}),Nt={class:"d-flex gap-2 align-center pa-6"},Lt=["src"],T={__name:"ChatProfile",setup(c){return(r,p)=>{const o=a("v-avatar"),d=a("v-badge"),l=a("v-sheet");return n(),f(l,null,{default:e(()=>[s("div",Nt,[t(o,{size:"large"},{default:e(()=>[s("img",{src:I(Z),alt:"pro",width:"54"},null,8,Lt)]),_:1}),t(d,{class:"badg-dotDetail",dot:"",color:"success"}),p[0]||(p[0]=s("div",null,[s("h5",{class:"text-subtitle-1 font-weight-semibold"},"Mike Nielsen"),s("h6",{class:"text-subtitle-2"},"Designer")],-1))])]),_:1})}}},Ut={class:"no-scrollbar"},jt=N({__name:"index",setup(c){return D({title:"Chat app"}),D([{text:"Messenger",disabled:!0,href:"#"}]),(r,p)=>{const o=a("v-card");return n(),f(o,{elevation:"10"},{default:e(()=>[t(G,null,{leftpart:e(()=>[s("div",Ut,[t(T),t(F)])]),rightpart:e(()=>[t(Bt)]),mobileLeftContent:e(()=>[t(T),t(F)]),_:1})]),_:1})}}}),Ot=tt(jt,[["__scopeId","data-v-40c55e1a"]]);export{Ot as default};
