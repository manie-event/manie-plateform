import{_ as Ve}from"./BJF2BWlU.js";import{d as te,h as le,s as ae,v as ge,k as C,z as be,o as we,r as d,c as f,b as a,F as T,e as o,l as S,w as s,bL as Se,n as B,f as l,g as b,m as i,t as j,x as G,bM as Ae,T as me,b2 as ue,K as de,y as ve,B as Ue,bN as ze,bO as Ee,W as Pe,S as Ce,bP as Ie,bQ as Qe,bR as $e,bS as Re,bT as Oe}from"./Y2cM3ybq.js";import{B as De}from"./CF422juk.js";import{u as Te}from"./D9n7K6bm.js";import{c as ce,a as D,d as Be,e as pe,f as Le}from"./B5AEgETX.js";import{_ as Fe}from"./CQU92EJ-.js";import{u as fe,A as qe}from"./DhVwOpD6.js";import{u as ye}from"./Dmm6UkQy.js";import{M as he}from"./9yHra7Iw.js";import{u as ke}from"./BmmcoTAk.js";import{_ as Me}from"./BSZCEtTX.js";import"./DP4NUVtV.js";import"./yA45zEN9.js";import"./D3kLc0Nx.js";const je=[{label:"Auvergne Rhône-Alpes",value:"rhoneAlpes"},{label:"Ain",value:"ain"},{label:"Allier",value:"allier"},{label:"Ardèche",value:"ardeche"},{label:"Cantal",value:"cantal"},{label:"Drôme",value:"drome"},{label:"Haute-Savoie",value:"hauteSavoie"},{label:"Haute Loire",value:"hauteLoire"},{label:"Isère",value:"isere"},{label:"Loire",value:"loire"},{label:"Puy De Dôme",value:"puyDeDome"},{label:"Rhône",value:"rhone"},{label:"Savoie",value:"savoie"}],He={class:"d-flex gap-2 flex-column justify-start align-items-start"},Ne={class:"d-flex align-center gap-2"},Ke={class:"mt-4"},Ge={class:"my-8"},We={key:0,class:"d-flex justify-space-between"},Je={key:1},Ye=te({__name:"EditProfessionalProfil",props:{openModal:{type:Boolean},openModalModifiers:{}},emits:["update:openModal"],setup(X){var H;const M=le(),{professionalUser:c}=ae(M),{createProfessionalProfile:x,patchProfessionnalProfileDetails:A}=ye(),{getSectors:q}=fe(),z=ge(X,"openModal"),V=C([]),_=C(!1),{addError:E,addSuccess:oe}=ke(),P=C(1),se=C(qe),$=C(je),L=localStorage.getItem("is-profile-verified"),p=C(0),R=C(!1),N=be(()=>p.value*7),W=be(()=>V.value.reduce((y,e)=>(e.question&&e.reponse&&(y[e.question]=e.reponse),y),null)),J=ce({name:D().min(2).required("Le nom est requis"),siret:D().required("Le SIRET est requis").length(14,"Le SIRET doit contenir 14 caractères"),address:D().required("L'adresse est requise"),bio:D().required("La bio est requise"),mainActivity:D().required("Activité requise"),mainInterlocutor:D().required("L'interlocuteur principal est requis"),experience:pe().min(0,"L'expérience doit être positive").required("L'expérience est requise"),geographicArea:D().required("La zone géographique est requise"),certification:D(),minimumReservationPeriod:pe().min(0,"La période de réservation doit être positive"),deposit:Le(),depositAmount:pe().min(0,"Le montant de l'acompte doit être positif"),billingPeriod:D().required("La période de facturation est requise"),links:Be().of(ce({type:D(),value:D().url("URL non valide")})),faq:ce({question:D(),reponse:D()})}),{values:u,errors:U,resetForm:Z}=Te({validationSchema:J,initialValues:{name:"",siret:"",address:"",bio:"",mainActivity:"Veuillez choisir votre activité",mainInterlocutor:"",experience:0,geographicArea:((H=$.value[0])==null?void 0:H.label)??"",faq:{},minimumReservationPeriod:0,certification:"",deposit:!1,depositAmount:0,billingPeriod:"beforeEvent",links:[]},validateOnMount:!1,keepValuesOnUnmount:!0}),ie=()=>{u.links.push({type:"",value:""})},r=y=>{u.links.length>0&&u.links.splice(y,1)},t=()=>{V.value.push({question:"",reponse:""})},h=y=>{V.value.length>=0&&V.value.splice(y,1)},v=()=>{q(u.mainActivity)},I=async y=>{try{const e={...y,faq:W.value||{},minimumReservationPeriod:N.value};(await x(e)).message==="Professional created"?(oe("Votre profil a été envoyé pour être soumi à vérification"),z.value=!1,R.value=!0):E({message:"La mise à jour du profil a échoué."})}catch{E({message:"Erreur lors de la mise à jour du profil."})}},w=async y=>{try{const e={...y,faq:W.value||{},minimumReservationPeriod:N.value};(await A(e)).message==="Professional updated"?(oe("Votre profil a été modifié avec success"),z.value=!1,R.value=!0):E({message:"La mise à jour du profil a échoué."})}catch{E({message:"Erreur lors de la mise à jour du profil."})}};return we(()=>{var y,e;c.value&&(Z({values:{name:c.value.name??"",siret:c.value.siret??"",address:c.value.address??"",bio:c.value.bio??"",mainActivity:c.value.mainActivity??"Veuillez choisir votre activité",mainInterlocutor:c.value.mainInterlocutor??"",experience:c.value.experience??0,geographicArea:c.value.geographicArea??((y=$.value[0])==null?void 0:y.label)??"",certification:c.value.certification??"",minimumReservationPeriod:c.value.minimumReservationPeriod??0,deposit:c.value.deposit??!1,depositAmount:c.value.depositAmount??0,billingPeriod:c.value.billingPeriod??"beforeEvent",links:(e=c.value.links)!=null&&e.length?c.value.links:[{type:"",value:""}],faq:c.value.faq??{}}}),V.value=c.value.faqArray??[])}),(y,e)=>{const Q=d("v-divider"),O=d("v-text-field"),ee=d("v-select"),F=d("v-number-input"),m=d("v-checkbox"),Y=d("v-label"),k=d("v-switch"),g=d("v-btn"),ne=d("v-form"),xe=Ve;return a(),f(T,null,[o(De,{modelValue:z.value,"onUpdate:modelValue":e[16]||(e[16]=n=>z.value=n),fullscreen:"",transition:"dialog-bottom-transition"},{content:s(()=>[o(ne,{class:"px-4"},{default:s(()=>[Se(l("div",null,[o(Q,{class:"mt-6"},{default:s(()=>e[18]||(e[18]=[l("p",{class:"mt-6"},null,-1),b(" A propos de votre entreprise",-1)])),_:1,__:[18]}),o(O,{class:"mt-6",label:"Le nom de votre entreprise ?",modelValue:i(u).name,"onUpdate:modelValue":e[0]||(e[0]=n=>i(u).name=n),"error-messages":_.value?i(U).name:void 0},null,8,["modelValue","error-messages"]),o(O,{label:"Votre Numéro De Siret ?",modelValue:i(u).siret,"onUpdate:modelValue":e[1]||(e[1]=n=>i(u).siret=n),"error-messages":_.value?i(U).siret:void 0},null,8,["modelValue","error-messages"]),o(O,{label:"L'adresse complète du siège social ?",modelValue:i(u).address,"onUpdate:modelValue":e[2]||(e[2]=n=>i(u).address=n),"error-messages":_.value?i(U).address:void 0},null,8,["modelValue","error-messages"]),o(O,{label:"Une courte description de votre activité ?",modelValue:i(u).bio,"onUpdate:modelValue":e[3]||(e[3]=n=>i(u).bio=n),"error-messages":_.value?i(U).bio:void 0},null,8,["modelValue","error-messages"]),o(ee,{label:"Votre activité principale ?",modelValue:i(u).mainActivity,"onUpdate:modelValue":[e[4]||(e[4]=n=>i(u).mainActivity=n),v],items:se.value,"item-title":"label","item-value":"value","error-messages":_.value?i(U).mainActivity:void 0},null,8,["modelValue","items","error-messages"]),o(O,{label:"Le nom complet de l'interlocuteur principal ?",modelValue:i(u).mainInterlocutor,"onUpdate:modelValue":e[5]||(e[5]=n=>i(u).mainInterlocutor=n),"error-messages":_.value?i(U).mainInterlocutor:void 0},null,8,["modelValue","error-messages"]),o(F,{label:"Depuis combien d'année exercez-vous cette activité ?",modelValue:i(u).experience,"onUpdate:modelValue":e[6]||(e[6]=n=>i(u).experience=n),variant:"solo",min:0,"error-messages":_.value?i(U).experience:void 0},null,8,["modelValue","error-messages"]),o(Q,{class:"border-opacity-50 mb-6"},{default:s(()=>e[19]||(e[19]=[l("p",{class:"mb-6"},"A propos de votre activité",-1)])),_:1,__:[19]}),o(ee,{label:"Votre secteur géographique ?",modelValue:i(u).geographicArea,"onUpdate:modelValue":e[7]||(e[7]=n=>i(u).geographicArea=n),items:$.value,"item-title":"label","item-value":"value","error-messages":_.value?i(U).geographicArea:void 0},null,8,["modelValue","items","error-messages"]),o(O,{modelValue:i(u).certification,"onUpdate:modelValue":e[8]||(e[8]=n=>i(u).certification=n),label:"Labels & Certifications",variant:"outlined",placeholder:"exemple: Label AB (Bio)"},null,8,["modelValue"]),o(F,{variant:"solo",min:0,label:"Votre délai de réservation minimum (en semaine) ?",modelValue:p.value,"onUpdate:modelValue":e[9]||(e[9]=n=>p.value=n),"error-messages":_.value?i(U).minimumReservationPeriod:void 0},null,8,["modelValue","error-messages"]),o(m,{label:"Doit-on vous faire un accompte avant prestation",modelValue:i(u).deposit,"onUpdate:modelValue":e[10]||(e[10]=n=>i(u).deposit=n),"error-messages":_.value?i(U).deposit:void 0},null,8,["modelValue","error-messages"]),i(u).deposit?(a(),S(F,{key:0,variant:"solo",min:0,max:100,step:5,label:"Quel est le montant de dépôt (en pourcentage)?",modelValue:i(u).depositAmount,"onUpdate:modelValue":e[11]||(e[11]=n=>i(u).depositAmount=n),"error-messages":_.value?i(U).depositAmount:void 0},null,8,["modelValue","error-messages"])):B("",!0),l("div",He,[o(Y,{class:"text-subtitle-1 font-weight-medium"},{default:s(()=>e[20]||(e[20]=[b("Vous souhaitez être payer avant l'évènement ?",-1)])),_:1,__:[20]}),l("div",Ne,[o(Y,{class:"text-subtitle-1 font-weight-medium"},{default:s(()=>e[21]||(e[21]=[b("Avant la prestation",-1)])),_:1,__:[21]}),o(k,{modelValue:i(u).billingPeriod,"onUpdate:modelValue":e[12]||(e[12]=n=>i(u).billingPeriod=n),"false-value":"beforeEvent","true-value":"afterEvent",color:i(u).billingPeriod==="beforeEvent"?"success":"primary","hide-details":"","error-messages":_.value?i(U).billingPeriod:void 0},{default:s(()=>[b(j(i(u).billingPeriod),1)]),_:1},8,["modelValue","color","error-messages"]),o(Y,{class:"text-subtitle-1 font-weight-medium"},{default:s(()=>e[22]||(e[22]=[b("Après la prestation",-1)])),_:1,__:[22]})])]),o(Q,{class:"mb-6"},{default:s(()=>e[23]||(e[23]=[l("p",{class:"mb-6"},"A propos de votre communication",-1)])),_:1,__:[23]}),l("div",Ke,[(a(!0),f(T,null,G(i(u).links,(n,re)=>(a(),f("div",{key:re},[o(ee,{modelValue:n.type,"onUpdate:modelValue":K=>n.type=K,label:"Renseignez le réseau social ou le site web",items:["Facebook","Instagram","LinkedIn","Twitter","Site Web"],"item-title":"label","item-value":"value"},null,8,["modelValue","onUpdate:modelValue"]),o(O,{modelValue:n.value,"onUpdate:modelValue":K=>n.value=K,label:"Renseignez le lien vers le réseau social ou le site web",type:"url",variant:"outlined",placeholder:"https://www.example.com/mon-reseau-social"},null,8,["modelValue","onUpdate:modelValue"]),o(g,{onClick:K=>r(re),disabled:i(u).links.length<=0,color:"error","prepend-icon":"mdi-delete",size:"small",class:"mb-4"},{default:s(()=>e[24]||(e[24]=[b(" Supprimer ",-1)])),_:2,__:[24]},1032,["onClick","disabled"])]))),128)),o(g,{onClick:ie,color:"primary"},{default:s(()=>e[25]||(e[25]=[b(" Ajouter un lien vers un réseau social ou un site web ",-1)])),_:1,__:[25]})]),l("div",Ge,[(a(!0),f(T,null,G(V.value,(n,re)=>(a(),f("div",{key:re},[o(O,{modelValue:n.question,"onUpdate:modelValue":K=>n.question=K,label:"Renseignez une question fréquente auquelle vous répondez souvent","item-title":"label","item-value":"value"},null,8,["modelValue","onUpdate:modelValue"]),o(O,{modelValue:n.reponse,"onUpdate:modelValue":K=>n.reponse=K,label:"Renseignez la réponse à la question",type:"text",variant:"outlined",placeholder:"https://www.example.com/mon-reseau-social"},null,8,["modelValue","onUpdate:modelValue"]),o(g,{onClick:K=>h(re),disabled:V.value.length===0,color:"error","prepend-icon":"mdi-delete",size:"small",class:"my-2"},{default:s(()=>e[26]||(e[26]=[b(" Supprimer ",-1)])),_:2,__:[26]},1032,["onClick","disabled"])]))),128)),o(g,{onClick:t,color:"primary"},{default:s(()=>e[27]||(e[27]=[b(" Ajouter une question fréquente et sa réponse ",-1)])),_:1,__:[27]})])],512),[[Ae,P.value===1]]),P.value===1?(a(),f("div",We,[o(g,{onClick:e[13]||(e[13]=n=>z.value=!1)},{default:s(()=>e[28]||(e[28]=[b("Annuler",-1)])),_:1,__:[28]}),i(L)?B("",!0):(a(),S(g,{key:0,color:"primary",onClick:e[14]||(e[14]=n=>I(i(u)))},{default:s(()=>e[29]||(e[29]=[b(" Valider mon profil ",-1)])),_:1,__:[29]})),i(L)?(a(),f("div",Je,[o(g,{color:"primary",onClick:e[15]||(e[15]=n=>w(i(u)))},{default:s(()=>e[30]||(e[30]=[b(" Modifier mon profil ",-1)])),_:1,__:[30]})])):B("",!0)])):B("",!0)]),_:1})]),_:1},8,["modelValue"]),(a(),S(me,{to:"body"},[o(he,{redirection:"dashboard2",modelValue:R.value,"onUpdate:modelValue":e[17]||(e[17]=n=>R.value=n)},null,8,["modelValue"]),o(xe),o(Fe)]))],64)}}}),_e=JSON.parse(`[{"sector":"food","general":{"questions":[{"id":"food-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quel type de cuisine proposez-vous ?  ","category":"cuisines","type":"checkbox","required":true},{"id":"food-keywords-1","question":"Quel(s) format(s) de prestations assurez-vous ? ","category":"format","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Propositions sucrées : ","category":"sucré","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Propositions salées : ","category":"salé","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Vos options : ","category":"régimes","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"lieux","general":{"questions":[{"id":"lieux-general-1","question":"vous proposez ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Dans quel environement ? ","category":"environnement","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Mon lieu est accessible : ","category":"accessibilité","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quelles prestations sont imposées à vos clients ? ","category":"prestations imposées","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Vous proposez une privatisation : ","category":"privatisation","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Quel(s) espaces peuvent-ils y trouver ? ","category":"espaces","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Quels équipements sont à leur disposition ? ","category":"équipements","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{}},{"sector":"service","general":{"questions":[{"id":"service-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"service-keywords-1","question":"Quelle(s) préstation(s) proposez-vous ? ","category":"serveur","type":"checkbox","required":true},{"id":"service-keywords-1","question":"Quel(s) matériel(s) fournissez-vous sur une prestation ? ","category":"matériel serveur","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"musique","general":{"questions":[{"id":"musique-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"musique-keywords-1","question":"Quelle service proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"musique-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"musique-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"service","general":{"questions":[{"id":"service-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}}]`),Xe={class:"questionnaires-container"},Ze={key:0,class:"mb-6"},eo={key:1},oo={class:"text-h6 px-4"},to={class:"service-chips mt-4"},so={key:0,class:"mt-6"},io={class:"text-h6 px-4"},ro={class:"mt-4"},lo={class:"keyword-chips"},ao={key:1,class:"mt-6"},no={class:"text-h6 px-4"},uo={class:"mt-4"},co={class:"keyword-chips"},po={key:2,class:"text-center py-8"},mo={key:3,class:"text-center py-4"},vo={class:"mt-6 text-center d-flex justify-space-between"},fo=te({__name:"ServicesPrestataire",props:{pageActuelle:{type:Boolean,default:!1},pageActuelleModifiers:{}},emits:["update:pageActuelle"],setup(X){const M=ge(X,"pageActuelle"),c=le(),{professionnalServices:x,keywords:A,professionalUser:q}=ae(c),{getSectors:z,sendProfessionalServices:V}=fe(),{addSuccess:_,addError:E}=ke(),{patchProfessionnalProfileDetails:oe}=ye(),P=C([]),se=C(qe),$=C([]),L=C(!1),p=()=>Math.random().toString(36).substr(2,9),R=(r,t)=>{var I,w,H;if(!r||!((I=A.value)!=null&&I.length))return{};const h={},v=[];return r.servicesSection&&v.push(...((w=r.servicesSection.questions)==null?void 0:w.map(y=>y.category))||[]),r.habitudesSection&&v.push(...((H=r.habitudesSection.questions)==null?void 0:H.map(y=>y.category))||[]),v.forEach(y=>{const e=A.value.filter(Q=>Q.category===y&&(Q.sector.toLowerCase()===t.toLowerCase()||!Q.sector));h[y]=e.filter((Q,O,ee)=>ee.findIndex(F=>F.uuid===Q.uuid)===O)}),h},N=r=>{const t=_e.find(h=>h.sector.toLowerCase()===r.toLowerCase());return{id:p(),sector:r,questionnaireData:t,services:[...x.value||[]],keywordsByCategory:R(t,r),selectedServiceUuid:null,selectedKeywords:new Set}},W=(r,t)=>{t.selectedServiceUuid===r.uuid?t.selectedServiceUuid=null:t.selectedServiceUuid=r.uuid,Z()},J=(r,t)=>{t.selectedKeywords.has(r.uuid)?t.selectedKeywords.delete(r.uuid):t.selectedKeywords.add(r.uuid),Z()},u=async(r,t)=>{if(!t)return;r.questionnaireData=null,r.services=[],r.keywordsByCategory={},r.selectedServiceUuid=null,r.selectedKeywords.clear(),await z(t);const h=ue([x,A],([v,I])=>{if(v!=null&&v.length&&(I!=null&&I.length)){const w=_e.find(H=>H.sector.toLowerCase()===t.toLowerCase());r.sector=t,r.questionnaireData=w,r.services=[...v],r.keywordsByCategory=R(w,t),h()}},{immediate:!0})},U=()=>{const r={id:p(),sector:"",questionnaireData:null,services:[],keywordsByCategory:{},selectedServiceUuid:null,selectedKeywords:new Set};P.value.push(r)},Z=()=>{$.value=[],P.value.forEach(r=>{var t;r.selectedServiceUuid&&((t=q.value)!=null&&t.uuid)&&$.value.push({serviceUuid:r.selectedServiceUuid,professionalUuid:q.value.uuid,keywordsUuid:Array.from(r.selectedKeywords)})})},ie=async()=>{var t,h;if(Z(),console.log("payloadArray après updatePayloadArray:",$.value),!P.value.some(v=>v.selectedServiceUuid)){E({message:"Veuillez sélectionner au moins un service"});return}if($.value.length===0){E({message:"Erreur: UUID professionnel manquant"});return}try{const v=P.value.filter(w=>w.sector&&w.selectedServiceUuid).map(w=>w.sector);await oe({...q.value,faq:typeof((t=q.value)==null?void 0:t.faq)=="string"?JSON.parse(q.value.faq||"{}"):((h=q.value)==null?void 0:h.faq)||{},secondActivity:v[0]||"",thirdActivity:v[1]||""});const I=$.value.map(w=>V(w));await Promise.all(I),_(`${$.value.length} service(s) créé(s) avec succès !`),M.value=!1,L.value=!0}catch(v){console.error("Erreur lors de l'envoi:",v),E({message:"Erreur lors de l'envoi des services"})}};return ue(()=>q.value,async r=>{if(r!=null&&r.mainActivity&&(r!=null&&r.uuid)&&P.value.length===0)try{await z(r.mainActivity);const t=N(r.mainActivity);P.value.push(t)}catch(t){console.error("Erreur lors du chargement initial:",t),E({message:"Erreur lors du chargement des données"})}},{immediate:!0,deep:!0}),ue([x,A],([r,t])=>{var h;if(r!=null&&r.length&&(t!=null&&t.length)&&P.value.length>0){const v=P.value[0];v&&((h=q.value)!=null&&h.mainActivity)&&(v.services=[...r],v.keywordsByCategory=R(v.questionnaireData,q.value.mainActivity))}}),(r,t)=>{const h=d("v-select"),v=d("v-divider"),I=d("v-chip"),w=d("v-expansion-panel-text"),H=d("v-expansion-panel"),y=d("v-expansion-panels"),e=d("v-progress-circular"),Q=d("v-btn"),O=d("v-card"),ee=d("v-dialog");return a(),f(T,null,[o(ee,{modelValue:M.value,"onUpdate:modelValue":t[1]||(t[1]=F=>M.value=F),fullscreen:"",transition:"dialog-bottom-transition"},{default:s(()=>{var F;return[(F=i(q))!=null&&F.uuid?(a(),S(O,{key:0,width:"800"},{default:s(()=>[l("div",Xe,[(a(!0),f(T,null,G(P.value,(m,Y)=>(a(),f("div",{key:m.id,class:"questionnaire-section mb-8"},[Y>0?(a(),f("div",Ze,[o(h,{label:`Votre ${Y+1}ème activité ?`,modelValue:m.sector,"onUpdate:modelValue":[k=>m.sector=k,k=>u(m,k)],items:se.value,"item-title":"label","item-value":"value",variant:"outlined"},null,8,["label","modelValue","onUpdate:modelValue","items"])])):B("",!0),m.questionnaireData&&m.services.length>0?(a(),f("div",eo,[o(v,{class:"mt-6"},{default:s(()=>[l("span",oo,j(m.questionnaireData.general.questions[0].question),1)]),_:2},1024),l("div",to,[(a(!0),f(T,null,G(m.services,k=>(a(),S(I,{key:k.uuid,variant:"outlined",color:m.selectedServiceUuid===k.uuid?"primary":"default",class:de(["ma-1",{"selected-chip":m.selectedServiceUuid===k.uuid}]),onClick:g=>W(k,m)},{default:s(()=>[b(j(k.name),1)]),_:2},1032,["color","onClick","class"]))),128))]),m.questionnaireData.servicesSection?(a(),f("div",so,[o(v,null,{default:s(()=>[l("span",io,j(m.questionnaireData.servicesSection.title||"Services détaillés"),1)]),_:2},1024),l("div",ro,[o(y,{variant:"accordion",multiple:""},{default:s(()=>[(a(!0),f(T,null,G(m.questionnaireData.servicesSection.questions,k=>(a(),S(H,{key:k.category,title:k.question},{default:s(()=>[o(w,null,{default:s(()=>[l("div",lo,[(a(!0),f(T,null,G(m.keywordsByCategory[k.category]||[],g=>(a(),S(I,{key:g.uuid,variant:"outlined",class:de(["ma-1",{"selected-chip":m.selectedKeywords.has(g.uuid)}]),color:m.selectedKeywords.has(g.uuid)?"success":"default",onClick:ne=>J(g,m)},{default:s(()=>[b(j(g.value),1)]),_:2},1032,["color","onClick","class"]))),128))])]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:2},1024)])])):B("",!0),m.questionnaireData.habitudesSection?(a(),f("div",ao,[o(v,null,{default:s(()=>[l("span",no,j(m.questionnaireData.habitudesSection.title||"Habitudes et pratiques"),1)]),_:2},1024),l("div",uo,[o(y,{variant:"accordion",multiple:""},{default:s(()=>[(a(!0),f(T,null,G(m.questionnaireData.habitudesSection.questions,k=>(a(),S(H,{key:k.category,title:k.question},{default:s(()=>[o(w,null,{default:s(()=>[l("div",co,[(a(!0),f(T,null,G(m.keywordsByCategory[k.category]||[],g=>(a(),S(I,{key:g.uuid,variant:"outlined",class:de(["ma-1",{"selected-chip":m.selectedKeywords.has(g.uuid)}]),color:m.selectedKeywords.has(g.uuid)?"success":"default",onClick:ne=>J(g,m)},{default:s(()=>[b(j(g.value),1)]),_:2},1032,["color","onClick","class"]))),128))])]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:2},1024)])])):B("",!0)])):Y===0?(a(),f("div",po,[o(e,{indeterminate:"",color:"primary",class:"mb-4"}),t[3]||(t[3]=l("p",null,"Chargement des services et mots-clés...",-1))])):Y>0&&!m.sector?(a(),f("div",mo,t[4]||(t[4]=[l("p",{class:"text-grey"}," Sélectionnez un secteur d'activité pour afficher les services disponibles ",-1)]))):B("",!0)]))),128)),l("div",vo,[P.value.length<3?(a(),S(Q,{key:0,onClick:U,color:"primary",variant:"outlined","prepend-icon":"mdi-plus"},{default:s(()=>t[5]||(t[5]=[b(" Ajouter une nouvelle activité ",-1)])),_:1,__:[5]})):B("",!0)]),l("div",null,[o(Q,{color:"primary",onClick:t[0]||(t[0]=m=>ie())},{default:s(()=>t[6]||(t[6]=[b("Valider ma selection",-1)])),_:1,__:[6]})])])]),_:1})):B("",!0)]}),_:1},8,["modelValue"]),(a(),S(me,{to:"body"},[o(he,{redirection:"dashboard2",modelValue:L.value,"onUpdate:modelValue":t[2]||(t[2]=F=>L.value=F)},null,8,["modelValue"])]))],64)}}}),yo=ve(fo,[["__scopeId","data-v-bf1006da"]]),bo={class:"position-relative"},_o=["src"],go={class:"mx-sm-5"},qo={class:"d-sm-flex align-center justify-sm-start justify-center"},ho={class:"text-sm-left text-center"},ko=["src"],xo={class:"ml-sm-4 text-sm-left text-center"},Vo={class:"text-h3 font-weight-semibold mb-1 my-sm-0 my-2"},wo={class:"text-h6 font-weight-medium text-grey100"},So={class:"d-flex flex-column justify-center align-center gap-4"},Ao={key:1},Uo={key:0},zo={class:"d-sm-flex d-none"},Eo=te({__name:"ProfileBannerOne",setup(X){const{bgPicture:M}=ae(le()),c=C(null),x=C(!1),A=C(!1),q=C(null),{user:z,isProfileCreated:V}=ae(le());fe();const{changeProfessionalBannerPicture:_}=ye(),E=localStorage.getItem("is-profile-verified"),oe=()=>{var L;return(L=q.value)==null?void 0:L.click()},P=async L=>{var N;const p=L.target;if(!((N=p.files)!=null&&N.length))return;const R=p.files[0];await _(R)},se=Ue([{tab:"My Profile",icon:Ce,href:"/apps/userprofile/one"},{tab:"Teams",icon:Ie,href:"/apps/userprofile/one/teams"},{tab:"Projects",icon:Qe,href:"/apps/userprofile/one/projects"},{tab:"Connection",icon:$e,href:"/apps/userprofile/one/connection"}]),$=()=>{x.value=!x.value};return(L,p)=>{const R=d("v-avatar"),N=d("v-chip"),W=d("v-col"),J=d("v-btn"),u=d("v-row"),U=d("v-tab"),Z=d("v-tabs"),ie=d("v-card-item"),r=d("v-card");return a(),f(T,null,[l("div",bo,[l("img",{src:i(M),alt:"profile",class:"w-100"},null,8,_o),l("button",{onClick:oe,class:"profile-banner__change-image"},"+"),l("input",{type:"file",ref_key:"fileInput",ref:q,onChange:P,accept:"image/*",style:{display:"none"}},null,544)]),l("div",go,[o(r,{elevation:"10",class:"overflow-hidden mt-sm-n13 mt-n5"},{default:s(()=>[o(ie,{class:"pb-0"},{default:s(()=>[o(u,{class:"mt-1 justify-space-between"},{default:s(()=>[o(W,{cols:"12",md:"6",sm:"9",class:"pt-0"},{default:s(()=>{var t,h;return[l("div",qo,[l("div",ho,[o(R,{size:"100",class:"userImage position-relative overflow-visible"},{default:s(()=>[l("img",{src:i(ze),width:"100",alt:"Mathew",class:"rounded-circle"},null,8,ko),o(R,{size:"26",class:"bg-primary position-absolute plus"},{default:s(()=>[o(i(Ee),{size:"16","stroke-width":"2"})]),_:1})]),_:1})]),l("div",xo,[l("h5",Vo,[b(j(((t=i(z))==null?void 0:t.username)??"Définir votre nom complet")+" ",1),o(N,{color:"primary",class:"bg-lightprimary font-weight-semibold ml-2 mt-n1",variant:"outlined",size:"x-small"},{default:s(()=>p[6]||(p[6]=[b("Admin",-1)])),_:1,__:[6]})]),l("span",wo,j(((h=i(z))==null?void 0:h.category)??"Aucune phrase inspirante définie"),1)])])]}),_:1}),o(W,{cols:"12",md:"6",sm:"3",class:"d-flex align-center justify-center justify-sm-end order-sm-third"},{default:s(()=>[l("div",So,[l("div",null,[i(V)?B("",!0):(a(),S(J,{key:0,color:"primary",size:"large",class:"w-100",onClick:p[0]||(p[0]=t=>$())},{default:s(()=>p[7]||(p[7]=[b("Editez votre profil",-1)])),_:1,__:[7]})),i(V)&&i(E)?(a(),f("div",Ao,[o(J,{color:"primary",size:"large",class:"w-100",onClick:p[1]||(p[1]=t=>$())},{default:s(()=>p[8]||(p[8]=[b("Modifier votre profil",-1)])),_:1,__:[8]}),o(J,{color:"success",size:"large",class:"w-100",onClick:p[2]||(p[2]=t=>A.value=!0)},{default:s(()=>p[9]||(p[9]=[b("Ajouter votre secteur d'activité",-1)])),_:1,__:[9]})])):B("",!0)]),i(V)&&!i(E)?(a(),f("p",Uo,p[10]||(p[10]=[l("span",{style:{fontSize:"14px"}}," Nous reviendrons dans les 48heures...",-1)]))):B("",!0)])]),_:1})]),_:1}),o(u,null,{default:s(()=>[o(W,{md:"12",class:"profile-one"},{default:s(()=>[o(Z,{modelValue:c.value,"onUpdate:modelValue":p[3]||(p[3]=t=>c.value=t),color:"primary",dark:"",class:"profiletab"},{default:s(()=>[(a(!0),f(T,null,G(se.value,t=>(a(),S(U,{key:t.tab,to:t.href,class:"text-grey100 mr-sm-3"},{default:s(()=>[(a(),S(Pe(t.icon),{size:"20","stroke-width":"1.5",class:"mr-sm-2 text-h6 text-grey100 icon"})),l("span",zo,j(t.tab),1)]),_:2},1032,["to"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),(a(),S(me,{to:"body"},[o(Ye,{openModal:x.value,"onUpdate:openModal":p[4]||(p[4]=t=>x.value=t)},null,8,["openModal"]),o(yo,{class:"mt-6",pageActuelle:A.value,"onUpdate:pageActuelle":p[5]||(p[5]=t=>A.value=t)},null,8,["pageActuelle"])]))],64)}}}),Po=ve(Eo,[["__scopeId","data-v-1ea17247"]]),Co={class:"d-flex"},Io={class:"my-5 text-subtitle-1 lh-md font-weight-medium"},Qo=te({__name:"IntroCard",setup(X){const{professionalUser:M}=ae(le());return(c,x)=>{const A=d("v-divider"),q=d("v-card-item"),z=d("v-card"),V=d("v-col"),_=d("v-row");return a(),S(_,null,{default:s(()=>[o(V,{cols:"12"},{default:s(()=>[o(z,{elevation:"10",class:"bg-surface"},{default:s(()=>[o(q,null,{default:s(()=>{var E;return[l("div",Co,[l("div",null,[x[0]||(x[0]=l("h4",{class:"text-h5"},"A mon propos",-1)),l("p",Io,j((E=i(M))==null?void 0:E.name),1)]),o(A,{class:"mb-4"})])]}),_:1})]),_:1})]),_:1})]),_:1})}}}),$o=ve(Qo,[["__scopeId","data-v-ea1cf61a"]]),Ro={class:"d-flex align-center mb-5"},Oo={class:"d-flex align-center mb-5"},Do=te({__name:"TeamsCard",setup(X){return(M,c)=>{const x=d("v-avatar"),A=Me,q=d("v-card-item"),z=d("v-card"),V=d("v-col"),_=d("v-row");return a(),S(_,null,{default:s(()=>[o(V,{cols:"12"},{default:s(()=>[o(z,{elevation:"10",class:"bg-surface"},{default:s(()=>[o(q,null,{default:s(()=>[c[3]||(c[3]=l("h4",{class:"text-h5 mb-4"},"Teams",-1)),l("div",Ro,[o(x,{size:"40",class:"bg-lightinfo"},{default:s(()=>[o(i(Re),{size:"20","stroke-width":"1.5",class:"text-info"})]),_:1}),c[0]||(c[0]=l("div",{class:"ml-3"},[l("h5",{class:"text-subtitle-1 font-weight-semibold text-grey200 mb-1"}," Backend Developer "),l("p",{class:"text-subtitle-1 font-weight-medium text-grey100"},"120 members")],-1))]),l("div",Oo,[o(x,{size:"40",class:"bg-lightprimary"},{default:s(()=>[o(i(Oe),{size:"20","stroke-width":"1.5",class:"text-primary"})]),_:1}),c[1]||(c[1]=l("div",{class:"ml-3"},[l("h5",{class:"text-subtitle-1 font-weight-semibold text-grey200 mb-1"}," React Developer "),l("p",{class:"text-subtitle-1 font-weight-medium text-grey100"},"86 members")],-1))]),l("div",null,[o(A,{to:"/",class:"text-primary font-weight-semibold text-subtitle-1 text-decoration-none"},{default:s(()=>c[2]||(c[2]=[b("View all",-1)])),_:1,__:[2]})])]),_:1,__:[3]})]),_:1})]),_:1})]),_:1})}}}),To={class:"mx-sm-4"},et=te({__name:"index",setup(X){return(M,c)=>{const x=d("v-col"),A=d("v-row");return a(),f(T,null,[o(Po),l("div",To,[o(A,{class:"mt-4"},{default:s(()=>[o(x,{cols:"12",lg:"4",md:"4"},{default:s(()=>[o($o),o(Do)]),_:1})]),_:1})])],64)}}});export{et as default};
