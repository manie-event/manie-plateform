import{e as w}from"./DP4NUVtV.js";import{h as y,s as S,k,u as L}from"./Y2cM3ybq.js";import{u as q}from"./yA45zEN9.js";import{u as C}from"./D3kLc0Nx.js";const P=s=>({id:s.id,uuid:s.uuid,sector:s.sector,category:s.category,value:s.value,isSelected:!1}),$=()=>{const s=y(),{setProfessionalServices:c,setKeywords:n,setUpdateProfile:f}=s,{professionnalServices:v,keywords:m}=S(s),{setSectors:b}=w(),i=L(),l=k(!1);q("token");const r=C(),g=async()=>{var o,e;try{l.value=!0;let t=1,a=[];for(;;){const u=await(r==null?void 0:r.get(`${i.public.apiUrl}/sector?page=${t}`));if(!((e=(o=u==null?void 0:u.data)==null?void 0:o.data)!=null&&e.length)||(a.push(...u.data.data),t>=u.data.meta.lastPage))break;t++}return console.log(a,"ALL SECTORS"),b(a),a}catch(t){console.error("Error fetching sectors:",t)}finally{l.value=!1}},p=async o=>{try{l.value=!0;const e=await(r==null?void 0:r.get(`${i.public.apiUrl}/sector`));if(e){const t=e.data.data.filter(a=>a.name.toLowerCase()===o.toLowerCase());return await Promise.all([h(t[0].uuid),d(t[0].name)]),l.value=!1,{services:v.value,keywords:m.value}}}catch{throw new Error("No data received from API")}},h=async o=>{try{const e=await(r==null?void 0:r.get(`${i.public.apiUrl}/service`,{params:{q:o,limit:100}}));if(e){const t=e.data.data.filter(a=>a.sectorUuid.toLowerCase()===o.toLowerCase());c(t)}}catch{console.error("No data received from API")}},d=async o=>{l.value=!0;try{const e=await(r==null?void 0:r.get(`${i.public.apiUrl}/keyword`,{params:{q:o,limit:1500}}));if(e&&o){const t=e.data.data.filter(a=>a.sector.toLowerCase()==o.toLowerCase()).slice(0,100).map(a=>P(a));console.log(t,"Keywords fetched and filtered"),n(t),l.value=!1}n(e==null?void 0:e.data.data);return}catch(e){console.error("Error fetching keywords:",e)}};return{loading:l,getKeywords:d,getSectors:p,getAllSectors:g,sendProfessionalServices:async o=>{try{const e=await(r==null?void 0:r.post(`${i.public.apiUrl}/professional-service/create`,o));e&&(c(e.data),f(!0))}catch(e){console.error("Error sending professional services:",e)}}}},I=[{label:"Animation (jeux, performeurs, art, bien-être)",value:"animation"},{label:"Beauté (coiffure, maquillage)",value:"beauté"},{label:"Boisson (mixologue, bar mobile, fournisseur...)",value:"boisson"},{label:"Décoration (graphiste, designer, fleuriste, cadeaux...)",value:"décoration"},{label:"Esthétique (soin, sour/cils, manucure, pedicure)",value:"esthétique"},{label:"Humain (coordinateur.trice, officiant.e)",value:"humain"},{label:"Lieux (espace de réception, restaurant, bar...)",value:"lieux"},{label:"Logistique (livraison, sécurité, ménage...)",value:"logistique"},{label:"Look (boutique classique & seconde main)",value:"look"},{label:"Loueur (mobilier, décoration, structure, scéno...)",value:"loueur"},{label:"Musique (dj, musique live)",value:"musique"},{label:"Photo & Vidéo (photographe, vidéaste)",value:"audiovisuel"},{label:"Restauration (traiteur, chef.fe, food-truck...)",value:"food"},{label:"Service (serveur.se, maître d'hotel, hôtesse)",value:"service"},{label:"Transport (véhicule motorisé ou vert, collectif ou individuel)",value:"transport"}];export{I as A,$ as u};
