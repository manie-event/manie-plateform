import{B as x}from"./CfFuZGBB.js";import{u as $}from"./BZHCRx1S.js";import{c as D,a as u,d as z,e as E}from"./D03gni85.js";import{_ as F}from"./L4_q0mTC.js";import{u as T}from"./kJO5493o.js";import{d as _,h,s as P,A,k as g,r as m,c,b,F as y,e as l,l as I,w as d,n as R,f as q,g as p,m as e,t as O,T as j}from"./BGVbXBYx.js";const X=_({__name:"EditClientProfil",props:{openModal:{type:Boolean},openModalModifiers:{}},emits:["update:openModal"],setup(L){const B=h(),{isProfileCreated:N}=P(B),{patchClientProfil:C}=T(),v=A(L,"openModal"),t=g(!1),V=g(!1),S=D({isBusiness:E(),businessName:u().when("isBusiness",{is:!0,then:a=>a.min(2).required("La raison sociale est requise"),otherwise:a=>a.optional()}),businessSiret:u().when("isBusiness",{is:!0,then:a=>a.required("Le numéro de siret est requis").matches(/^\d{14}$/,"Le SIRET doit contenir 14 chiffres"),otherwise:a=>a.optional()}),businessLeader:u().when("isBusiness",{is:!0,then:a=>a.min(2).required("Le nom du dirigeant est requis"),otherwise:a=>a.optional()}),username:u().min(2).required("Le nom est requis"),birthDate:z().required("La date de naissance est requise"),phoneNumber:u().matches(/^(?:(?:\+|00)33|0)\s*[1-9](?:[\s.-]*\d{2}){4}$/,"Format de téléphone invalide").required("Le numéro de téléphone est requis"),address:u().required("L'adresse est requise"),zipCode:u().matches(/^\d{5}$/,"Le code postal doit contenir 5 chiffres").required("Le code postal est requis"),city:u().required("La ville est requise"),country:u().required("Le pays est requis")}),{values:o,errors:n}=$({validationSchema:S,initialValues:{businessName:"",businessSiret:"",businessLeader:"",address:"",zipCode:"",city:"",country:"France",birthDate:null,username:"",phoneNumber:"",isBusiness:!1},validateOnMount:!1,keepValuesOnUnmount:!0}),U=async a=>{console.log("ICI");try{V.value=!0,t.value=!0,console.log("Submitting profile:",a),await C(a),v.value=!1,t.value=!1}catch(s){console.error("Erreur lors de la mise à jour du profil:",s)}finally{V.value=!1}};return(a,s)=>{const f=m("v-divider"),k=m("v-checkbox"),i=m("v-text-field"),w=m("v-btn"),M=m("v-form");return b(),c(y,null,[l(x,{modelValue:v.value,"onUpdate:modelValue":s[12]||(s[12]=r=>v.value=r),fullscreen:"",transition:"dialog-bottom-transition"},{title:d(()=>[p(O(e(N)?"Modifier votre profil":"Renseignez votre profil"),1)]),content:d(()=>[l(M,{class:"px-4"},{default:d(()=>[l(f,{class:"mt-6"},{default:d(()=>s[13]||(s[13]=[q("p",{class:"mt-6"},null,-1),p(" A propos de vous ",-1)])),_:1,__:[13]}),l(k,{label:"Êtes-vous une entreprise ?",modelValue:e(o).isBusiness,"onUpdate:modelValue":s[0]||(s[0]=r=>e(o).isBusiness=r),"error-messages":t.value?e(n).isBusiness:void 0},null,8,["modelValue","error-messages"]),e(o).isBusiness?(b(),c(y,{key:0},[l(i,{class:"mt-6",label:"Le nom de votre entreprise ?",modelValue:e(o).businessName,"onUpdate:modelValue":s[1]||(s[1]=r=>e(o).businessName=r),"error-messages":t.value?e(n).businessName:void 0},null,8,["modelValue","error-messages"]),l(i,{label:"Votre Numéro De Siret ?",modelValue:e(o).businessSiret,"onUpdate:modelValue":s[2]||(s[2]=r=>e(o).businessSiret=r),"error-messages":t.value?e(n).businessSiret:void 0},null,8,["modelValue","error-messages"]),l(i,{label:"Nom du dirigeant ?",modelValue:e(o).businessLeader,"onUpdate:modelValue":s[3]||(s[3]=r=>e(o).businessLeader=r),"error-messages":t.value?e(n).businessLeader:void 0},null,8,["modelValue","error-messages"])],64)):R("",!0),l(i,{label:"Votre nom ?",modelValue:e(o).username,"onUpdate:modelValue":s[4]||(s[4]=r=>e(o).username=r),"error-messages":t.value?e(n).username:void 0},null,8,["modelValue","error-messages"]),l(i,{label:"Votre date de naissance ?",type:"date",modelValue:e(o).birthDate,"onUpdate:modelValue":s[5]||(s[5]=r=>e(o).birthDate=r),"error-messages":t.value?e(n).birthDate:void 0},null,8,["modelValue","error-messages"]),l(i,{label:"Votre numéro de téléphone ?",modelValue:e(o).phoneNumber,"onUpdate:modelValue":s[6]||(s[6]=r=>e(o).phoneNumber=r),"error-messages":t.value?e(n).phoneNumber:void 0},null,8,["modelValue","error-messages"]),l(f,{class:"mt-6"},{default:d(()=>s[14]||(s[14]=[q("p",{class:"mt-6"},null,-1),p(" A propos de votre adresse ",-1)])),_:1,__:[14]}),l(i,{label:"Votre adresse ?",modelValue:e(o).address,"onUpdate:modelValue":s[7]||(s[7]=r=>e(o).address=r),"error-messages":t.value?e(n).address:void 0},null,8,["modelValue","error-messages"]),l(i,{label:"Votre code postal ?",modelValue:e(o).zipCode,"onUpdate:modelValue":s[8]||(s[8]=r=>e(o).zipCode=r),"error-messages":t.value?e(n).zipCode:void 0},null,8,["modelValue","error-messages"]),l(i,{label:"Votre ville ?",modelValue:e(o).city,"onUpdate:modelValue":s[9]||(s[9]=r=>e(o).city=r),"error-messages":t.value?e(n).city:void 0},null,8,["modelValue","error-messages"]),l(i,{label:"Votre pays ?",modelValue:e(o).country,"onUpdate:modelValue":s[10]||(s[10]=r=>e(o).country=r),"error-messages":t.value?e(n).country:void 0},null,8,["modelValue","error-messages"]),l(w,{color:"primary",onClick:s[11]||(s[11]=r=>U(e(o))),loading:V.value,block:""},{default:d(()=>s[15]||(s[15]=[p(" Valider le profil ",-1)])),_:1,__:[15]},8,["loading"])]),_:1})]),_:1},8,["modelValue"]),(b(),I(j,{to:"body"},[l(F)]))],64)}}});export{X as _};
