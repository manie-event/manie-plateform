import{d as k,k as C,r as u,g as P,a as r,w as n,e as o,b as i,u as m,c as d,h as l,y as p,t as c,G as S}from"./RV8HHTPq.js";import{u as V}from"./Bca-y4gR.js";import{u as q,a as f}from"./1JU3Eu1U.js";import{c as z,a as w}from"./Dw5zQ2DC.js";import"./nI9jmXyo.js";import"./DCvGJmM2.js";const F={key:0,class:"text-red-500 text-sm"},L={key:0,class:"text-red-500 text-sm"},Z=k({__name:"index",setup($){const b=C().query.token,{registerNewPassword:x}=V(),h=z({password:w().min(8,"Le mot de passe doit contenir au moins 8 caractères").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,"Le mot de passe doit contenir au moins une majuscule, une minuscule, un chiffre et un caractère spécial").required("Le mot de passe est requis"),confirmPassword:w().test("passwords-match","Les mots de passe ne correspondent pas",function(t){return this.parent.password===t}).required("La confirmation du mot de passe est requise")}),{handleSubmit:g}=q({validationSchema:h,initialValues:{token:b,password:"",confirmPassword:""},validateOnMount:!1}),y=g(async t=>{console.log("✅ Formulaire valide:",t),await x(t)});return(t,e)=>{const _=u("ErrorMessage"),v=u("Form");return r(),P(v,{ref:"form",onSubmit:e[0]||(e[0]=S(a=>m(y)(),["prevent"])),action:"/dashboards/analytical",class:"mt-sm-13 mt-8"},{default:n(()=>[e[1]||(e[1]=o("label",{class:"text-subtitle-1 font-weight-medium pb-2 text-lightText"},"Votre nouveau mot de passe",-1)),i(m(f),{name:"password"},{default:n(({field:a,errors:s})=>[o("input",p(a,{type:"password",class:"form-input w-full px-3 py-2 border rounded",placeholder:"Votre nouveau mot de passe"}),null,16),s.length?(r(),d("span",F,c(s[0]),1)):l("",!0)]),_:1}),e[2]||(e[2]=o("label",{class:"text-subtitle-1 font-weight-medium pb-2 text-lightText"},"Confirmez votre nouveau mot de passe",-1)),i(m(f),{name:"confirmPassword"},{default:n(({field:a,errors:s})=>[o("input",p(a,{type:"password",class:"form-input w-full px-3 py-2 border rounded",placeholder:"Confirmez votre nouveau mot de passe"}),null,16),s.length?(r(),d("span",L,c(s[0]),1)):l("",!0)]),_:1}),i(_,{name:"confirmPassword"}),e[3]||(e[3]=o("button",{type:"submit",size:"large",color:"primary",block:"",rounded:"pill"}," Réinitialiser mon mot de passe ",-1))]),_:1,__:[1,2,3]},512)}}});export{Z as default};
