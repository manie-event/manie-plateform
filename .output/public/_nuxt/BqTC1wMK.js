import{L,B as b}from"./Du8lJ9NK.js";import{d as g,c as a,b as n,f as t,m as i,y as h,bF as B,bG as E,k as o,o as I,bD as R,e as f,n as V,t as C,w as p}from"./Y2cM3ybq.js";import{L as M}from"./CcbTWPO4.js";import{u as N}from"./BgNK3OKZ.js";import"./BYVrlhVO.js";import"./BmmcoTAk.js";import"./yA45zEN9.js";import"./D3kLc0Nx.js";const $=""+new URL("check-email.BWRWztMi.jpg",import.meta.url).href,j=""+new URL("good-verification.DMFiIdFa.svg",import.meta.url).href,D={class:"loader__container"},F=["src"],U=g({__name:"Loader",setup(k){return(m,u)=>(n(),a("div",D,[t("img",{src:i(M),alt:"",class:"loader__img"},null,8,F)]))}}),z=h(U,[["__scopeId","data-v-fe2c8952"]]),P={class:"verify-email__container"},S={class:"verify-email__message"},W={key:0},A={key:1},G=["src"],T={class:"text-green-600"},q={class:"mt-6 text-sm"},H=["src"],J=["src"],K=g({__name:"[token]",setup(k){const m=B(),u=E(),w=m.params.token,{checkEmail:x}=N(),_=o(!0),r=o(!1),y=o(""),c=o(10);let l;return I(async()=>{var d,s,v;try{const e=await x(w);if((e==null?void 0:e.message)==="Email verified"||(d=e==null?void 0:e.message)!=null&&d.toLowerCase().includes("verified"))r.value=!0,setTimeout(()=>u.push("/auth/login"),1e4);else throw new Error((e==null?void 0:e.message)||"Erreur inconnue")}catch(e){y.value=((v=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:v.message)||(e==null?void 0:e.message)}finally{_.value=!1}l=window.setInterval(()=>{c.value>0&&r.value?c.value--:clearInterval(l)},1e3)}),R(()=>{clearInterval(l)}),(d,s)=>(n(),a("div",P,[t("div",S,[_.value?(n(),a("div",W,[f(z)])):r.value?(n(),a("div",A,[t("img",{src:i(j),alt:"",width:"70"},null,8,G),s[2]||(s[2]=t("h1",{class:"text-2xl font-bold mb-4"},"Bonjour à toi,",-1)),t("div",T,[s[0]||(s[0]=t("h3",null,"Nous venons de vérifier ton email.",-1)),s[1]||(s[1]=t("h3",{class:"mt-2 text-sm"},"L'aventure commence ici",-1)),t("p",q,C(`Vous allez être rediriger vers la page d'identification dans ${c.value} secondes `),1)])])):V("",!0)]),f(b,null,{"bg-image":p(()=>[t("img",{src:i($),alt:"",style:{width:"100%",height:"100%","object-fit":"cover","border-radius":"5px"}},null,8,H)]),logo:p(()=>[t("img",{src:i(L),alt:"",class:"manie-logo"},null,8,J)]),_:1})]))}}),oe=h(K,[["__scopeId","data-v-606a0d9c"]]);export{oe as default};
