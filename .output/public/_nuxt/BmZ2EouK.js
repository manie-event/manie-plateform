import{_ as Ve}from"./74YPDCEQ.js";import{d as ce,z as we,A as be,h as re,s as ie,k as I,o as Se,ay as Ue,M as ae,r as v,c as p,b as u,f as n,F as P,q as R,n as E,e as s,w as i,t as g,l as C,v as ne,g as m,y as ge,D as Ae,c3 as ze,m as l,c4 as Ee,T as _e,Z as Pe,c5 as Ce,aL as Qe,x as Re,p as Ie,bg as Oe,c6 as Te,c7 as Le,c8 as De}from"./DkNnpBgi.js";import{B as $e}from"./Gckm8ang.js";import{u as Be}from"./ULlfbqiz.js";import{c as ue,a as z,d as Fe,e as de,f as Me}from"./w9Wlem1u.js";import{_ as je}from"./pIOrsw_x.js";import{u as pe}from"./BW0Z2TXa.js";import{u as me}from"./BhWFRY-V.js";import{u as he}from"./CyXQxhwq.js";import{M as He}from"./CS-3flG2.js";const te=JSON.parse(`[{"sector":"food","general":{"questions":[{"id":"food-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quel type de cuisine proposez-vous ?  ","category":"cuisines","type":"checkbox","required":true},{"id":"food-keywords-1","question":"Quel(s) format(s) de prestations assurez-vous ? ","category":"format","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Propositions sucrées : ","category":"sucré","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Propositions salées : ","category":"salé","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Vos options : ","category":"régimes","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"lieux","general":{"questions":[{"id":"lieux-general-1","question":"vous proposez ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Dans quel environement ? ","category":"environnement","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Mon lieu est accessible : ","category":"accessibilité","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quelles prestations sont imposées à vos clients ? ","category":"prestations imposées","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Vous proposez une privatisation : ","category":"privatisation","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Quel(s) espaces peuvent-ils y trouver ? ","category":"espaces","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Quels équipements sont à leur disposition ? ","category":"équipements","type":"checkbox","required":true},{"id":"food-keywords-4","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{}},{"sector":"service","general":{"questions":[{"id":"service-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"service-keywords-1","question":"Quelle(s) préstation(s) proposez-vous ? ","category":"serveur","type":"checkbox","required":true},{"id":"service-keywords-1","question":"Quel(s) matériel(s) fournissez-vous sur une prestation ? ","category":"matériel serveur","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"musique","general":{"questions":[{"id":"musique-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"musique-keywords-1","question":"Quelle service proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"musique-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"musique-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"service","general":{"questions":[{"id":"service-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}},{"sector":"boisson","general":{"questions":[{"id":"boisson-general-1","question":"Vous êtes ?","type":"checkbox","required":true}]},"services":"VOTRE OFFRE","servicesSection":{"questions":[{"id":"food-keywords-1","question":"Quelle boisson proposez-vous ? ","category":"type","type":"checkbox","required":true},{"id":"food-keywords-2","question":"Quel matériel proposez-vous ? ","category":"matériel","type":"checkbox","required":true},{"id":"food-keywords-3","question":"Quels options proposez-vous ? ","category":"options","type":"checkbox","required":true}]},"habitudes":"VOS HABITUDES ","habitudesSection":{"questions":[{"id":"food-keywords-1","question":"Quelles sont vos habitudes en matière d'éco-responsabilité ?  ","category":"écoresp-food","type":"checkbox","required":true}]}}]`),qe=[{label:"Animation (jeux, performeurs, art, bien-être)",value:"animation"},{label:"Beauté (coiffure, maquillage)",value:"beauté"},{label:"Boisson (mixologue, bar mobile, fournisseur...)",value:"boisson"},{label:"Décoration (graphiste, designer, fleuriste, cadeaux...)",value:"décoration"},{label:"Esthétique (soin, sour/cils, manucure, pedicure)",value:"esthétique"},{label:"Humain (coordinateur.trice, officiant.e)",value:"humain"},{label:"Lieux (espace de réception, restaurant, bar...)",value:"lieux"},{label:"Logistique (livraison, sécurité, ménage...)",value:"logistique"},{label:"Look (boutique classique & seconde main)",value:"look"},{label:"Loueur (mobilier, décoration, structure, scéno...)",value:"loueur"},{label:"Musique (dj, musique live)",value:"musique"},{label:"Photo & Vidéo (photographe, vidéaste)",value:"audiovisuel"},{label:"Restauration (traiteur, chef.fe, food-truck...)",value:"food"},{label:"Service (serveur.se, maître d'hotel, hôtesse)",value:"service"},{label:"Transport (véhicule motorisé ou vert, collectif ou individuel)",value:"transport"}],Ke={class:"questionnaires-container"},Ne={key:0,class:"mb-6"},We={key:1},Ge={class:"text-h6 px-4"},Ye={class:"service-chips mt-4"},Je={key:0,class:"mt-6"},Ze={class:"text-h6 px-4"},Xe={class:"mt-4"},eo={class:"keyword-chips"},oo={key:1,class:"mt-6"},so={class:"text-h6 px-4"},to={class:"mt-4"},ro={class:"keyword-chips"},io={key:2,class:"mt-6"},lo={class:"text-subtitle-2 mb-2"},ao={class:"text-body-2"},no={key:3,class:"mt-6"},uo={key:0,class:"mb-2"},co={key:1},po={class:"mt-1"},mo={key:2,class:"text-center py-8"},vo={key:3,class:"text-center py-4"},yo={class:"mt-6 text-center d-flex justify-space-between"},fo=ce({__name:"ServicesPrestataire",props:we({sector:{}},{pageActuelle:{},pageActuelleModifiers:{}}),emits:["update:pageActuelle"],setup(Z){const O=Z,F=be(Z,"pageActuelle"),B=re(),{professionnalServices:T,keywords:U,professionalUser:Q}=ie(B),{getSectors:_,sendProfessionalServices:K}=pe(),{addSuccess:L,addError:N}=he(),{patchProfessionnalProfileDetails:W}=me(),V=I([]),D=I(qe),t=I([]),h=()=>{F.value=F.value-1},$=()=>Math.random().toString(36).substr(2,9),M=(r,e)=>{var y;return((y=e.find(c=>c.uuid===r))==null?void 0:y.name)||"Service inconnu"},j=(r,e)=>{for(const y in e){const c=e[y].find(k=>k.uuid===r);if(c)return c.value}return"Mot-clé inconnu"},X=r=>{for(const e of V.value){const y=e.services.find(c=>c.uuid===r);if(y)return y.name}return"Service inconnu"},G=r=>{const e=[];for(const y of V.value)for(const c of r){const k=j(c,y.keywordsByCategory);k!=="Mot-clé inconnu"&&e.push(k)}return[...new Set(e)]},Y=(r,e)=>{var k,a,A;if(!r||!((k=U.value)!=null&&k.length))return{};const y={},c=[];return r.servicesSection&&c.push(...((a=r.servicesSection.questions)==null?void 0:a.map(q=>q.category))||[]),r.habitudesSection&&c.push(...((A=r.habitudesSection.questions)==null?void 0:A.map(q=>q.category))||[]),c.forEach(q=>{y[q]=U.value.filter(oe=>oe.category===q&&(oe.sector.toLowerCase()===e.toLowerCase()||!oe.sector))}),y},H=r=>{const e=te.find(y=>y.sector.toLowerCase()===r.toLowerCase());return{id:$(),sector:r,questionnaireData:e,services:[...T.value||[]],keywordsByCategory:Y(e,r),selectedServiceUuid:null,selectedKeywords:new Set}},w=(r,e)=>{e.selectedServiceUuid===r.uuid?e.selectedServiceUuid=null:e.selectedServiceUuid=r.uuid,J()},o=(r,e)=>{e.selectedKeywords.has(r.uuid)?e.selectedKeywords.delete(r.uuid):e.selectedKeywords.add(r.uuid),J()},b=async(r,e)=>{if(!e)return;r.questionnaireData=null,r.services=[],r.keywordsByCategory={},r.selectedServiceUuid=null,r.selectedKeywords.clear(),console.log("ICI"),await _(e);const y=ae([T,U],([c,k])=>{if(c!=null&&c.length&&(k!=null&&k.length)){const a=te.find(A=>A.sector.toLowerCase()===e.toLowerCase());r.sector=e,r.questionnaireData=a,r.services=[...c],r.keywordsByCategory=Y(a,e),y()}},{immediate:!0})},S=()=>{const r={id:$(),sector:"",questionnaireData:null,services:[],keywordsByCategory:{},selectedServiceUuid:null,selectedKeywords:new Set};V.value.push(r)},J=()=>{t.value=[],V.value.forEach(r=>{var e;r.selectedServiceUuid&&((e=Q.value)!=null&&e.uuid)&&t.value.push({serviceUuid:r.selectedServiceUuid,professionalUuid:Q.value.uuid,keywordsUuid:Array.from(r.selectedKeywords)})})},ee=async()=>{if(t.value.length===0){N({message:"Aucun service sélectionné"});return}try{const r=t.value.map(e=>K(e));await Promise.all(r),t.value.length>=2&&await W({...Q.value,secondActivity:te[1].sector??"",thirdActivity:te[2].sector??""}),L({message:`${t.value.length} service(s) créé(s) avec succès !`})}catch(r){console.error("Erreur lors de l'envoi:",r),N({message:"Erreur lors de l'envoi des services"})}};return Se(async()=>{if(O.sector&&O.sector!=="Veuillez choisir votre activité")try{await _(O.sector),await Ue();const r=ae([T,U],([e,y])=>{if(e!=null&&e.length&&(y!=null&&y.length)&&V.value.length===0){const c=H(O.sector);V.value.push(c),r()}},{immediate:!0})}catch(r){console.error("Erreur lors du chargement initial:",r)}}),ae([T,U],()=>{var r,e;if((r=T.value)!=null&&r.length&&((e=U.value)!=null&&e.length)&&O.sector&&V.value.length===0){console.log("Watcher de secours - création du questionnaire");const y=H(O.sector);V.value.push(y)}},{immediate:!0}),(r,e)=>{const y=v("v-select"),c=v("v-divider"),k=v("v-chip"),a=v("v-expansion-panel-text"),A=v("v-expansion-panel"),q=v("v-expansion-panels"),oe=v("v-icon"),ve=v("v-card-title"),ye=v("v-card-text"),fe=v("v-card"),ke=v("v-progress-circular"),le=v("v-btn");return u(),p("div",Ke,[(u(!0),p(P,null,R(V.value,(d,se)=>(u(),p("div",{key:d.id,class:"questionnaire-section mb-8"},[se>0?(u(),p("div",Ne,[s(y,{label:`Votre ${se+1}ème activité ?`,modelValue:d.sector,"onUpdate:modelValue":[f=>d.sector=f,f=>b(d,f)],items:D.value,"item-title":"label","item-value":"value",variant:"outlined"},null,8,["label","modelValue","onUpdate:modelValue","items"])])):E("",!0),d.questionnaireData&&d.services.length>0?(u(),p("div",We,[s(c,{class:"mt-6"},{default:i(()=>[n("span",Ge,g(d.questionnaireData.general.questions[0].question),1)]),_:2},1024),n("div",Ye,[(u(!0),p(P,null,R(d.services,f=>(u(),C(k,{key:f.uuid,variant:"outlined",color:d.selectedServiceUuid===f.uuid?"primary":"default",class:ne(["ma-1",{"selected-chip":d.selectedServiceUuid===f.uuid}]),onClick:x=>w(f,d)},{default:i(()=>[m(g(f.name),1)]),_:2},1032,["color","onClick","class"]))),128))]),d.questionnaireData.servicesSection?(u(),p("div",Je,[s(c,null,{default:i(()=>[n("span",Ze,g(d.questionnaireData.servicesSection.title||"Services détaillés"),1)]),_:2},1024),n("div",Xe,[s(q,{variant:"accordion",multiple:""},{default:i(()=>[(u(!0),p(P,null,R(d.questionnaireData.servicesSection.questions,f=>(u(),C(A,{key:f.category,title:f.question},{default:i(()=>[s(a,null,{default:i(()=>[n("div",eo,[(u(!0),p(P,null,R(d.keywordsByCategory[f.category]||[],x=>(u(),C(k,{key:x.uuid,variant:"outlined",class:ne(["ma-1",{"selected-chip":d.selectedKeywords.has(x.uuid)}]),color:d.selectedKeywords.has(x.uuid)?"success":"default",onClick:xe=>o(x,d)},{default:i(()=>[m(g(x.value),1)]),_:2},1032,["color","onClick","class"]))),128))])]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:2},1024)])])):E("",!0),d.questionnaireData.habitudesSection?(u(),p("div",oo,[s(c,null,{default:i(()=>[n("span",so,g(d.questionnaireData.habitudesSection.title||"Habitudes et pratiques"),1)]),_:2},1024),n("div",to,[s(q,{variant:"accordion",multiple:""},{default:i(()=>[(u(!0),p(P,null,R(d.questionnaireData.habitudesSection.questions,f=>(u(),C(A,{key:f.category,title:f.question},{default:i(()=>[s(a,null,{default:i(()=>[n("div",ro,[(u(!0),p(P,null,R(d.keywordsByCategory[f.category]||[],x=>(u(),C(k,{key:x.uuid,variant:"outlined",class:ne(["ma-1",{"selected-chip":d.selectedKeywords.has(x.uuid)}]),color:d.selectedKeywords.has(x.uuid)?"success":"default",onClick:xe=>o(x,d)},{default:i(()=>[m(g(x.value),1)]),_:2},1032,["color","onClick","class"]))),128))])]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:2},1024)])])):E("",!0),t.value.length>0?(u(),p("div",io,[s(fe,{variant:"outlined",color:"success"},{default:i(()=>[s(ve,{class:"text-h6 d-flex align-center"},{default:i(()=>[s(oe,{class:"mr-2"},{default:i(()=>e[2]||(e[2]=[m("mdi-check-circle",-1)])),_:1,__:[2]}),m(" Services prêts à être envoyés ("+g(t.value.length)+") ",1)]),_:1}),s(ye,null,{default:i(()=>[(u(!0),p(P,null,R(t.value,(f,x)=>(u(),p("div",{key:x,class:"mb-3 pa-3 bg-grey-lighten-5 rounded"},[n("div",lo,"Questionnaire "+g(x+1),1),n("div",ao,[e[3]||(e[3]=n("strong",null,"Service:",-1)),m(" "+g(X(f.serviceUuid)),1),e[4]||(e[4]=n("br",null,null,-1)),e[5]||(e[5]=n("strong",null,"Professional UUID:",-1)),m(" "+g(f.professionalUuid),1),e[6]||(e[6]=n("br",null,null,-1)),n("strong",null,"Mots-clés ("+g(f.keywordsUuid.length)+"):",1),m(" "+g(G([f.keywordsUuid]).join(", ")),1)])]))),128))]),_:2},1024)]),_:2},1024)])):E("",!0),d.selectedServiceUuid||d.selectedKeywords.size>0?(u(),p("div",no,[s(fe,{variant:"outlined",class:"pa-4"},{default:i(()=>[s(ve,{class:"text-subtitle-1"},{default:i(()=>e[7]||(e[7]=[m("Résumé de vos sélections",-1)])),_:1,__:[7]}),s(ye,null,{default:i(()=>[d.selectedServiceUuid?(u(),p("div",uo,[e[8]||(e[8]=n("strong",null,"Service sélectionné :",-1)),m(" "+g(M(d.selectedServiceUuid,d.services)),1)])):E("",!0),d.selectedKeywords.size>0?(u(),p("div",co,[n("strong",null,"Mots-clés sélectionnés ("+g(d.selectedKeywords.size)+") :",1),n("div",po,[(u(!0),p(P,null,R(Array.from(d.selectedKeywords),f=>(u(),C(k,{key:f,size:"small",color:"success",class:"ma-1"},{default:i(()=>[m(g(j(f,d.keywordsByCategory)),1)]),_:2},1024))),128))])])):E("",!0)]),_:2},1024)]),_:2},1024)])):E("",!0)])):se===0?(u(),p("div",mo,[s(ke,{indeterminate:"",color:"primary",class:"mb-4"}),e[9]||(e[9]=n("p",null,"Chargement des services et mots-clés...",-1))])):se>0&&!d.sector?(u(),p("div",vo,e[10]||(e[10]=[n("p",{class:"text-grey"}," Sélectionnez un secteur d'activité pour afficher les services disponibles ",-1)]))):E("",!0)]))),128)),n("div",yo,[V.value.length<3?(u(),C(le,{key:0,onClick:S,color:"primary",variant:"outlined","prepend-icon":"mdi-plus"},{default:i(()=>e[11]||(e[11]=[m(" Ajouter une nouvelle activité ",-1)])),_:1,__:[11]})):E("",!0)]),n("div",null,[s(le,{onClick:e[0]||(e[0]=d=>h())},{default:i(()=>e[12]||(e[12]=[m("Retour",-1)])),_:1,__:[12]}),s(le,{color:"primary",onClick:e[1]||(e[1]=d=>ee())},{default:i(()=>e[13]||(e[13]=[m("Valider ma selection",-1)])),_:1,__:[13]})])])}}}),bo=ge(fo,[["__scopeId","data-v-10fd7ffa"]]),go=[{label:"Auvergne Rhône-Alpes",value:"rhoneAlpes"},{label:"Ain",value:"ain"},{label:"Allier",value:"allier"},{label:"Ardèche",value:"ardeche"},{label:"Cantal",value:"cantal"},{label:"Drôme",value:"drome"},{label:"Haute-Savoie",value:"hauteSavoie"},{label:"Haute Loire",value:"hauteLoire"},{label:"Isère",value:"isere"},{label:"Loire",value:"loire"},{label:"Puy De Dôme",value:"puyDeDome"},{label:"Rhône",value:"rhone"},{label:"Savoie",value:"savoie"}],_o={class:"d-flex gap-2 flex-column justify-start align-items-start"},ho={class:"d-flex align-center gap-2"},qo={class:"mt-4"},ko={class:"my-8"},xo={key:1,class:"d-flex justify-space-between"},Vo=ce({__name:"EditProfessionalProfil",props:{openModal:{type:Boolean},openModalModifiers:{}},emits:["update:openModal"],setup(Z){var H;const O=re(),{createProfessionalProfile:F}=me(),{getSectors:B}=pe(),{isProfileCreated:T}=ie(O),U=be(Z,"openModal"),Q=I([]),_=I(!1),{addError:K}=he(),L=I(1),N=I(qe),W=I(go),V=Ae(()=>Q.value.reduce((w,o)=>(o.question&&o.reponse&&(w[o.question]=o.reponse),w),{})),D=ue({name:z().min(2).required("Le nom est requis"),siret:z().required("Le SIRET est requis").length(14,"Le SIRET doit contenir 14 caractères"),address:z().required("L'adresse est requise"),bio:z().required("La bio est requise"),mainActivity:z().required("Activité requise"),mainInterlocutor:z().required("L'interlocuteur principal est requis"),experience:de().min(0,"L'expérience doit être positive").required("L'expérience est requise"),geographicArea:z().required("La zone géographique est requise"),certification:z(),minimumReservationPeriod:de().min(0,"La période de réservation doit être positive"),deposit:Me(),depositAmount:de().min(0,"Le montant de l'acompte doit être positif"),billingPeriod:z().required("La période de facturation est requise"),links:Fe().of(ue({type:z(),value:z().url("URL non valide")})),faq:ue({question:z(),reponse:z()})}),{values:t,errors:h,resetForm:$}=Be({validationSchema:D,initialValues:{name:"",siret:"",address:"",bio:"",mainActivity:"Veuillez choisir votre activité",mainInterlocutor:"",experience:0,geographicArea:((H=W.value[0])==null?void 0:H.label)??"",faq:{},minimumReservationPeriod:0,certification:"",deposit:!1,depositAmount:0,billingPeriod:"beforeEvent",links:[]},validateOnMount:!1,keepValuesOnUnmount:!0}),M=()=>{t.links.push({type:"",value:""})},j=w=>{t.links.length>0&&t.links.splice(w,1)},X=()=>{Q.value.push({question:"",reponse:""})},G=w=>{Q.value.length>=0&&Q.value.splice(w,1)},Y=async w=>{const o={...w,faq:V.value,minimumReservationPeriod:w.minimumReservationPeriod*7};try{(await F(o)).message==="Professional created"?(B(t.mainActivity),L.value=2):K({message:"La mise à jour du profil a échoué."})}catch{K({message:"Erreur lors de la mise à jour du profil."})}};return $(),(w,o)=>{const b=v("v-divider"),S=v("v-text-field"),J=v("v-select"),ee=v("v-number-input"),r=v("v-checkbox"),e=v("v-label"),y=v("v-switch"),c=v("v-btn"),k=v("v-form");return u(),p(P,null,[s($e,{modelValue:U.value,"onUpdate:modelValue":o[16]||(o[16]=a=>U.value=a),fullscreen:"",transition:"dialog-bottom-transition"},{title:i(()=>[m(g(l(T)?"Modifier votre profil":"Renseignez votre profil"),1)]),content:i(()=>[s(k,{class:"px-4"},{default:i(()=>[ze(n("div",null,[s(b,{class:"mt-6"},{default:i(()=>o[17]||(o[17]=[n("p",{class:"mt-6"},null,-1),m(" A propos de votre entreprise",-1)])),_:1,__:[17]}),s(S,{class:"mt-6",label:"Le nom de votre entreprise ?",modelValue:l(t).name,"onUpdate:modelValue":o[0]||(o[0]=a=>l(t).name=a),"error-messages":_.value?l(h).name:void 0},null,8,["modelValue","error-messages"]),s(S,{label:"Votre Numéro De Siret ?",modelValue:l(t).siret,"onUpdate:modelValue":o[1]||(o[1]=a=>l(t).siret=a),"error-messages":_.value?l(h).siret:void 0},null,8,["modelValue","error-messages"]),s(S,{label:"L'adresse complète du siège social ?",modelValue:l(t).address,"onUpdate:modelValue":o[2]||(o[2]=a=>l(t).address=a),"error-messages":_.value?l(h).address:void 0},null,8,["modelValue","error-messages"]),s(S,{label:"Une courte description de votre activité ?",modelValue:l(t).bio,"onUpdate:modelValue":o[3]||(o[3]=a=>l(t).bio=a),"error-messages":_.value?l(h).bio:void 0},null,8,["modelValue","error-messages"]),s(J,{label:"Votre activité principale ?",modelValue:l(t).mainActivity,"onUpdate:modelValue":o[4]||(o[4]=a=>l(t).mainActivity=a),items:N.value,"item-title":"label","item-value":"value","error-messages":_.value?l(h).mainActivity:void 0},null,8,["modelValue","items","error-messages"]),s(S,{label:"Le nom complet de l'interlocuteur principal ?",modelValue:l(t).mainInterlocutor,"onUpdate:modelValue":o[5]||(o[5]=a=>l(t).mainInterlocutor=a),"error-messages":_.value?l(h).mainInterlocutor:void 0},null,8,["modelValue","error-messages"]),s(ee,{label:"Depuis combien d'année exercez-vous cette activité ?",modelValue:l(t).experience,"onUpdate:modelValue":o[6]||(o[6]=a=>l(t).experience=a),variant:"solo",min:0,"error-messages":_.value?l(h).experience:void 0},null,8,["modelValue","error-messages"]),s(b,{class:"border-opacity-50 mb-6"},{default:i(()=>o[18]||(o[18]=[n("p",{class:"mb-6"},"A propos de votre activité",-1)])),_:1,__:[18]}),s(J,{label:"Votre secteur géographique ?",modelValue:l(t).geographicArea,"onUpdate:modelValue":o[7]||(o[7]=a=>l(t).geographicArea=a),items:W.value,"item-title":"label","item-value":"value","error-messages":_.value?l(h).geographicArea:void 0},null,8,["modelValue","items","error-messages"]),s(S,{modelValue:l(t).certification,"onUpdate:modelValue":o[8]||(o[8]=a=>l(t).certification=a),label:"Labels & Certifications",variant:"outlined",placeholder:"exemple: Label AB (Bio)"},null,8,["modelValue"]),s(ee,{variant:"solo",min:0,label:"Votre délai de réservation minimum (en semaine) ?",modelValue:l(t).minimumReservationPeriod,"onUpdate:modelValue":o[9]||(o[9]=a=>l(t).minimumReservationPeriod=a),"error-messages":_.value?l(h).minimumReservationPeriod:void 0},null,8,["modelValue","error-messages"]),s(r,{label:"Doit-on vous faire un accompte avant prestation",modelValue:l(t).deposit,"onUpdate:modelValue":o[10]||(o[10]=a=>l(t).deposit=a),"error-messages":_.value?l(h).deposit:void 0},null,8,["modelValue","error-messages"]),l(t).deposit?(u(),C(ee,{key:0,variant:"solo",min:0,max:100,step:5,label:"Quel est le montant de dépôt (en pourcentage)?",modelValue:l(t).depositAmount,"onUpdate:modelValue":o[11]||(o[11]=a=>l(t).depositAmount=a),"error-messages":_.value?l(h).depositAmount:void 0},null,8,["modelValue","error-messages"])):E("",!0),n("div",_o,[s(e,{class:"text-subtitle-1 font-weight-medium"},{default:i(()=>o[19]||(o[19]=[m("Vous souhaitez être payer avant l'évènement ?",-1)])),_:1,__:[19]}),n("div",ho,[s(e,{class:"text-subtitle-1 font-weight-medium"},{default:i(()=>o[20]||(o[20]=[m("Avant la prestation",-1)])),_:1,__:[20]}),s(y,{modelValue:l(t).billingPeriod,"onUpdate:modelValue":o[12]||(o[12]=a=>l(t).billingPeriod=a),"false-value":"beforeEvent","true-value":"afterEvent",color:l(t).billingPeriod==="beforeEvent"?"success":"primary","hide-details":"","error-messages":_.value?l(h).billingPeriod:void 0},{default:i(()=>[m(g(l(t).billingPeriod),1)]),_:1},8,["modelValue","color","error-messages"]),s(e,{class:"text-subtitle-1 font-weight-medium"},{default:i(()=>o[21]||(o[21]=[m("Après la prestation",-1)])),_:1,__:[21]})])]),s(b,{class:"mb-6"},{default:i(()=>o[22]||(o[22]=[n("p",{class:"mb-6"},"A propos de votre communication",-1)])),_:1,__:[22]}),n("div",qo,[(u(!0),p(P,null,R(l(t).links,(a,A)=>(u(),p("div",{key:A},[s(J,{modelValue:a.type,"onUpdate:modelValue":q=>a.type=q,label:"Renseignez le réseau social ou le site web",items:["Facebook","Instagram","LinkedIn","Twitter","Site Web"],"item-title":"label","item-value":"value"},null,8,["modelValue","onUpdate:modelValue"]),s(S,{modelValue:a.value,"onUpdate:modelValue":q=>a.value=q,label:"Renseignez le lien vers le réseau social ou le site web",type:"url",variant:"outlined",placeholder:"https://www.example.com/mon-reseau-social"},null,8,["modelValue","onUpdate:modelValue"]),s(c,{onClick:q=>j(A),disabled:l(t).links.length<=0,color:"error","prepend-icon":"mdi-delete",size:"small",class:"mb-4"},{default:i(()=>o[23]||(o[23]=[m(" Supprimer ",-1)])),_:2,__:[23]},1032,["onClick","disabled"])]))),128)),s(c,{onClick:M,color:"primary"},{default:i(()=>o[24]||(o[24]=[m(" Ajouter un lien vers un réseau social ou un site web ",-1)])),_:1,__:[24]})]),n("div",ko,[(u(!0),p(P,null,R(Q.value,(a,A)=>(u(),p("div",{key:A},[s(S,{modelValue:a.question,"onUpdate:modelValue":q=>a.question=q,label:"Renseignez une question fréquente auquelle vous répondez souvent","item-title":"label","item-value":"value"},null,8,["modelValue","onUpdate:modelValue"]),s(S,{modelValue:a.reponse,"onUpdate:modelValue":q=>a.reponse=q,label:"Renseignez la réponse à la question",type:"text",variant:"outlined",placeholder:"https://www.example.com/mon-reseau-social"},null,8,["modelValue","onUpdate:modelValue"]),s(c,{onClick:q=>G(A),disabled:Q.value.length===0,color:"error","prepend-icon":"mdi-delete",size:"small",class:"my-2"},{default:i(()=>o[25]||(o[25]=[m(" Supprimer ",-1)])),_:2,__:[25]},1032,["onClick","disabled"])]))),128)),s(c,{onClick:X,color:"primary"},{default:i(()=>o[26]||(o[26]=[m(" Ajouter une question fréquente et sa réponse ",-1)])),_:1,__:[26]})])],512),[[Ee,L.value===1]]),L.value===2?(u(),C(bo,{key:0,class:"mt-6",sector:l(t).mainActivity,pageActuelle:L.value,"onUpdate:pageActuelle":o[13]||(o[13]=a=>L.value=a)},null,8,["sector","pageActuelle"])):E("",!0),L.value===1?(u(),p("div",xo,[s(c,{onClick:o[14]||(o[14]=a=>U.value=!1)},{default:i(()=>o[27]||(o[27]=[m("Annuler",-1)])),_:1,__:[27]}),s(c,{color:"primary",onClick:o[15]||(o[15]=a=>Y(l(t)))},{default:i(()=>o[28]||(o[28]=[m("Vers le questionnaire détaillé",-1)])),_:1,__:[28]})])):E("",!0)]),_:1})]),_:1},8,["modelValue"]),(u(),C(_e,{to:"body"},[s(je)]))],64)}}}),wo={class:"position-relative"},So=["src"],Uo={class:"mx-sm-5"},Ao={class:"d-sm-flex align-center justify-sm-start justify-center"},zo={class:"text-sm-left text-center"},Eo=["src"],Po={class:"ml-sm-4 text-sm-left text-center"},Co={class:"text-h3 font-weight-semibold mb-1 my-sm-0 my-2"},Qo={class:"text-h6 font-weight-medium text-grey100"},Ro={class:"d-flex flex-column justify-center align-center gap-4"},Io={key:0},Oo={class:"d-sm-flex d-none"},To=ce({__name:"ProfileBannerOne",setup(Z){const{bgPicture:O}=ie(re()),F=I(null),B=I(!1),T=I(null),{user:U,isProfileCreated:Q,isProfilUpdate:_}=ie(re());pe();const{changeProfessionalBannerPicture:K}=me(),L=()=>{var D;return(D=T.value)==null?void 0:D.click()},N=async D=>{var $;const t=D.target;if(!(($=t.files)!=null&&$.length))return;const h=t.files[0];await K(h)},W=Pe([{tab:"My Profile",icon:Oe,href:"/apps/userprofile/one"},{tab:"Teams",icon:Te,href:"/apps/userprofile/one/teams"},{tab:"Projects",icon:Le,href:"/apps/userprofile/one/projects"},{tab:"Connection",icon:De,href:"/apps/userprofile/one/connection"}]),V=()=>{B.value=!B.value};return(D,t)=>{const h=v("v-avatar"),$=v("v-chip"),M=v("v-col"),j=v("v-btn"),X=Ve,G=v("v-row"),Y=v("v-tab"),H=v("v-tabs"),w=v("v-card-item"),o=v("v-card");return u(),p(P,null,[n("div",wo,[n("img",{src:l(O),alt:"profile",class:"w-100"},null,8,So),n("button",{onClick:L,class:"profile-banner__change-image"},"+"),n("input",{type:"file",ref_key:"fileInput",ref:T,onChange:N,accept:"image/*",style:{display:"none"}},null,544)]),n("div",Uo,[s(o,{elevation:"10",class:"overflow-hidden mt-sm-n13 mt-n5"},{default:i(()=>[s(w,{class:"pb-0"},{default:i(()=>[s(G,{class:"mt-1 justify-space-between"},{default:i(()=>[s(M,{cols:"12",md:"6",sm:"9",class:"pt-0"},{default:i(()=>{var b,S;return[n("div",Ao,[n("div",zo,[s(h,{size:"100",class:"userImage position-relative overflow-visible"},{default:i(()=>[n("img",{src:l(Ce),width:"100",alt:"Mathew",class:"rounded-circle"},null,8,Eo),s(h,{size:"26",class:"bg-primary position-absolute plus"},{default:i(()=>[s(l(Qe),{size:"16","stroke-width":"2"})]),_:1})]),_:1})]),n("div",Po,[n("h5",Co,[m(g(((b=l(U))==null?void 0:b.username)??"Définir votre nom complet")+" ",1),s($,{color:"primary",class:"bg-lightprimary font-weight-semibold ml-2 mt-n1",variant:"outlined",size:"x-small"},{default:i(()=>t[4]||(t[4]=[m("Admin",-1)])),_:1,__:[4]})]),n("span",Qo,g(((S=l(U))==null?void 0:S.category)??"Aucune phrase inspirante définie"),1)])])]}),_:1}),s(M,{cols:"12",md:"6",sm:"3",class:"d-flex align-center justify-center justify-sm-end order-sm-third"},{default:i(()=>[n("div",Ro,[n("div",null,[s(j,{color:"primary",size:"large",class:"w-100",onClick:t[0]||(t[0]=b=>V())},{default:i(()=>t[5]||(t[5]=[m("Editez votre profil",-1)])),_:1,__:[5]})]),l(Q)?(u(),p("div",Io,[s(X,{to:"/dashboards/dashboard2",class:"w-100"},{default:i(()=>[s(j,{color:"success",size:"large",class:"w-100"},{default:i(()=>t[6]||(t[6]=[m(" Revenir à votre dashboard ",-1)])),_:1,__:[6]})]),_:1})])):E("",!0)])]),_:1})]),_:1}),s(G,null,{default:i(()=>[s(M,{md:"12",class:"profile-one"},{default:i(()=>[s(H,{modelValue:F.value,"onUpdate:modelValue":t[1]||(t[1]=b=>F.value=b),color:"primary",dark:"",class:"profiletab"},{default:i(()=>[(u(!0),p(P,null,R(W.value,b=>(u(),C(Y,{key:b.tab,to:b.href,class:"text-grey100 mr-sm-3"},{default:i(()=>[(u(),C(Re(b.icon),{size:"20","stroke-width":"1.5",class:"mr-sm-2 text-h6 text-grey100 icon"})),n("span",Oo,g(b.tab),1)]),_:2},1032,["to"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),(u(),C(_e,{to:"body"},[s(Vo,{openModal:B.value,"onUpdate:openModal":t[2]||(t[2]=b=>B.value=b)},null,8,["openModal"]),s(He,{redirection:"dashboard2",modelValue:l(_),"onUpdate:modelValue":t[3]||(t[3]=b=>Ie(_)?_.value=b:null)},null,8,["modelValue"])]))],64)}}}),Wo=ge(To,[["__scopeId","data-v-55241871"]]);export{Wo as P};
